<!-- Branch: main --><!-- Revision: 3c83cd4cd62fc29b2ae4ddf3ef2c0bfee837bd19 --><!-- Created at: 02 of December 2024 15:06:21 GMT+00:00 --><!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=auto"><meta name="description" content="View Master Template"><title>View Master Template</title><style>:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}button{background:0 0;border:none}*,:before,:after{box-sizing:border-box}a,button{cursor:revert}ol,ul,menu{list-style:none}img{max-width:100%;max-height:100%}table{border-collapse:collapse}input,textarea{-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}textarea{white-space:revert}meter{-webkit-appearance:revert;-moz-appearance:revert;appearance:revert}pre{all:revert}::placeholder{color:unset}::marker{content:""}:where([hidden]){display:none}:where([contenteditable]:not([contenteditable=false])){-moz-user-modify:read-write;-webkit-user-modify:read-write;overflow-wrap:break-word;-webkit-line-break:after-white-space;-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}:where([draggable=true]){-webkit-user-drag:element}body{background-color:#000;margin:0;padding:0}button{padding:0}#dynamic{height:100vh;overflow:hidden}</style><style>
.NQnIja_countdown{text-align:center;color:#fff;background:rgba(51,51,51,.5);border-radius:50%;min-width:35px;min-height:35px;margin:-10px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:400;line-height:35px;display:block}.NQnIja_countdown:before,.NQnIja_countdown:after{content:"";line-height:0;display:inline-flex}.mqB7Ka_closeIcon{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22525.4%22%20height%3D%22525.5%22%3E%3Cpath%20fill%3D%22%23fff%22%20stroke%3D%22%23000%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%2226%22%20d%3D%22M452.6%208.9%20262.9%20198.6%2073.1%208.9%209%2073l189.8%20189.7L9%20452l64.1%2064.1%20189.8-189.3%20189.7%20189.3%2064.1-64.1-189.8-189.3L516.7%2073z%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:18px;height:18px}.mqB7Ka_skipIcon{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2294.7%22%20height%3D%2294.9%22%3E%3Cg%20fill%3D%22%23FFF%22%20stroke%3D%22%23000%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%223.417%22%3E%3Cpath%20d%3D%22m37%2075.5%2022.4-22.4H1.9V41.7h57.5L37%2019.3l8.1-8.1%2036.2%2036.2-36.2%2036.2z%22%2F%3E%3Cpath%20d%3D%22M92.733%2011.138v72.4h-11.5v-72.4z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E) 50%/100% no-repeat;width:18px;height:18px}.LJWyoG_nextButton{color:#fff;text-align:center;z-index:2147483448;justify-content:center;align-items:center;margin:20px 20px 0 0;padding:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:0;display:flex;position:absolute;top:0;right:0}.oAV7cW_endcardIframe{border:0;width:100%;height:100%;position:absolute;top:0;left:0}.oAV7cW_endcard{text-align:center;background-color:#000;width:100vw;height:100vh}._7pzQ5q_overlayCta{content:"";z-index:2147483347;background:0 0;width:100%;height:100%;position:fixed;top:0;bottom:0;left:0;right:0}._7pzQ5q_hidden{display:none}.poFP6W_overlay{z-index:2147483448;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);background:linear-gradient(rgba(0,15,35,.59) 0%,rgba(0,15,35,.8) 45%,rgba(0,15,35,.8) 100%);width:100%;height:100%;position:fixed;top:0;left:0}.poFP6W_opaque{background:#000}.poFP6W_lastChanceEndCard{flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;top:0;left:0}.poFP6W_backgroundNone{background:0 0}.poFP6W_name{color:#fff;text-align:center;z-index:2147483447;margin:11px 40px 22px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:20px;font-weight:700}.poFP6W_icon{z-index:2147483447;border-radius:10px;width:80px;height:80px;display:block}.poFP6W_button{color:#fff;letter-spacing:.9px;z-index:2147483447;background-color:#007aff;border:none;border-radius:50px;padding:7px 18px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:700;position:relative}.poFP6W_button:focus{outline:none}.poFP6W_button:before,.poFP6W_button:after{content:"";z-index:-1000;background-repeat:no-repeat;width:140%;height:100%;transition:all .5s ease-out;display:block;position:absolute;left:-20%}.poFP6W_button:before{background-image:radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 20%,#007aff 20%,transparent 30%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 10%,#007aff 15%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%);background-size:10% 10%,20% 20%,15% 15%,20% 20%,18% 18%,10% 10%,15% 15%,10% 10%,18% 18%;display:none;top:-75%}.poFP6W_button:after{background-image:radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 10%,#007aff 15%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%);background-size:15% 15%,20% 20%,18% 18%,20% 20%,15% 15%,10% 10%,20% 20%;display:none;bottom:-75%}.poFP6W_button.poFP6W_animate:before{animation:2s infinite forwards poFP6W_topBubbles;display:block}.poFP6W_button.poFP6W_animate:after{animation:2.3s infinite forwards poFP6W_bottomBubbles;display:block}@keyframes poFP6W_topBubbles{0%{background-position:5% 90%,10% 90%,10% 90%,15% 90%,25% 90%,25% 90%,40% 90%,55% 90%,70% 90%}50%{background-position:0 80%,0 20%,10% 40%,20% 0,30% 30%,22%,50%,65% 20%,90% 30%}to{background-position:0 70%,0 10%,10% 30%,20% -10%,30% 20%,22% 40%,50% 40%,65% 10%,90% 20%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}@keyframes poFP6W_bottomBubbles{0%{background-position:10% -10%,30% 10%,55% -10%,70% -10%,85% -10%,70% -10%,70% 0}50%{background-position:0 80%,20% 80%,45% 60%,60% 100%,75% 70%,95% 60%,105% 0}to{background-position:0 90%,20% 90%,45% 70%,60% 110%,75% 80%,95% 70%,110% 10%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}.wnLcbW_fallback{text-align:right;background:rgba(0,0,0,.8);width:100vw;height:100vh;padding:20px;position:absolute;top:0;left:0}.wnLcbW_closeIcon{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22525.4%22%20height%3D%22525.5%22%3E%3Cpath%20fill%3D%22%23fff%22%20stroke%3D%22%23000%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%2226%22%20d%3D%22M452.6%208.9%20262.9%20198.6%2073.1%208.9%209%2073l189.8%20189.7L9%20452l64.1%2064.1%20189.8-189.3%20189.7%20189.3%2064.1-64.1-189.8-189.3L516.7%2073z%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:18px;height:18px}.C4yOdG_primaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{color:#fff;background-color:#555fff;padding:0}.C4yOdG_primaryButton button,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton button{text-transform:uppercase;color:#fff}@media screen and (orientation:landscape){.C4yOdG_primaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{flex:1}}.C4yOdG_secondaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{color:#555fff;background-color:#fff;padding:0}.C4yOdG_secondaryButton button,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton button{color:#555fff}@media screen and (orientation:landscape){.C4yOdG_secondaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{flex:1}}.C4yOdG_gdpr{text-align:center;z-index:2147483647;background-color:#fff;flex-direction:column;justify-content:space-between;width:100%;height:100%;display:flex;position:absolute;top:0;left:0;overflow:hidden}.C4yOdG_gdpr .C4yOdG_icon{color:#fff;background:#007aff url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22100%22%20height%3D%22100%22%3E%3Cpath%20fill%3D%22%23FFF%22%20d%3D%22M46.2%201.238v12.1c-17.7%201-31.9%2015.2-32.9%2032.9H1.2v4h12.1c1%2017.7%2015.2%2031.9%2032.9%2032.9v12.1h4v-12.1c17.7-1%2031.9-15.2%2032.9-32.9h12.1v-4h-12c-1-17.7-15.2-31.9-32.9-32.9v-12.1zm0%2016.1v14.1c-7.8.9-14%207.1-14.9%2014.9h-14c1-15.6%2013.4-28%2028.9-29m4%200c15.5%201%2027.9%2013.4%2028.9%2028.9h-14c-.9-7.8-7.1-14-14.9-14.9zm-9.3%2023.6c10.8-8.1%2022.8%203.9%2014.7%2014.7-10.8%208.1-22.8-3.9-14.7-14.7m-23.6%209.3h14.1c.9%207.8%207.1%2014%2014.9%2014.9v14.1c-15.6-1-28-13.4-29-29m47.8%200h14.1c-1%2015.5-13.4%2028-28.9%2028.9v-14.1c7.7-.8%2013.9-7%2014.8-14.8%22%2F%3E%3C%2Fsvg%3E) 50%/85% no-repeat;border-radius:50%;width:17vw;max-width:6em;height:17vw;max-height:6em;padding:.5em;display:inline-block}.C4yOdG_gdpr .C4yOdG_content{flex-direction:column;flex:1;justify-content:center;display:flex}.C4yOdG_gdpr .C4yOdG_header{padding:0;line-height:1}.C4yOdG_gdpr .C4yOdG_title{word-wrap:break-word;margin:.5em 12.5%;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:5.5vw;font-weight:600;line-height:1.5}.C4yOdG_gdpr .C4yOdG_bodyText{text-align:center;word-wrap:break-word;padding:0 12.5%;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:4.5vw;font-weight:400;line-height:1.5;overflow:hidden}.C4yOdG_gdpr .C4yOdG_buttons{width:100%;height:15vw;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;line-height:15vw}.C4yOdG_gdpr .C4yOdG_buttons button{float:right;width:50%;height:100%;display:block}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{font-size:7.5vw}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{color:#007aff;border-top:1px solid #e8e8e8;font-size:4.5vw}@media screen and (orientation:landscape){.C4yOdG_gdpr{flex-direction:row}.C4yOdG_gdpr .C4yOdG_content{width:75%}.C4yOdG_gdpr .C4yOdG_content .C4yOdG_title{font-size:5vh}.C4yOdG_gdpr .C4yOdG_content .C4yOdG_bodyText{font-size:4vh}.C4yOdG_gdpr .C4yOdG_buttons{flex-direction:column;justify-content:center;width:25%;min-width:116px;height:100%;padding-right:4.5vh;display:flex;right:0}.C4yOdG_gdpr .C4yOdG_buttons button{float:none;width:100%;height:auto;line-height:12vh}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{border-radius:10vh;margin-bottom:2vh;font-size:3.5vh}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{border-top:none;font-size:2.5vh}}.J2DrKG_staticImageEndcard{justify-content:center;align-items:center;width:100vw;height:100vh;display:flex}.J2DrKG_staticImageEndcard img{max-height:100%;margin:0 auto}.S2LOeW_icon{font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif}.S2LOeW_muted{z-index:2147483447;padding:10px 30px 30px 10px;position:absolute;top:0;left:0}.S2LOeW_muted span{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500px' height='500px' %3E%3Ccircle opacity='0.8' cx='249.9' cy='249.9' r='247'/%3E%3Cpath fill='%23fff' d='M418.9 195.8c-3.2-3.2-8.2-3.2-11.4 0l-45.6 45.6-45.6-45.6c-3.2-3.2-8.2-3.2-11.4 0-3.2 3.2-3.2 8.2 0 11.4l45.6 45.6-45.6 45.6c-3.2 3.2-3.2 8.2 0 11.4 1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3l45.6-45.6 45.6 45.6c1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3c3.2-3.2 3.2-8.2 0-11.4l-45.6-45.6 45.6-45.6c2.9-2.3 2.9-8.2-.8-11.4zM268.2 89.2c-2.3-1.7-6.8-.9-9.1.9l-106.7 79.5H95.2c-5 0-8.2 2.9-8.2 7.6v144c0 4.6 3.2 7.6 8.2 7.6h57.2l106.7 80c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.5c.9-1.7-.9-4.6-4.1-6.3zM148.2 314h-44.8V186.1h44.8V314zm108.5 72.9l-92.1-69v-136l91.7-69v274h.4z'/%3E%3Cpath display='none' d='M268.5 89c-2.3-1.7-6.8-.9-9.2.9l-107 79.9H94.9c-5 0-8.2 3-8.2 7.7V322c0 4.6 3.2 7.7 8.2 7.7h57.4L259.4 410c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.3c1-1.7-.8-4.6-4.1-6.3zM148.2 314.6h-44.9V186.2h44.9v128.4zm108.9 73.1l-92.4-69.3V182l92-69.2v274.9h.4zm149-127.2h-90.5c-4.2 0-7.7-3.5-7.7-7.9s3.4-7.9 7.7-7.9h90.5c4.2 0 7.7 3.5 7.7 7.9s-3.4 7.9-7.7 7.9zm.9-94.6l-88.6 37.6c-3.9 1.6-8.4-.3-10-4.3-1.6-4 .3-8.6 4.1-10.2l88.6-37.6c3.9-1.6 8.4.3 10 4.3 1.6 3.9-.2 8.6-4.1 10.2zm4.7 182.9c-1.6 4-6.1 5.9-10 4.3l-88.6-37.6c-3.9-1.6-5.8-6.2-4.1-10.2 1.6-4 6.1-5.9 10-4.3l88.6 37.6c3.9 1.6 5.8 6.2 4.1 10.2z'/%3E%3C/svg%3E");background-size:100%;width:22px;height:22px;display:block}.S2LOeW_unmuted{z-index:2147483447;padding:10px 30px 30px 10px;position:absolute;top:0;left:0}.S2LOeW_unmuted span{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500px' height='500px' %3E%3Ccircle opacity='0.8' cx='249.9' cy='249.9' r='247'/%3E%3Cpath display='none' fill='%23fff' d='M418.9 195.8c-3.2-3.2-8.2-3.2-11.4 0l-45.6 45.6-45.6-45.6c-3.2-3.2-8.2-3.2-11.4 0-3.2 3.2-3.2 8.2 0 11.4l45.6 45.6-45.6 45.6c-3.2 3.2-3.2 8.2 0 11.4 1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3l45.6-45.6 45.6 45.6c1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3c3.2-3.2 3.2-8.2 0-11.4l-45.6-45.6 45.6-45.6c2.9-2.3 2.9-8.2-.8-11.4zM268.2 89.2c-2.3-1.7-6.8-.9-9.1.9l-106.7 79.5H95.2c-5 0-8.2 2.9-8.2 7.6v144c0 4.6 3.2 7.6 8.2 7.6h57.2l106.7 80c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.5c.9-1.7-.9-4.6-4.1-6.3zM148.2 314h-44.8V186.1h44.8V314zm108.5 72.9l-92.1-69v-136l91.7-69v274h.4z'/%3E%3Cpath fill='%23fff' d='M268.5 89c-2.3-1.7-6.8-.9-9.2.9l-107 79.9H94.9c-5 0-8.2 3-8.2 7.7V322c0 4.6 3.2 7.7 8.2 7.7h57.4L259.4 410c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.3c1-1.7-.8-4.6-4.1-6.3zM148.2 314.6h-44.9V186.2h44.9v128.4zm108.9 73.1l-92.4-69.3V182l92-69.2v274.9h.4zm149-127.2h-90.5c-4.2 0-7.7-3.5-7.7-7.9s3.4-7.9 7.7-7.9h90.5c4.2 0 7.7 3.5 7.7 7.9s-3.4 7.9-7.7 7.9zm.9-94.6l-88.6 37.6c-3.9 1.6-8.4-.3-10-4.3-1.6-4 .3-8.6 4.1-10.2l88.6-37.6c3.9-1.6 8.4.3 10 4.3 1.6 3.9-.2 8.6-4.1 10.2zm4.7 182.9c-1.6 4-6.1 5.9-10 4.3l-88.6-37.6c-3.9-1.6-5.8-6.2-4.1-10.2 1.6-4 6.1-5.9 10-4.3l88.6 37.6c3.9 1.6 5.8 6.2 4.1 10.2z'/%3E%3C/svg%3E");background-size:100%;width:22px;height:22px;display:block}.OaF7uW_videoProgress{z-index:2147483447;background:rgba(0,0,0,.2);width:100%;height:.1875rem;position:absolute;bottom:0;left:0;right:0;overflow:hidden}.OaF7uW_videoProgress span{width:0%;height:100%;animation-name:OaF7uW_progress-animation;animation-timing-function:cubic-bezier(0,.79,.5,1);animation-iteration-count:infinite;animation-delay:1ms;animation-fill-mode:forwards;position:absolute;top:0;left:0}.OaF7uW_videoProgress span.OaF7uW_paused{animation-play-state:paused}@keyframes OaF7uW_progress-animation{0%{width:20%}to{width:100%}}.ok_seq_videoPlayerWrap{justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute}.ok_seq_videoPlayer,.ok_seq_videoPlayer video{width:100%;height:100%}.RypQCq_videoBlurWrap{justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;overflow:hidden}.RypQCq_videoBlurWrap>canvas{filter:blur(6px)brightness(.25);min-width:100vw;min-height:100vh}.dDtiqq_tapToPlayMask{z-index:2147483547;background-color:rgba(0,0,0,.6);position:fixed;top:0;bottom:0;left:0;right:0}.dDtiqq_tapToPlayContainer{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.dDtiqq_tapToPlayIcon{filter:invert();background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M9%2011.24V7.5a2.5%202.5%200%200%201%205%200v3.74c1.21-.81%202-2.18%202-3.74C16%205.01%2013.99%203%2011.5%203S7%205.01%207%207.5c0%201.56.79%202.93%202%203.74m9.84%204.63-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10%206.67%2010%207.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31%200-.59.13-.79.33l-.79.8%204.94%204.94c.27.27.65.44%201.06.44h6.79c.75%200%201.33-.55%201.44-1.28l.75-5.27c.01-.07.02-.14.02-.2%200-.62-.38-1.16-.91-1.38%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:50px;max-width:120px;max-height:120px;margin:0 auto}@media screen and (min-width:320px){.dDtiqq_tapToPlayIcon{width:calc(7.95455vw + 24.5455px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayIcon{width:120px}}.dDtiqq_tapToPlayIcon{height:50px}@media screen and (min-width:320px){.dDtiqq_tapToPlayIcon{height:calc(7.95455vw + 24.5455px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayIcon{height:120px}}.dDtiqq_tapToPlayText{color:#fff;text-align:center;margin:.3em 0;font-size:15px;font-weight:400}@media screen and (min-width:320px){.dDtiqq_tapToPlayText{font-size:calc(1.13636vw + 11.3636px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayText{font-size:25px}}.Zz6y0G_download{z-index:2147483447;float:right;cursor:pointer;width:50px;height:50px;padding:20px 10px 10px 20px;line-height:1em;position:fixed;bottom:4px;right:0}.Zz6y0G_download .Zz6y0G_downloadIcon{cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='48px'%20height='48px'%20%3E%3Cpath%20fill='white'%20d='M11%2040q-1.2%200-2.1-.9Q8%2038.2%208%2037v-7.15h3V37h26v-7.15h3V37q0%201.2-.9%202.1-.9.9-2.1.9Zm13-7.65-9.65-9.65%202.15-2.15%206%206V8h3v18.55l6-6%202.15%202.15Z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-size:23px;width:19px;height:19px;display:inline-block;bottom:10px}@media only screen and (max-height:249px){.Zz6y0G_download{display:none}}.UUyEIq_persistentSimpleCta{z-index:2147483446;background:rgba(0,0,0,.5);border-radius:8px 0 0 8px;padding:8px;transition:transform .5s ease-in-out;display:flex;position:fixed;bottom:8px;right:0;transform:translate(100%)}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_persistentSimpleCta{padding:12px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_persistentSimpleCta{background:linear-gradient(transparent 0%,rgba(0,0,0,.8) 80%);justify-content:center;align-items:center;width:100%;padding:25px;bottom:0}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_persistentSimpleCta{border-radius:4px 0 0 4px;padding:4px}}.UUyEIq_slideIn{transform:translate(0)}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_slideIn{left:50%;transform:translate(-50%)}}.UUyEIq_appIcon{cursor:pointer;border-radius:8px;width:52px;height:52px;left:0}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_appIcon{width:70px;height:70px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appIcon{width:100px;height:100px}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_appIcon{border-radius:4px;width:26px;height:26px}}.UUyEIq_persistentSimpleCtaBtn{cursor:pointer;text-align:center;color:#fff;white-space:nowrap;background-color:#179e2d;border:none;border-radius:8px;min-width:99px;height:52px;padding:0 10px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:21px;font-weight:400}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_persistentSimpleCtaBtn{height:70px;font-size:30px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_persistentSimpleCtaBtn{min-width:200px;height:70px;font-size:30px}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_persistentSimpleCtaBtn{border-radius:4px;min-width:80px;height:26px;font-size:14px}}.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:8px}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:12px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:0}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:4px}}.UUyEIq_appDetail{color:#fff;min-width:40%;padding:10px 50px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;display:none}.UUyEIq_appDetail h1{white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:100%;margin:0;font-size:34px;line-height:40px;overflow:hidden}.UUyEIq_appDetail h2{white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:100%;margin:0;font-size:20px;line-height:30px;overflow:hidden}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appDetail{flex-direction:column;align-items:flex-start;display:flex}}.DwKKSa_persistentRichCta{z-index:2147483348;background:#333;align-items:center;width:100%;height:120px;padding:10px;display:flex;position:fixed;top:0;left:0}.DwKKSa_persistentRichCta .DwKKSa_appIcon{cursor:pointer;border-radius:10px;width:90px;height:90px;display:block}.DwKKSa_persistentRichCta .DwKKSa_appInfo{flex-direction:column;flex:1;justify-content:space-around;height:100px;padding:0 15px;display:flex;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_appInfo h1{color:#fff;white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:90%;margin:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:17px;font-weight:600;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_appInfo p{color:#fff;white-space:nowrap;text-overflow:ellipsis;margin:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:600;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_persistentRichCtaBtn{cursor:pointer;text-align:center;color:#fff;white-space:nowrap;background:#179e2d;border:none;border-radius:24px;width:100%;height:36px;padding:8px 0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600;box-shadow:0 4px 4px rgba(0,0,0,.25)}.dalDea_persistentRichCtaScreenshots{z-index:2147483348;white-space:nowrap;background:#333;width:100%;min-height:190px;padding:17px 0;position:fixed;bottom:0;left:0;overflow-x:scroll;overflow-y:hidden;box-shadow:inset 0 3px 7px 2px rgba(0,0,0,.4)}.dalDea_persistentRichCtaScreenshots .dalDea_slide{height:100%;margin-left:.75em;display:inline-block}.dalDea_persistentRichCtaScreenshots img{cursor:pointer;object-fit:cover;border-radius:.75em;height:100%}.W6zMza_dialogBox{visibility:hidden;text-align:center;color:#565656;z-index:2147483647;background-color:rgba(0,0,0,.8);width:100%;height:100%;position:absolute;top:0;left:0}.W6zMza_dialog{text-align:center;width:288px;margin-top:0;padding:0;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}@media only screen and (max-height:20em){.W6zMza_dialog{width:200px}}.W6zMza_dialogContent{border-top-width:7px;border-top-color:#555fff;border-radius:15px;width:100%;position:relative;overflow:hidden}.W6zMza_dialogTitle{color:#fff;background-color:#555fff;padding:8px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600}@media only screen and (max-height:20em){.W6zMza_dialogTitle{font-size:1em}}.W6zMza_dialogBody{background-color:#fff;padding:0;overflow:hidden}.W6zMza_dialogText{text-align:center;margin:0 auto;padding:18px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;line-height:1.35em}@media only screen and (max-height:20em){.W6zMza_dialogText{padding:10px;font-size:.8em;line-height:1.25}}.W6zMza_dialogActions{background-color:#fff;width:100%;padding:0}.W6zMza_dialogActions button{text-align:center;background:0 0;border:none;width:100%;padding:8px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;text-decoration:none}@media only screen and (max-height:20em){.W6zMza_dialogActions button{font-size:.75rem}}@media screen and (orientation:landscape){.W6zMza_dialogActions{display:flex}}.eDiOmG_primaryButton{color:#fff;background-color:#555fff;padding:0}.eDiOmG_primaryButton button{text-transform:uppercase;color:#fff}@media screen and (orientation:landscape){.eDiOmG_primaryButton{flex:1}}.eDiOmG_secondaryButton{color:#555fff;background-color:#fff;padding:0}.eDiOmG_secondaryButton button{color:#555fff}@media screen and (orientation:landscape){.eDiOmG_secondaryButton{flex:1}}.eDiOmG_primaryButton button{justify-content:center;align-items:center;display:flex}.eDiOmG_continueIcon{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2236%22%20height%3D%2246%22%20style%3D%22shape-rendering%3Ageometricprecision%3Btext-rendering%3Ageometricprecision%3Bimage-rendering%3Aoptimizequality%3Bfill-rule%3Aevenodd%3Bclip-rule%3Aevenodd%22%3E%3Cpath%20fill%3D%22%23fefffe%22%20d%3D%22M35.5%2014.5v7q-5.098%2016.59-23%2015.5%204.538%203.446%202%208.5h-5Q5%2040-.5%2035.5v-5a133%20133%200%200%200%2010-9.5q7.75-2.25%205.5%205.5L12.5%2029q12.955%202.295%2016-10.5Q26.88%207.195%2015.5%207q-3.152-2.6-1-6%2016.18-2.067%2021%2013.5%22%20style%3D%22opacity%3A.849%22%2F%3E%3C%2Fsvg%3E) 50%/contain no-repeat;width:12px;height:12px;margin-left:6px;display:inline-block}._0zGmtq_watermark{z-index:200;background-color:#000;width:100vw;min-height:1px;font-size:1px;display:flex;position:absolute}._0zGmtq_watermark ._0zGmtq_leading._0zGmtq_bit{width:4vw}._0zGmtq_watermark ._0zGmtq_bit{flex-grow:0;width:1vw;height:1px}._0zGmtq_watermark ._0zGmtq_zero{height:1px}._0zGmtq_watermark ._0zGmtq_one{background-color:#050505;height:1px}.m2_mMq_privacyButton{cursor:pointer;z-index:2147483497;background:0 0;width:16px;padding:0;line-height:0;position:absolute;bottom:4px;left:4px}@media (min-width:48em){.m2_mMq_privacyButton{bottom:.8rem;left:.8rem}}.m2_mMq_privacyButton svg{width:100%;height:100%}@media only screen and (max-height:300px){.m2_mMq_privacyButton{width:13px;height:13px;left:2px}}@media only screen and (max-height:200px){.m2_mMq_privacyButton{width:12px;height:12px}}.FbTWOG_popupContainer.FbTWOG_popupContainerDisplay{z-index:2147483647;position:fixed;top:0;bottom:0;left:0;right:0}.FbTWOG_privacyPopup{z-index:2147483647;background:#fff;border-radius:15px 15px 0 0;padding:16px 16px 0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;transition:transform .2s ease-in-out;position:fixed;bottom:0;left:0;right:0}.FbTWOG_popupHeader{justify-content:space-between;display:flex}.FbTWOG_popupTitle{font-size:14px;font-weight:700}.FbTWOG_closeIcon{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2231%22%20height%3D%2231%22%20fill%3D%22none%22%3E%3Cg%20fill%3D%22%23000%22%20clip-path%3D%22url%28%27%23clip0_1168_1960%27%29%22%3E%3Cpath%20d%3D%22M27.12%2030.4c-.84%200-1.68-.32-2.32-.96L.96%205.61a3.295%203.295%200%200%201%200-4.65%203.295%203.295%200%200%201%204.65%200l23.83%2023.83a3.295%203.295%200%200%201%200%204.65c-.64.64-1.48.96-2.32.96%22%2F%3E%3Cpath%20d%3D%22M3.29%2030.4c-.84%200-1.68-.32-2.32-.96a3.295%203.295%200%200%201%200-4.65L24.79.96a3.295%203.295%200%200%201%204.65%200%203.295%203.295%200%200%201%200%204.65L5.61%2029.44c-.64.64-1.48.96-2.32.96%22%2F%3E%3C%2Fg%3E%3Cdefs%3E%3CclipPath%20id%3D%22clip0_1168_1960%22%3E%3Cpath%20fill%3D%22%23fff%22%20d%3D%22M0%200h30.4v30.4H0z%22%2F%3E%3C%2FclipPath%3E%3C%2Fdefs%3E%3C%2Fsvg%3E);background-repeat:no-repeat;background-size:100%;width:14px;height:14px;display:inline-block}.FbTWOG_readMore{color:#485099;padding:16px 0;font-size:16px;font-weight:700}.FbTWOG_ids{color:#bfbfbf;font-size:11px}.FbTWOG_ids.FbTWOG_hasEventMetadata{flex-wrap:wrap;padding:6px 0;display:flex}.FbTWOG_ids .FbTWOG_id{height:15px;display:flex}.FbTWOG_ids .FbTWOG_id:first-child{margin-right:1em}.FbTWOG_ids .FbTWOG_id .FbTWOG_idName{text-align:left;width:60px}.FbTWOG_ids .FbTWOG_id .FbTWOG_idContent{padding-left:4px}.FbTWOG_popupBody{padding-top:16px;font-size:14px}.FbTWOG_show{transform:translateY(0);box-shadow:0 -10px 20px -5px rgba(115,115,115,.75)}.FbTWOG_hide{transform:translateY(100%)}.FbTWOG_displayNone{display:none}.FbTWOG_mask{-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);background:rgba(255,255,255,.2);transition:all .5s;position:fixed;top:0;bottom:0;left:0;right:0}#gRz7DW_ad{width:100%;height:100%}
</style><script type="module">window.appVersion="5.15.0";</script><script type="module">window.Hls={isSupported:()=>!1,DefaultConfig:{loader:class{constructor(){}}}};</script><script src="mraid.js"></script><script type="module">function n(r,e){var s=t();return(n=function(r,n){return s[r-=143]})(r,e)}var r=n;function t(){var r=["undefined","303444inYQJd",'ipt src="replacements.js"></sc',"7213chHhdp","7mBWnvg","<scr","897366rgVoCQ","44iJuGgH","41079UpxDFu","2247664yxnDpZ","write","mraidExt","ript>","77OMQXem","584010DyCTIj","421595CqDrDG",'ipt src="vungle_mraid.js"></sc',"10njnkdM","8TySzmr"];return(t=function(){return r})()}!function(r){for(var t=n,e=r();;)try{if(parseInt(t(154))/1*(parseInt(t(158))/2)+-parseInt(t(159))/3*(-parseInt(t(150))/4)+parseInt(t(147))/5+parseInt(t(157))/6*(-parseInt(t(155))/7)+parseInt(t(160))/8+parseInt(t(146))/9*(-parseInt(t(149))/10)+parseInt(t(145))/11*(-parseInt(t(152))/12)==159889)break;e.push(e.shift())}catch(r){e.push(e.shift())}}(t),("undefined"==typeof vungle||typeof vungle[r(143)]===r(151))&&(document[r(161)](r(156)+r(148)+r(144)),document.write(r(156)+'ipt src="tokenmap.js"><\/script>'),document[r(161)](r(156)+r(153)+r(144)));</script><script type="module">var e=t;function n(){var e=["233320xaKEXL","1519032JREVyj","notifyPropertiesChange","10490PSChOO","270063ynCtMs","295981bVKbOX","Accept","hasOwnProperty","vungle","1263420fuAVmE","consentDenyButtonText","118nnSbiu","notifyReadyEvent","INCENTIVIZED","mraidBridge","consentTitleText","545USnEPa","osVersion","consentBodyText","1.0","fullscreen","forEach","keys"];return(n=function(){return e})()}function t(e,o){var r=n();return(t=function(e,n){return r[e-=234]})(e,o)}if(function(e){for(var n=t,o=e();;)try{if(parseInt(n(239))/1*(parseInt(n(234))/2)+parseInt(n(250))/3+parseInt(n(246))/4+parseInt(n(249))/5+-parseInt(n(255))/6+-parseInt(n(251))/7+parseInt(n(247))/8==119630)break;o.push(o.shift())}catch(e){o.push(o.shift())}}(n),"function"==typeof getVungleReplacementTokens){var o,r={OS:"os",OS_VERSION:e(240),SDK_VERSION:"sdkVersion",CONSENT_TITLE_TEXT:e(238),CONSENT_BODY_TEXT:e(241),CONSENT_ACCEPT_BUTTON_TEXT:"consentAcceptButtonText",CONSENT_DENY_BUTTON_TEXT:e(256)},s=getVungleReplacementTokens(),i=(o={},Object[e(245)](s).forEach((function(e){o[vungleTokenMap[e]]=s[e]})),o);window[e(254)][e(237)][e(235)](i);let n={isViewable:!0,placementType:e(243),version:e(242),consentAcceptButtonText:e(252),consentDenyButtonText:"Deny",consentBodyText:"Ads are personalized. Denying would disable it",consentTitleText:"Personalized Ads",supports:{sms:!1,storePicture:!1,inlineVideo:!1,calendar:!1,tel:!1},incentivized:i[e(253)]("INCENTIVIZED")&&"true"===i[e(236)].toLowerCase()};Object[e(245)](r)[e(244)]((function(t){i[e(253)](t)&&(n[r[t]]=i[t])})),window[e(254)][e(237)][e(248)](n)}</script></head><body>  <div id="dynamic"></div> <script type="module">
let e,t;var n=class extends Error{};class i{static getInstance(e){return this.instance||(this.instance=new i(e)),this.instance}bind(e,t){return this.bindings.set(e,t),this}get(e){if(!this.bindings.has(e))throw new n(`Could not find anything for key ${e}`);return this.bindings.get(e)}has(e){return this.bindings.has(e)}reset(){this.bindings.clear()}constructor(e=Date.now()){this.startTimestamp=e,this.bindings=new Map}}var r=i,a=class{},o=class extends a{get(e){return this.replacementTokens[e]}has(...e){return e.every(e=>e in this.replacementTokens)}some(...e){return e.some(e=>e in this.replacementTokens)}static getServiceIdentifier(){return"TokenServiceInterface"}getSeriesValues(e){var t,n,i,r;let a=this.getSeriesTokens(e),o=null!==(r=null===(i=window.vungle)||void 0===i?void 0:null===(n=i.mraidBridgeExt)||void 0===n?void 0:null===(t=n.getReplacementTokens)||void 0===t?void 0:t.call(n))&&void 0!==r?r:{};return a.map(e=>o[e])}getSeriesTokens(e){var t,n,i,r;let a=[],o=null!==(r=null===(i=window.vungle)||void 0===i?void 0:null===(n=i.mraidBridgeExt)||void 0===n?void 0:null===(t=n.getReplacementTokens)||void 0===t?void 0:t.call(n))&&void 0!==r?r:{},s=[];return Object.keys(o).filter(t=>t.startsWith(e)).forEach(t=>{let n=t.replace(e,"");/^\d+$/.test(n)?s.push(parseInt(n,10)):a.push(t)}),0===s.length||(s.sort((e,t)=>e-t),s.forEach(t=>a.push(`${e}${t}`))),a}constructor(e){super(),this.replacementTokens=null!=e?e:{}}},s=(e,t="default")=>{let n=e=>e.filter(e=>void 0!==e).flat();return{info:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"info",prefix:t,message:i,optionalParams:r}),console.info(...a)},warn:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"warn",prefix:t,message:i,optionalParams:r}),console.warn(...a)},error:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"error",prefix:t,message:i,optionalParams:r}),console.error(...a)}}},l=class extends a{getLogger(e="default"){return null==this.loggers[e]&&(this.loggers[e]=s(this,e)),this.loggers[e]}emit(e){e.fireOnlyOnce&&this.hasExistingEvent(e)||(this.addToActivity({type:"event",eventType:e.type,name:e.event,data:e.data}),this.invokeEventHandlers(e))}invokeEventHandlers(e){[...this.eventHandlers[e.type]||[],...this.eventHandlers["*"]||[]].forEach(t=>t(this,e))}addToActivity(e){this.activity.push({activity:e,timestamp:Date.now()})}getActivity(e){return e?this.activity.filter(t=>t.activity.type===e):this.activity}getActivityEvents(){return this.activity.filter(e=>"event"===e.activity.type).map(e=>e.activity)}getActivityLogs(){return this.activity.filter(e=>"log"===e.activity.type).map(e=>e.activity)}clearActivity(){this.activity.length=0}addEventHandler(e,t){this.eventHandlers[e]=this.eventHandlers[e]||[],this.eventHandlers[e].push(t)}removeEventHandler(e,t){null!=this.eventHandlers[e]&&(this.eventHandlers[e]=this.eventHandlers[e].filter(e=>e!==t))}getEventHandlers(e){return this.eventHandlers[e]||[]}static getServiceIdentifier(){return"ReportingServiceInterface"}constructor(...e){super(...e),this.loggers={},this.eventHandlers={},this.activity=[],this.hasExistingEvent=e=>this.activity.some(t=>"event"===t.activity.type&&t.activity.eventType===e.type&&t.activity.name===e.event)}};function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){var i;i=n[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})}return e}var c=((eA={})[eA.NotStarted=0]="NotStarted",eA[eA.Running=1]="Running",eA[eA.Stopped=2]="Stopped",eA);const u={type:"xstate.init"},E="xstate.assign";function _(e){return void 0===e?[]:[].concat(e)}function v(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function T(e){return t=>e===t}function S(e){return"string"==typeof e?{type:e}:e}function h(e,t,n){let i=t,r=!1;return[e.filter(e=>{if(e.type===E){r=!0;let t=d({},i);return"function"==typeof e.assignment?t=e.assignment(i,n):Object.keys(e.assignment).forEach(r=>{t[r]="function"==typeof e.assignment[r]?e.assignment[r](i,n):e.assignment[r]}),i=t,!1}return!0}),i,r]}const p=(e,t)=>e.actions.forEach(({exec:n})=>n&&n(e.context,t));function g(e){return{type:E,assignment:e}}var C=class extends a{createMachine(e,t){if(!(null==e?void 0:e.id))throw Error("State machine identifier is missing.");this.machineMap.has(e.id)||this.machineMap.set(e.id,{config:e,options:t,machine:function(e,t={}){let[n,i]=h(_(e.states[e.initial].entry).map(e=>v(e,t.actions)),e.context,u),r={config:e,_options:t,initialState:{value:e.initial,actions:n,context:i,matches:T(e.initial)},transition:(t,n)=>{let{value:i,context:a}="string"==typeof t?{value:t,context:e.context}:t,o=S(n),s=e.states[i];if(s.on){let t=_(s.on[o.type]);for(let n of("*"in s.on&&t.push(..._(s.on["*"])),t)){if(void 0===n)break;let{target:t,actions:l=[],cond:d=()=>!0}="string"==typeof n?{target:n}:n,c=void 0===t,u=null!=t?t:i,E=e.states[u];if(d(a,o)){let[e,n,d]=h((c?_(l):[].concat(s.exit,l,E.entry).filter(e=>e)).map(e=>v(e,r._options.actions)),a,o),u=null!=t?t:i;return{value:u,context:n,actions:e,changed:t!==i||e.length>0||d,matches:T(u)}}}}return{value:i,context:a,actions:[],changed:!1,matches:T(i)}}};return r}(e,t)});let n=this.machineMap.get(e.id);return null==n?void 0:n.machine}interpret(e){var t;if(!(null==e?void 0:null===(t=e.config)||void 0===t?void 0:t.id))throw Error("State machine is malformed.");return this.interpreterMap.has(e.config.id)||this.interpreterMap.set(e.config.id,function(e){let t=e.initialState,n=c.NotStarted,i=new Set,r={_machine:e,send:r=>{n===c.Running&&(p(t=e.transition(t,r),S(r)),i.forEach(e=>e(t)))},subscribe:e=>(i.add(e),e(t),{unsubscribe:()=>i.delete(e)}),start:i=>{if(i){let n="object"==typeof i?i:{context:e.config.context,value:i};t={value:n.value,actions:[],context:n.context,matches:T(n.value)}}else t=e.initialState;return n=c.Running,p(t,u),r},stop:()=>(n=c.Stopped,i.clear(),r),get state(){return t},get status(){return n}};return r}(e)),this.interpreterMap.get(e.config.id)}clear(e){e?(this.machineMap.delete(e),this.interpreterMap.delete(e)):(this.machineMap.clear(),this.interpreterMap.clear())}static getServiceIdentifier(){return"StateMachineServiceInterface"}constructor(){super(),this.machineMap=new Map,this.interpreterMap=new Map}};function O(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n.push.apply(n,i)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var A=()=>"m__LIFTOFF_GIT_COMMIT_HASH__",I=((eI={}).LOADING="loading",eI.DEFAULT="default",eI.EXPANDED="expanded",eI.RESIZED="resized",eI.HIDDEN="hidden",eI),f=(e=A())=>{var t,n,i,r,a,o,s,l;let c=null===(t=window[e])||void 0===t?void 0:t.mraid,u=null===(n=window[e])||void 0===n?void 0:n.mraidExt;return!c&&((null===(o=window.vungle)||void 0===o?void 0:o.mraid)?window[e]={mraid:d({},window.vungle.mraid)}:window.mraid&&(window[e]={mraid:d({},window.mraid)})),!u&&(null===(i=window.vungle)||void 0===i?void 0:i.mraidExt)&&(window[e]=O(d({},window[e]),{mraidExt:d({},window.vungle.mraidExt)})),window.mraid&&delete window.mraid,window.vungle&&(window.vungle.mraid&&delete window.vungle.mraid,window.vungle.mraidExt&&(window.vungle.mraidExt={getOS:null===(s=window.vungle.mraidExt)||void 0===s?void 0:s.getOS,getOSVersion:null===(l=window.vungle.mraidExt)||void 0===l?void 0:l.getOSVersion})),{mraid:null===(r=window[e])||void 0===r?void 0:r.mraid,mraidExt:null===(a=window[e])||void 0===a?void 0:a.mraidExt}},N=class extends a{init(){let{mraid:e,mraidExt:t}=f(),{mraidBridge:n,mraidBridgeExt:i}=function(){if(!window.vungle)return{mraidBridge:void 0,mraidBridgeExt:void 0};let{mraidBridge:e,mraidBridgeExt:t}=window.vungle;return{mraidBridge:e,mraidBridgeExt:t}}();this.mraid=e,this.mraidExt=t,this.mraidBridge=n,this.mraidBridgeExt=i,this.initialized=!0}checkInit(){this.initialized||this.init()}static getServiceIdentifier(){return"MraidServiceInterface"}getMraid(){return this.checkInit(),this.mraid}getMraidBridge(){return this.checkInit(),this.mraidBridge}getMraidBridgeExt(){return this.checkInit(),this.mraidBridgeExt}getMraidExt(){return this.checkInit(),this.mraidExt}constructor(){super(),this.initialized=!1,this.init()}},m=class{clearInterval(){this.id&&(window.clearInterval(this.id),this.id=void 0)}pause(){this.clearInterval()}start(){!this.intervalService.isPaused()&&(void 0!==this.id||this.isDestroyed()||(this.id=window.setInterval(()=>{this.callable()},this.interval)))}destroy(){this.clearInterval(),this.destroyed=!0}getId(){return this.id}isDestroyed(){return this.destroyed}constructor(e,t,n){this.interval=e,this.callable=t,this.intervalService=n,this.destroyed=!1}},D=class extends a{getNewInterval(e,t){let n=new m(e,t,this);return this.intervals.push(n),n}pauseAll(){this.paused=!0,this.intervals.forEach(e=>{e.pause()})}startAll(){this.paused=!1,this.intervals.forEach(e=>{e.start()})}destroyAll(){this.intervals.forEach(e=>{e.destroy()}),this.intervals=[]}isPaused(){return this.paused}static getServiceIdentifier(){return"IntervalServiceInterface"}constructor(e=!1){super(),this.paused=e,this.intervals=[]}},R=class{constructor(e,t){this.delay=e,this.callable=t,this.getId=()=>this.id,this.start=()=>!this.isDestroyed&&void 0===this.id&&(this.id=window.setTimeout(()=>{this.callable&&this.callable(),this.id=void 0,this.remainingTime=this.delay,this.promiseResolve&&this.promiseResolve(),this.destroy()},this.remainingTime),this.startTime=Date.now(),!0),this.pause=()=>{void 0!==this.id&&void 0!==this.startTime&&(clearTimeout(this.id),this.remainingTime-=Date.now()-this.startTime),this.startTime=void 0,this.id=void 0},this.destroy=()=>{void 0!==this.id&&(clearTimeout(this.id),this.id=void 0),this.isDestroyed=!0,this.promiseReject&&this.promiseReject(!1)},this.asPromise=()=>new Promise((e,t)=>{this.promiseResolve=e,this.promiseReject=t,this.isDestroyed?t(Error("The timer has been destroyed and cannot be started.")):this.start()}),this.remainingTime=e,this.isDestroyed=!1}},L=class extends a{destroyAll(){this.timers.forEach(e=>{e.destroy()})}getNewTimer(e,t){let n=new R(e,t);return this.timers.push(n),n}pauseAll(){this.timers.forEach(e=>{e.pause()})}standby(){0===this.stash.length&&this.timers.forEach(e=>{void 0!==e.getId()&&(e.pause(),this.stash.push(e))})}wake(){if(0===this.stash.length)return;let e=this.stash.pop();null==e||e.start(),this.wake()}startAll(){this.timers.forEach(e=>{e.start()})}static getServiceIdentifier(){return"TimerServiceInterface"}constructor(){super(),this.timers=[],this.stash=[]}},y=()=>{let e=r.getInstance(),t=N.getServiceIdentifier();return e.get(t)},P=((ef={}).UNKNOWN="unknown",ef.MREC="mrec",ef.FULLSCREEN="fullscreen",ef.BANNER="banner",ef.IN_LINE="in_line",ef),V=()=>{let e=r.getInstance(),t=o.getServiceIdentifier();return e.get(t)},w=((eN=w||{}).ADM_HTML="ADM_HTML",eN.ADVERTISER_DOMAIN="ADVERTISER_DOMAIN",eN.AD_EXPERIENCE="AD_EXPERIENCE",eN.AD_SOURCE="AD_SOURCE",eN.ALT_EC_0="ALT_EC_0",eN.APP_CONTENT_RATING="APP_CONTENT_RATING",eN.APP_DESCRIPTION="APP_DESCRIPTION",eN.APP_DESCRIPTION_ENCODED="APP_DESCRIPTION_ENCODED",eN.APP_DOWNLOAD_COUNT="APP_DOWNLOAD_COUNT",eN.APP_ICON="APP_ICON",eN.APP_INFO_POSITION="APP_INFO_POSITION",eN.APP_LONG_DESCRIPTION="APP_LONG_DESCRIPTION",eN.APP_LONG_DESCRIPTION_ENCODED="APP_LONG_DESCRIPTION_ENCODED",eN.APP_NAME="APP_NAME",eN.APP_NAME_ENCODED="APP_NAME_ENCODED",eN.APP_RATING="APP_RATING",eN.APP_RATING_COUNT="APP_RATING_COUNT",eN.APP_SCREENSHOTS="APP_SCREENSHOTS",eN.APP_STORE_ID="APP_STORE_ID",eN.APP_STORE_ON_ENDCARD_AUTO_DELAY="APP_STORE_ON_ENDCARD_AUTO_DELAY",eN.APP_STORE_ON_ENDCARD_CLOSE="APP_STORE_ON_ENDCARD_CLOSE",eN.APP_STORE_ON_FIRST_TRANSITION="APP_STORE_ON_FIRST_TRANSITION",eN.APP_STORE_ON_SECOND_TRANSITION="APP_STORE_ON_SECOND_TRANSITION",eN.APP_STORE_ON_VIDEO_AUTO_DELAY="APP_STORE_ON_VIDEO_AUTO_DELAY",eN.APP_STORE_ON_VIDEO_CLOSE="APP_STORE_ON_VIDEO_CLOSE",eN.APP_STORE_RATING="APP_STORE_RATING",eN.BLOCK_PERSISTENT_CTA="BLOCK_PERSISTENT_CTA",eN.CLOSE_BUTTON_DELAY_SECONDS="CLOSE_BUTTON_DELAY_SECONDS",eN.CLOSE_BUTTON_PADDING="CLOSE_BUTTON_PADDING",eN.CLOSE_BUTTON_SIZE="CLOSE_BUTTON_SIZE",eN.COUNTRY_CODE="COUNTRY_CODE",eN.CREATIVE_FORMAT="CREATIVE_FORMAT",eN.CREATIVE_FORMAT_VERSION="CREATIVE_FORMAT_VERSION",eN.CREATIVE_ID="CREATIVE_ID",eN.CTA_BUTTON_BACKGROUND="CTA_BUTTON_BACKGROUND",eN.CTA_BUTTON_ENCODED_TEXT="CTA_BUTTON_ENCODED_TEXT",eN.CTA_BUTTON_ICON="CTA_BUTTON_ICON",eN.CTA_BUTTON_POSITION="CTA_BUTTON_POSITION",eN.CTA_BUTTON_TEXT="CTA_BUTTON_TEXT",eN.CTA_BUTTON_URL="CTA_BUTTON_URL",eN.DOWNLOAD_BUTTON_DELAY_SECONDS="DOWNLOAD_BUTTON_DELAY_SECONDS",eN.DSA_REQUIRED="DSA_REQUIRED",eN.EC_CLOSE_BUTTON_DELAY_SECONDS="EC_CLOSE_BUTTON_DELAY_SECONDS",eN.EC_CTA_URL="EC_CTA_URL",eN.EC_HTML="EC_HTML",eN.EC_HTML_2="EC_HTML_2",eN.EC_HTML_COMPRESS="EC_HTML_COMPRESS",eN.EC_IMAGE="EC_IMAGE",eN.EC_IMAGE_2="EC_IMAGE_2",eN.EC_SKOVERLAY_DELAY_SECONDS="EC_SKOVERLAY_DELAY_SECONDS",eN.EC_SKOVERLAY_DISABLE_AUTO_MMP="EC_SKOVERLAY_DISABLE_AUTO_MMP",eN.ENDCARD_CLOSE_BUTTON_AS_SKIP="ENDCARD_CLOSE_BUTTON_AS_SKIP",eN.FULL_CTA="FULL_CTA",eN.FULL_CTA_OPTION="FULL_CTA_OPTION",eN.GLOBAL_TIMER="GLOBAL_TIMER",eN.GLOBAL_TIMER_FIRST_PAGE_SHOW_PERCENT="GLOBAL_TIMER_FIRST_PAGE_SHOW_PERCENT",eN.INCENTIVIZED="INCENTIVIZED",eN.INCENTIVIZED_BODY_TEXT="INCENTIVIZED_BODY_TEXT",eN.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS="INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS",eN.INCENTIVIZED_CLOSE_TEXT="INCENTIVIZED_CLOSE_TEXT",eN.INCENTIVIZED_CONTINUE_TEXT="INCENTIVIZED_CONTINUE_TEXT",eN.INCENTIVIZED_TITLE_TEXT="INCENTIVIZED_TITLE_TEXT",eN.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY="IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY",eN.IS_STAFF_DEVICE_BID="IS_STAFF_DEVICE_BID",eN.MAIN_MANIFEST="MAIN_MANIFEST",eN.MAIN_STREAM="MAIN_STREAM",eN.MAIN_VIDEO="MAIN_VIDEO",eN.MAX_AD_DURATION="MAX_AD_DURATION",eN.NAUTILUS_VERSION="NAUTILUS_VERSION",eN.OBSERVABILITY="OBSERVABILITY",eN.OBSERVED_EXPERIMENTS="OBSERVED_EXPERIMENTS",eN.OM_ENABLED="OM_ENABLED",eN.OM_SDK_DATA="OM_SDK_DATA",eN.ORIGINAL_VIDEO_URL="ORIGINAL_VIDEO_URL",eN.PLACEMENT_TYPE="PLACEMENT_TYPE",eN.PLATFORM="PLATFORM",eN.REAL_START_MUTED="REAL_START_MUTED",eN.SDK_VERSION="SDK_VERSION",eN.SESSION_ID="SESSION_ID",eN.SHOW_EC_CLOSE_BUTTON_COUNTDOWN="SHOW_EC_CLOSE_BUTTON_COUNTDOWN",eN.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN="SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN",eN.SKOVERLAY_AUTO="SKOVERLAY_AUTO",eN.SKOVERLAY_AUTO_CLOSE="SKOVERLAY_AUTO_CLOSE",eN.SKOVERLAY_DELAY_SECONDS="SKOVERLAY_DELAY_SECONDS",eN.SKOVERLAY_DISABLE_AUTO_MMP="SKOVERLAY_DISABLE_AUTO_MMP",eN.SKOVERLAY_DISMISSIBLE="SKOVERLAY_DISMISSIBLE",eN.SKOVERLAY_POSITION="SKOVERLAY_POSITION",eN.SK_CTA_ONLY="SK_CTA_ONLY",eN.SK_EC_CTA_ONLY="SK_EC_CTA_ONLY",eN.SK_FSC="SK_FSC",eN.START_MUTED="START_MUTED",eN.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS="STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS",eN.STREAM_CHUNK_0="STREAM_CHUNK_0",eN.TPAT_PROGRESS_EVENTS="TPAT_PROGRESS_EVENTS",eN.TRACK_0="TRACK_0",eN.USER_AGENT="USER_AGENT",eN.VIDEO_CLOSE_BUTTON_AS_SKIP="VIDEO_CLOSE_BUTTON_AS_SKIP",eN.VIDEO_ENDCARD_CLICK_SPLIT="VIDEO_ENDCARD_CLICK_SPLIT",eN.VIDEO_LOOPING="VIDEO_LOOPING",eN.VIDEO_PROGRESS_BAR="VIDEO_PROGRESS_BAR",eN.VIDEO_PROGRESS_BAR_COLOR="VIDEO_PROGRESS_BAR_COLOR",eN.VIDEO_SHOW_CTA="VIDEO_SHOW_CTA",eN.VUNGLE_PRIVACY_URL="VUNGLE_PRIVACY_URL",eN.VX_ENDCARD="VX_ENDCARD",eN.EC_HTML_PRELOAD="EC_HTML_PRELOAD",eN),b=((em=b||{})[em.ACCELERATE=0]="ACCELERATE",em[em.EDSP=1]="EDSP",em[em.UNKNOWN=2]="UNKNOWN",em),M=class extends a{static getServiceIdentifier(){return"PlacementTypeServiceInterface"}getPlacementType(){var e,t,n;let i=e=>{switch(e){case"banner":return P.BANNER;case"mrec":return P.MREC;case"fullscreen":return P.FULLSCREEN;case"in_line":return P.IN_LINE;default:return P.UNKNOWN}},r=i(null!==(t=null===(e=this.mraidService.getMraid())||void 0===e?void 0:e.getPlacementType())&&void 0!==t?t:"");return r!==P.UNKNOWN?r:i(null!==(n=this.tokenService.get(w.PLACEMENT_TYPE))&&void 0!==n?n:"")}isMrec(){return this.getPlacementType()===P.MREC}isBanner(){return this.getPlacementType()===P.BANNER}isFullscreen(){return this.getPlacementType()===P.FULLSCREEN}isInLine(){return this.getPlacementType()===P.IN_LINE}getAdSource(){var e;if(!this.tokenService.has(w.AD_SOURCE)||void 0===this.tokenService.get(w.AD_SOURCE))return b.UNKNOWN;switch(null===(e=this.tokenService.get(w.AD_SOURCE))||void 0===e?void 0:e.toLowerCase()){case"":return b.UNKNOWN;case"accelerate":return b.ACCELERATE;default:return b.EDSP}}constructor(e=V(),t=y()){super(),this.tokenService=e,this.mraidService=t}},k=class{isGreaterThan(e){return this.major!==e.major?this.major>e.major:this.minor!==e.minor?this.minor>e.minor:this.patch>e.patch}isLessThan(e){return e.isGreaterThan(this)}isEqualTo(e){return e.major===this.major&&e.minor===this.minor&&e.patch===this.patch}isGreaterThanOrEqualTo(e){return this.isEqualTo(e)||this.isGreaterThan(e)}isLessThanOrEqualTo(e){return this.isEqualTo(e)||this.isLessThan(e)}toString(){return[this.major,this.minor,this.patch].join(".")}constructor(e){if(this.semanticVersion=e,this.major=0,this.minor=0,this.patch=0,!e)return;let[t,n,i]=e.replace(/-.*/,"").replace(/[^\d.]+/g,"").split(".").map(e=>parseInt(e,10));t&&!Number.isNaN(t)&&(this.major=t),n&&!Number.isNaN(n)&&(this.minor=n),i&&!Number.isNaN(i)&&(this.patch=i)}},U=e=>decodeURIComponent(Array.prototype.map.call(atob(e),e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),B=((eD={}).iOS="iOS",eD.Android="Android",eD.Windows="Windows",eD.Amazon="Amazon",eD.Unknown="Unknown",eD),H=((eR={})[eR.LANDSCAPE=0]="LANDSCAPE",eR[eR.PORTRAIT=1]="PORTRAIT",eR[eR.UNKNOWN=2]="UNKNOWN",eR);class W extends a{static getServiceIdentifier(){return"EnvironmentServiceInterface"}getOperatingSystem(){var e,t,n,i;if(this.operatingSystem)return this.operatingSystem;let r=null===(n=this.mraidService)||void 0===n?void 0:null===(t=n.getMraidExt())||void 0===t?void 0:null===(e=t.getOS)||void 0===e?void 0:e.call(t);return r&&(this.operatingSystem=W.parseOperatingSystem(r),"Unknown"!==this.operatingSystem)||(this.operatingSystem=W.parseOperatingSystem(null!==(i=this.tokenService.get(w.PLATFORM))&&void 0!==i?i:"")),this.operatingSystem}static parseOperatingSystem(e){switch(e.trim().toLowerCase()){case"ios":return"iOS";case"android":return"Android";case"windows":return"Windows";case"amazon":return"Amazon";default:return"Unknown"}}getOsVersion(){var e,t;return this.osVersion||(this.osVersion=new k(null===(t=this.mraidService.getMraidExt())||void 0===t?void 0:null===(e=t.getOSVersion)||void 0===e?void 0:e.call(t))),this.osVersion}getSdkVersion(){var e,t;if(this.sdkVersion)return this.sdkVersion;let n=null===(t=this.mraidService.getMraidExt())||void 0===t?void 0:null===(e=t.getSDKVersion)||void 0===e?void 0:e.call(t);return(void 0===n||"0.0.0"===n)&&this.tokenService.has(w.SDK_VERSION)?this.sdkVersion=new k(this.tokenService.get(w.SDK_VERSION)):this.sdkVersion=new k(n),this.sdkVersion}getMraidVersion(){var e,t;return this.mraidVersion||(this.mraidVersion=new k(null===(t=this.mraidService.getMraidExt())||void 0===t?void 0:null===(e=t.getMraidVersion)||void 0===e?void 0:e.call(t))),this.mraidVersion}getBrowserVersion(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t?void 0:null===(e=t.browser)||void 0===e?void 0:e.version)&&void 0!==n?n:""}getBrowserName(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t?void 0:null===(e=t.browser)||void 0===e?void 0:e.name)&&void 0!==n?n:""}getDeviceModel(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t?void 0:null===(e=t.device)||void 0===e?void 0:e.model)&&void 0!==n?n:""}getDeviceType(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t?void 0:null===(e=t.device)||void 0===e?void 0:e.type)&&void 0!==n?n:""}getOrientation(){return window.outerHeight>window.outerWidth?1:window.outerHeight<window.outerWidth?0:2}getDeviceCountryCode(){var e;return null!==(e=this.tokenService.get(w.COUNTRY_CODE))&&void 0!==e?e:""}static isAffectedByStoreKitProductViewMaskIssue(e){if("iOS"!==e.getOperatingSystem())return!1;let t=e.getOsVersion();return t.isGreaterThanOrEqualTo(new k("17"))&&t.isLessThan(new k("17.1.1"))}constructor(e=V(),t=y()){super(),this.tokenService=e,this.mraidService=t;let n=e.get(w.USER_AGENT);if(!n)return;try{this.uaParserResult=JSON.parse(U(n))}catch(e){}}}W.sdkSeven=new k("7");var F=((eL={}).ERROR="error",eL.EVENT="event",eL.SIGNAL_EVENT="signal-event",eL),x=((ey={}).AD_CLOSE="ad-close",ey.AD_LOAD="ad-load",ey.AD_LOAD_COMPLETE="ad-load-complete",ey.AD_START="ad-start",ey.ALTERNATIVE_ENDCARD_CLICK="alternative-endcard-click",ey.ALTERNATIVE_VIEW="alternative-view",ey.APP_STORE_CLOSE="app-store-close",ey.APP_STORE_DURATION="app-store-duration",ey.APP_STORE_ON_FIRST_TRANSITION_COMPLETE="app-store-on-first-transition-complete",ey.APP_STORE_ON_FIRST_TRANSITION_DURATION="app-store-on-first-transition-duration",ey.APP_STORE_ON_FIRST_TRANSITION_START="app-store-on-first-transition-start",ey.APP_STORE_OPEN="app-store-open",ey.BANDWIDTH_ESTIMATION="bandwidth-estimation",ey.CLICK_OCCURRED="click-occurred",ey.NESTED_IFRAME_TYPE="nested-iframe-type",ey.CLOSE_BUTTON_VISIBLE="close-button-visible",ey.CTA="cta",ey.ENDCARD_CLICK="endcard-click",ey.ENDCARD_CLOSE="endcard-close",ey.ENDCARD_CLOSE_BUTTON_CLICK="endcard-close-button-click",ey.ENDCARD_CLOSE_BUTTON_DURATION="endcard-close-button-duration",ey.ENDCARD_CLOSE_BUTTON_SHOW="endcard-close-button-show",ey.ENDCARD_DURATION="endcard-duration",ey.ENDCARD_FIRST_CLICK="endcard-first-click",ey.ENDCARD_FIRST_CLICK_DURATION="endcard-first-click-duration",ey.ENDCARD_FIRST_CLICK_START="endcard-first-click-start",ey.ENDCARD_LOAD_COMPLETE="endcard-load-complete",ey.ENDCARD_LOAD_DURATION="endcard-load-duration",ey.ENDCARD_LOAD_START="endcard-load-start",ey.ENDCARD_SCENE_END="endcard-scene-end",ey.ENDCARD_START="endcard-start",ey.ERROR="error",ey.FIRST_INTERACTION_AFTER_VIDEO_PLAY_DURATION="first-interaction-after-video-play-duration",ey.FIRST_INTERACTION_ON_VIDEO_PAGE="first-interaction-on-video-page",ey.FORFEIT_REWARD="forfeit-reward",ey.FRUSTRATION_CLICKS="frustration-clicks",ey.GRANT_REWARD="grant-reward",ey.HLS_NOT_SUPPORTED="hls-not-supported",ey.INTERACTION_AFTER_CLOSE_BUTTON_VISIBLE="interaction-after-close-button-visible",ey.LAST_CHANCE_ENDCARD_CLOSE_BUTTON_CLICK="last-chance-endcard-close-button-click",ey.LAST_CHANCE_ENDCARD_CLOSE_BUTTON_SHOW="last-chance-endcard-close-button-show",ey.LAST_CHANCE_ENDCARD_CTA_BUTTON_CLICK="last-chance-endcard-cta-button-click",ey.LAST_CHANCE_ENDCARD_CTA_BUTTON_DURATION="last-chance-endcard-cta-button-duration",ey.LAST_CHANCE_ENDCARD_DURATION_START="last-chance-endcard-duration-start",ey.LAST_CHANCE_ENDCARD_DURATION_END="last-chance-endcard-duration-end",ey.LAST_CHANCE_ENDCARD_DURATION="last-chance-endcard-duration",ey.LAST_CHANCE_ENDCARD_END="last-chance-endcard-end",ey.LAST_CHANCE_ENDCARD_START="last-chance-endcard-start",ey.NEAR_CLOSE_BUTTON_CLICK="near-close-button-click",ey.NEAR_CLOSE_BUTTON_CLICK_COUNT="near-close-button-click-count",ey.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND="open-storekit-product-view-command",ey.PERSISTENT_CTA_BUTTON_CLICK="persistent-cta-button-click",ey.PERSISTENT_CTA_BUTTON_DURATION="persistent-cta-button-duration",ey.PERSISTENT_CTA_BUTTON_SHOW="persistent-cta-button-show",ey.PRELOAD_DURATION="preload-duration",ey.PRELOAD_END="preload-end",ey.PRELOAD_START="preload-start",ey.PRIVACY_CTA="privacy-cta",ey.PROXY_MRAID="proxy-mraid",ey.SCENE_START="scene-start",ey.SCENE_END="scene-end",ey.SIGNAL_TIMER_START="signal-timer-start",ey.STORE_KIT_OVERLAY="store-kit-overlay",ey.STORE_KIT_OVERLAY_PREPARE_ERROR="store-kit-overlay-prepare-error",ey.UNKNOWN_MRAID_COMMAND="unknown-mraid-command",ey.VIDEO_CLOSE_BUTTON_CLICK="video-close-button-click",ey.VIDEO_CLOSE_BUTTON_SHOW="video-close-button-show",ey.VIDEO_CLOSE="video-close",ey.VIDEO_DURATION="video-duration",ey.VIDEO_SCENE_END="video-scene-end",ey.VIDEO_SCENE_START="video-scene-start",ey.VIDEO_SKIP_TO_ENDCARD="video-skip-to-endcard",ey.VIDEO_START="video-start",ey.VIDEO_START_COMPLETE="video-start-complete",ey.VIDEO_START_DELAY="video-start-delay",ey.VIDEO_START_REQUEST="video-start-request",ey.VIDEO_START_SUCCESS="video-start-success",ey.WEB_VITALS_INTERACTION_TO_NEXT_PAINT="web-vitals-interaction-to-next-paint",ey.WEB_VITALS_FIRST_CONTENTFUL_PAINT="web-vitals-first-contentful-paint",ey.WEB_VITALS_LARGEST_CONTENTFUL_PAINT="web-vitals-largest-contentful-paint",ey.WEB_VITALS_TIME_TO_FIRST_BYTE="web-vitals-time-to-first-byte",ey),G=((eP={}).RESOURCE="resource",eP.PLAYABLE="playable",eP.TEMPLATE="template",eP),K=((eV={}).lastChanceEndcard="lastChanceEndcard",eV),Y=class{push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}isEmpty(){return 0===this.items.length}size(){return this.items.length}splice(e,t=1){return this.items.splice(e,t)}findIndex(e){return this.items.findIndex(e)}find(e){return this.items.find(e)}constructor(){this.items=[]}};const j=()=>[x.AD_CLOSE,x.AD_START,x.ALTERNATIVE_VIEW,x.CTA,x.ENDCARD_SCENE_END,x.ERROR,x.FRUSTRATION_CLICKS,x.GRANT_REWARD,x.HLS_NOT_SUPPORTED,x.INTERACTION_AFTER_CLOSE_BUTTON_VISIBLE,x.LAST_CHANCE_ENDCARD_END,x.NEAR_CLOSE_BUTTON_CLICK_COUNT,x.NEAR_CLOSE_BUTTON_CLICK_COUNT,x.STORE_KIT_OVERLAY_PREPARE_ERROR,x.PROXY_MRAID,x.SCENE_START,x.SCENE_END,x.SIGNAL_TIMER_START,x.UNKNOWN_MRAID_COMMAND,x.VIDEO_SCENE_END,x.VIDEO_SKIP_TO_ENDCARD,x.VIDEO_START,x.WEB_VITALS_FIRST_CONTENTFUL_PAINT,x.WEB_VITALS_INTERACTION_TO_NEXT_PAINT,x.WEB_VITALS_LARGEST_CONTENTFUL_PAINT,x.WEB_VITALS_TIME_TO_FIRST_BYTE],X=()=>[x.CLOSE_BUTTON_VISIBLE,x.ENDCARD_CLOSE_BUTTON_DURATION,x.ENDCARD_DURATION,x.ENDCARD_FIRST_CLICK_DURATION,x.ENDCARD_LOAD_DURATION,x.FIRST_INTERACTION_AFTER_VIDEO_PLAY_DURATION,x.INTERACTION_AFTER_CLOSE_BUTTON_VISIBLE,x.LAST_CHANCE_ENDCARD_CTA_BUTTON_DURATION,x.LAST_CHANCE_ENDCARD_DURATION,x.NEAR_CLOSE_BUTTON_CLICK_COUNT,x.PERSISTENT_CTA_BUTTON_DURATION,x.PRELOAD_DURATION,x.VIDEO_START_DELAY,x.VIDEO_DURATION];var z=()=>[[x.APP_STORE_OPEN,x.APP_STORE_CLOSE,x.APP_STORE_DURATION],[x.ENDCARD_START,x.ENDCARD_CLOSE,x.ENDCARD_DURATION],[x.VIDEO_CLOSE_BUTTON_SHOW,x.VIDEO_CLOSE_BUTTON_CLICK,x.CLOSE_BUTTON_VISIBLE],[x.ENDCARD_CLOSE_BUTTON_SHOW,x.ENDCARD_CLOSE_BUTTON_CLICK,x.CLOSE_BUTTON_VISIBLE],[x.LAST_CHANCE_ENDCARD_CLOSE_BUTTON_SHOW,x.LAST_CHANCE_ENDCARD_CLOSE_BUTTON_CLICK,x.CLOSE_BUTTON_VISIBLE],[x.LAST_CHANCE_ENDCARD_START,x.LAST_CHANCE_ENDCARD_CTA_BUTTON_CLICK,x.LAST_CHANCE_ENDCARD_CTA_BUTTON_DURATION],[x.LAST_CHANCE_ENDCARD_DURATION_START,x.LAST_CHANCE_ENDCARD_DURATION_END,x.LAST_CHANCE_ENDCARD_DURATION],[x.PERSISTENT_CTA_BUTTON_SHOW,x.PERSISTENT_CTA_BUTTON_CLICK,x.PERSISTENT_CTA_BUTTON_DURATION],[x.VIDEO_START_SUCCESS,x.FIRST_INTERACTION_ON_VIDEO_PAGE,x.FIRST_INTERACTION_AFTER_VIDEO_PLAY_DURATION],[x.ENDCARD_LOAD_START,x.ENDCARD_LOAD_COMPLETE,x.ENDCARD_LOAD_DURATION],[x.VIDEO_START_REQUEST,x.VIDEO_START_COMPLETE,x.VIDEO_START_DELAY],[x.APP_STORE_ON_FIRST_TRANSITION_START,x.APP_STORE_ON_FIRST_TRANSITION_COMPLETE,x.APP_STORE_ON_FIRST_TRANSITION_DURATION],[x.ENDCARD_FIRST_CLICK_START,x.ENDCARD_FIRST_CLICK,x.ENDCARD_FIRST_CLICK_DURATION],[x.VIDEO_SCENE_START,x.VIDEO_CLOSE,x.VIDEO_DURATION],[x.PRELOAD_START,x.PRELOAD_END,x.PRELOAD_DURATION]];const $="Unable to load img resource",q="video load fail after retry",Z="video load fail with no retry",Q="video does not play after 10s",J="video play fail after 30s",ee="video failed to play",et=[q,Z,Q,J,ee,$];var en=()=>{let e=r.getInstance(),t=W.getServiceIdentifier();return e.get(t)},ei=()=>{let e=r.getInstance(),t=M.getServiceIdentifier();return e.get(t)},er=(e,t)=>{let n=`context_${t}`;return r.getInstance().has(n)?{getValue:()=>r.getInstance().get(n),setValue:e=>{r.getInstance().bind(n,e)}}:(r.getInstance().bind(n,e),{getValue:()=>r.getInstance().get(n),setValue:e=>{r.getInstance().bind(n,e)}})};const ea=er({scene:void 0},"SceneContext");var eo=()=>{var e;return null===(e=ea.getValue())||void 0===e?void 0:e.scene},es=e=>{var t;return!!e&&(null==e?void 0:null===(t=e.trim())||void 0===t?void 0:t.toLowerCase())==="true"},el=(e=V())=>!!e.has(w.INCENTIVIZED)&&es(e.get(w.INCENTIVIZED)),ed=()=>{let e=r.getInstance(),t=l.getServiceIdentifier();return e.get(t)},ec=()=>ed(),eu=class extends a{static getServiceIdentifier(){return"ObservabilityServiceInterface"}init(e){this.observability=e(),this.isObserved=this.observability.isObserved()}pushError(e,t){var n;this.isObserved&&(null===(n=this.observability)||void 0===n||n.pushError(e,O(d({},t,this.getDefaultObservabilityData()),{elapsed:Date.now()-r.getInstance().startTimestamp,error_source:this.getErrorSource(e,t)})))}getDefaultObservabilityData(e=eo){var t,n,i,r,a,o,s,l,c;return d({ad_source:null!==(n=this.tokenService.get(w.AD_SOURCE))&&void 0!==n?n:"",advertiser_domain:null!==(i=this.tokenService.get(w.ADVERTISER_DOMAIN))&&void 0!==i?i:"",browser_name:this.environmentService.getBrowserName(),browser_version:this.environmentService.getBrowserVersion(),creative_format:null!==(r=this.tokenService.get(w.CREATIVE_FORMAT))&&void 0!==r?r:"",creative_format_version:null!==(a=this.tokenService.get(w.CREATIVE_FORMAT_VERSION))&&void 0!==a?a:"",creative_id:null!==(o=this.tokenService.get(w.CREATIVE_ID))&&void 0!==o?o:"",device_country_code:this.environmentService.getDeviceCountryCode(),device_model:this.environmentService.getDeviceModel(),device_type:this.environmentService.getDeviceType(),event_id:null!==(s=this.tokenService.get(w.SESSION_ID))&&void 0!==s?s:"",is_incentivized:el(this.tokenService),observed_experiments:null!==(l=this.tokenService.get(w.OBSERVED_EXPERIMENTS))&&void 0!==l?l:"",os_version:this.environmentService.getOsVersion().toString(),placement_type:this.placementTypeService.getPlacementType(),platform:this.environmentService.getOperatingSystem(),sdk_version:this.environmentService.getSdkVersion().toString(),template_version:null!==(c=window.appVersion)&&void 0!==c?c:"0.0.0"},null===(t=e())||void 0===t?void 0:t.getObservabilityData())}getAttributesData(e){var t;let n=Date.now()-r.getInstance().startTimestamp;return O(d({},e,this.getDefaultObservabilityData()),{elapsed:null!==(t=e.elapsed)&&void 0!==t?t:n})}updateEventTupleDataStack(e){let[t,n]=this.getAcceptTuple(e),i=this.getMatchingTuple(t);e.name===t&&(i?i[0].timestamp=Date.now():this.eventTupleDataStack.push([{name:t,timestamp:Date.now(),data:e}])),e.name===n&&i&&i.push({name:n,timestamp:Date.now(),data:e})}getAcceptTuple(e){return this.eventTuplesToAccept.find(t=>t.includes(e.name))}getMatchingTuple(e){return this.eventTupleDataStack.find(t=>t.some(t=>t.name===e))}deleteTupleFromDataStack(e){let t=this.eventTupleDataStack.findIndex(t=>t===e);this.eventTupleDataStack.splice(t)}pushOrCacheEvent(e,t){var n;if(X().includes(e)){this.pendingEvents[e]=t;return}null===(n=this.observability)||void 0===n||n.pushEvent(e,t)}pushTupleEvent(e){var t;let n=this.getAcceptTuple(e);if(!n)return;this.updateEventTupleDataStack(e);let[i,r,a]=n,o=null!==(t=this.getMatchingTuple(i))&&void 0!==t?t:[];if(e.name===r&&2===o.length){this.deleteTupleFromDataStack(o);let[t,n]=o,i=this.getAttributesData(O(d({},e),{name:a,duration:n.timestamp-t.timestamp}));this.pushOrCacheEvent(a,i)}}pushSingleEvent(e){let t=e.name,n=this.getAttributesData(e);this.pushOrCacheEvent(t,n)}pushEvent(e){if(this.isObserved){if(this.singleEventsToAccept.includes(e.name)){this.pushSingleEvent(e);return}this.pushTupleEvent(e)}}getPendingEventData(e,t){let n=this.pendingEvents[e];return t&&n?n.scene_id===t?n:void 0:n}getErrorSource(e,t){var n,i;let r=null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e,a=null!==(i=null==e?void 0:e.error_source)&&void 0!==i?i:G.TEMPLATE;return(null==t?void 0:t.errorSource)&&(a=t.errorSource),(et.includes(r)||/(Failed to load|Unable to load).*/i.test(r))&&(a=G.RESOURCE),a}constructor(e=V(),t=ei(),n=en(),i=y(),r=ec(),a=j(),o=z()){super(),this.tokenService=e,this.placementTypeService=t,this.environmentService=n,this.mraidService=i,this.errorLoggingReportingService=r,this.singleEventsToAccept=a,this.eventTuplesToAccept=o,this.isObserved=!1,this.eventTupleDataStack=new Y,this.pendingEvents={}}},eE=(e=V())=>el(e)&&e.has(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS)?Number(e.get(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS)):e.has(w.CLOSE_BUTTON_DELAY_SECONDS)?Number(e.get(w.CLOSE_BUTTON_DELAY_SECONDS)):0;const e_="scenes-key",ev="gdpr";var eT=(e=r.getInstance())=>e.get(e_),eS=((ew={}).closed="closed",ew.endcard="endcard",ew.gdpr="gdpr",ew.image="image",ew.video="video",ew),eh=((eb={})[eb.OFF=0]="OFF",eb[eb.SKO=1]="SKO",eb[eb.SKPV=2]="SKPV",eb[eb.STATIC_URL=3]="STATIC_URL",eb),ep=((eM={}).CLICK_THROUGH="clickThrough",eM.COMPLETE="complete",eM.CREATIVE_VIEW="creativeView",eM.FIRST_QUARTILE="firstQuartile",eM.MIDPOINT="midpoint",eM.START="start",eM.THIRD_QUARTILE="thirdQuartile",eM),eg=(e,t=ei(),n=eE())=>!!(t.isBanner()||t.isMrec()||t.isInLine())||!!n&&(9999===n||n>e);const eC="mute-button",eO="#555FFF";var eA,eI,ef,eN,em,eD,eR,eL,ey,eP,eV,ew,eb,eM,ek,eU,eB,eH,eW,eF,ex,eG,eK,eY,ej,eX=class extends a{static getServiceIdentifier(){return"GlobalTimerServiceInterface"}isEnabled(){let e=es(this.tokenService.get(w.GLOBAL_TIMER)),t=Number(this.tokenService.get(w.GLOBAL_TIMER_FIRST_PAGE_SHOW_PERCENT)),n=this.injectedGetScenes().some(e=>e.getSceneType()===eS.video),i=this.injectedGetScenes().some(e=>this.endcardTypes.includes(e.getSceneType()));return e&&t>=1&&t<=100&&n&&i}getTotalCloseButtonDelaySeconds(){let e=()=>{let e=this.tokenService.get(w.MAX_AD_DURATION);return void 0===e||"-1"===e?60:Number(e)},t=9999===eE(this.tokenService),n=()=>{var t,n,i,r,a;let o=e(),s=this.injectedGetScenes().find(e=>this.endcardTypes.includes(e.getSceneType())),l=[eS.endcard,eS.image].includes(null==s?void 0:null===(t=s.next)||void 0===t?void 0:t.getSceneType()),d=null==s?void 0:s.getLastChanceEndcardConfig().enabled;return l&&(o-=null!==(i=null==s?void 0:null===(n=s.next)||void 0===n?void 0:n.getCloseButtonConfig().delay)&&void 0!==i?i:0),d&&(o-=null!==(a=null==s?void 0:null===(r=s.getLastChanceEndcardConfig().close)||void 0===r?void 0:r.delay)&&void 0!==a?a:0),o>=0?o:0};return t?n():(()=>{var t,i;let r=e(),a=this.injectedGetScenes().find(e=>e.getSceneType()===eS.video),o=this.injectedGetScenes().find(e=>this.endcardTypes.includes(e.getSceneType())),s=(null!==(t=null==a?void 0:a.getCloseButtonConfig().delay)&&void 0!==t?t:0)+(null!==(i=null==o?void 0:o.getCloseButtonConfig().delay)&&void 0!==i?i:0);return s>=r?n():s})()}getVideoPageCloseButtonDelaySeconds(){let e=this.getTotalCloseButtonDelaySeconds();return Number(this.tokenService.get(w.GLOBAL_TIMER_FIRST_PAGE_SHOW_PERCENT))/100*e}hasReachedVideoPageCloseButtonDelaySeconds(){return this.totalDelaySecondsConsumed>=this.getVideoPageCloseButtonDelaySeconds()}setTotalDelaySecondsConsumed(e){this.totalDelaySecondsConsumed=e}isVideoSkipped(){return this.reportingService.getActivityEvents().filter(e=>e.type===F.EVENT&&"observability"===e.eventType&&e.data.name===x.VIDEO_SKIP_TO_ENDCARD).length>0}getEndcardPageCloseButtonDelaySeconds(){return this.isVideoSkipped()&&(this.totalDelaySecondsConsumed=this.getVideoPageCloseButtonDelaySeconds()),this.getTotalCloseButtonDelaySeconds()-this.totalDelaySecondsConsumed}constructor(e=V(),t=ed(),n=eT){super(),this.tokenService=e,this.reportingService=t,this.injectedGetScenes=n,this.totalDelaySecondsConsumed=0,this.endcardTypes=[eS.endcard,eS.image]}},ez=class extends a{isViewable(){var e;return this.viewableIsSet?this.viewable:!!(null===(e=this.mraidService.getMraid())||void 0===e?void 0:e.isViewable())}resetViewable(){this.viewable=!1,this.viewableIsSet=!1}setViewable(e){this.viewable=e,this.viewableIsSet=!0}static getServiceIdentifier(){return"ViewableServiceInterface"}constructor(e=y()){super(),this.mraidService=e,this.viewable=!1,this.viewableIsSet=!1}},e$={},eq=[],eZ=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,eQ=Array.isArray;function eJ(e,t){for(var n in t)e[n]=t[n];return e}function e0(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function e1(e,t,n,i,r){var a={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==r?++eB:r,__i:-1,__u:0};return null==r&&null!=eU.vnode&&eU.vnode(a),a}function e2(e){return e.children}function e3(e,t){this.props=e,this.context=t}function e5(e,t){if(null==t)return e.__?e5(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?e5(e):null}function e4(e){(!e.__d&&(e.__d=!0)&&eW.push(e)&&!e6.__r++||eF!==eU.debounceRendering)&&((eF=eU.debounceRendering)||ex)(e6)}function e6(){var e,t,n,i,r,a,o,s;for(eW.sort(eG);e=eW.shift();)e.__d&&(t=eW.length,i=void 0,a=(r=(n=e).__v).__e,o=[],s=[],n.__P&&((i=eJ({},r)).__v=r.__v+1,eU.vnode&&eU.vnode(i),tt(n.__P,i,r,n.__n,n.__P.namespaceURI,32&r.__u?[a]:null,o,null==a?e5(r):a,!!(32&r.__u),s),i.__v=r.__v,i.__.__k[i.__i]=i,tn(o,i,s),i.__e!=a&&function e(t){var n,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(i=t.__k[n])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return e(t)}}(i)),eW.length>t&&eW.sort(eG));e6.__r=0}function e8(e,t,n,i,r,a,o,s,l,d,c){var u,E,_,v,T,S=i&&i.__k||eq,h=t.length;for(n.__d=l,function(e,t,n){var i,r,a,o,s,l=t.length,d=n.length,c=d,u=0;for(e.__k=[],i=0;i<l;i++)null!=(r=t[i])&&"boolean"!=typeof r&&"function"!=typeof r?(o=i+u,(r=e.__k[i]="string"==typeof r||"number"==typeof r||"bigint"==typeof r||r.constructor==String?e1(null,r,null,null,null):eQ(r)?e1(e2,{children:r},null,null,null):void 0===r.constructor&&r.__b>0?e1(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=e,r.__b=e.__b+1,a=null,-1!==(s=r.__i=function(e,t,n,i){var r=e.key,a=e.type,o=n-1,s=n+1,l=t[n];if(null===l||l&&r==l.key&&a===l.type&&0==(131072&l.__u))return n;if(("function"!=typeof a||a===e2||r)&&i>(null!=l&&0==(131072&l.__u)?1:0))for(;o>=0||s<t.length;){if(o>=0){if((l=t[o])&&0==(131072&l.__u)&&r==l.key&&a===l.type)return o;o--}if(s<t.length){if((l=t[s])&&0==(131072&l.__u)&&r==l.key&&a===l.type)return s;s++}}return -1}(r,n,o,c))&&(c--,(a=n[s])&&(a.__u|=131072)),null==a||null===a.__v?(-1==s&&u--,"function"!=typeof r.type&&(r.__u|=65536)):s!==o&&(s==o-1?u--:s==o+1?u++:(s>o?u--:u++,r.__u|=65536))):r=e.__k[i]=null;if(c)for(i=0;i<d;i++)null!=(a=n[i])&&0==(131072&a.__u)&&(a.__e==e.__d&&(e.__d=e5(a)),function e(t,n,i){var r,a;if(eU.unmount&&eU.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||ti(r,null,n)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){eU.__e(e,n)}r.base=r.__P=null}if(r=t.__k)for(a=0;a<r.length;a++)r[a]&&e(r[a],n,i||"function"!=typeof t.type);i||e0(t.__e),t.__c=t.__=t.__e=t.__d=void 0}(a,a))}(n,t,S),l=n.__d,u=0;u<h;u++)null!=(_=n.__k[u])&&(E=-1===_.__i?e$:S[_.__i]||e$,_.__i=u,tt(e,_,E,r,a,o,s,l,d,c),v=_.__e,_.ref&&E.ref!=_.ref&&(E.ref&&ti(E.ref,null,_),c.push(_.ref,_.__c||v,_)),null==T&&null!=v&&(T=v),65536&_.__u||E.__k===_.__k?l=function e(t,n,i){var r,a;if("function"==typeof t.type){for(r=t.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=t,n=e(r[a],n,i));return n}t.__e!=n&&(n&&t.type&&!i.contains(n)&&(n=e5(t)),i.insertBefore(t.__e,n||null),n=t.__e);do n=n&&n.nextSibling;while(null!=n&&8===n.nodeType)return n}(_,l,e):"function"==typeof _.type&&void 0!==_.__d?l=_.__d:v&&(l=v.nextSibling),_.__d=void 0,_.__u&=-196609);n.__d=l,n.__e=T}function e7(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||eZ.test(t)?n:n+"px"}function e9(e,t,n,i,r){var a;e:if("style"===t){if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||e7(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||e7(e.style,t,n[t])}}else if("o"===t[0]&&"n"===t[1])a=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"index.1a69f0b8.js")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?i?n.u=i.u:(n.u=eK,e.addEventListener(t,a?ej:eY,a)):e.removeEventListener(t,a?ej:eY,a);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function te(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=eK++;else if(t.t<n.u)return;return eU.event&&(t=eU.event(t)),"handleEvent"in n?n.handleEvent(t):n(t)}}}function tt(e,t,n,i,r,a,o,s,l,d){var c,u,E,_,v,T,S,h,p,g,C,O,A,I,f,N,m=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),a=[s=t.__e=n.__e]),(c=eU.__b)&&c(t);e:if("function"==typeof m)try{if(h=t.props,p="prototype"in m&&m.prototype.render,g=(c=m.contextType)&&i[c.__c],C=c?g?g.props.value:c.__:i,n.__c?S=(u=t.__c=n.__c).__=u.__E:(p?t.__c=u=new m(h,C):(t.__c=u=new e3(h,C),u.constructor=m,u.render=tr),g&&g.sub(u),u.props=h,u.state||(u.state={}),u.context=C,u.__n=i,E=u.__d=!0,u.__h=[],u._sb=[]),p&&null==u.__s&&(u.__s=u.state),p&&null!=m.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=eJ({},u.__s)),eJ(u.__s,m.getDerivedStateFromProps(h,u.__s))),_=u.props,v=u.state,u.__v=t,E)p&&null==m.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),p&&null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(p&&null==m.getDerivedStateFromProps&&h!==_&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(h,C),!u.__e&&(null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(h,u.__s,C)||t.__v===n.__v)){for(t.__v!==n.__v&&(u.props=h,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(e){e&&(e.__=t)}),O=0;O<u._sb.length;O++)u.__h.push(u._sb[O]);u._sb=[],u.__h.length&&o.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(h,u.__s,C),p&&null!=u.componentDidUpdate&&u.__h.push(function(){u.componentDidUpdate(_,v,T)})}if(u.context=C,u.props=h,u.__P=e,u.__e=!1,A=eU.__r,I=0,p){for(u.state=u.__s,u.__d=!1,A&&A(t),c=u.render(u.props,u.state,u.context),f=0;f<u._sb.length;f++)u.__h.push(u._sb[f]);u._sb=[]}else do u.__d=!1,A&&A(t),c=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++I<25)u.state=u.__s,null!=u.getChildContext&&(i=eJ(eJ({},i),u.getChildContext())),p&&!E&&null!=u.getSnapshotBeforeUpdate&&(T=u.getSnapshotBeforeUpdate(_,v)),e8(e,eQ(N=null!=c&&c.type===e2&&null==c.key?c.props.children:c)?N:[N],t,n,i,r,a,o,s,l,d),u.base=t.__e,t.__u&=-161,u.__h.length&&o.push(u),S&&(u.__E=u.__=null)}catch(e){if(t.__v=null,l||null!=a){for(t.__u|=l?160:128;s&&8===s.nodeType&&s.nextSibling;)s=s.nextSibling;a[a.indexOf(s)]=null,t.__e=s}else t.__e=n.__e,t.__k=n.__k;eU.__e(e,t,n)}else null==a&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,i,r,a,o,s,l){var d,c,u,E,_,v,T,S=n.props,h=t.props,p=t.type;if("svg"===p?r="http://www.w3.org/2000/svg":"math"===p?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=a){for(d=0;d<a.length;d++)if((_=a[d])&&"setAttribute"in _==!!p&&(p?_.localName===p:3===_.nodeType)){e=_,a[d]=null;break}}if(null==e){if(null===p)return document.createTextNode(h);e=document.createElementNS(r,p,h.is&&h),s&&(eU.__m&&eU.__m(t,a),s=!1),a=null}if(null===p)S===h||s&&e.data===h||(e.data=h);else{if(a=a&&ek.call(e.childNodes),S=n.props||e$,!s&&null!=a)for(S={},d=0;d<e.attributes.length;d++)S[(_=e.attributes[d]).name]=_.value;for(d in S)if(_=S[d],"children"==d);else if("dangerouslySetInnerHTML"==d)u=_;else if(!(d in h)){if("value"==d&&"defaultValue"in h||"checked"==d&&"defaultChecked"in h)continue;e9(e,d,null,_,r)}for(d in h)_=h[d],"children"==d?E=_:"dangerouslySetInnerHTML"==d?c=_:"value"==d?v=_:"checked"==d?T=_:s&&"function"!=typeof _||S[d]===_||e9(e,d,_,S[d],r);if(c)s||u&&(c.__html===u.__html||c.__html===e.innerHTML)||(e.innerHTML=c.__html),t.__k=[];else if(u&&(e.innerHTML=""),e8(e,eQ(E)?E:[E],t,n,i,"foreignObject"===p?"http://www.w3.org/1999/xhtml":r,a,o,a?a[0]:n.__k&&e5(n,0),s,l),null!=a)for(d=a.length;d--;)e0(a[d]);s||(d="value","progress"===p&&null==v?e.removeAttribute("value"):void 0===v||v===e[d]&&("progress"!==p||v)&&("option"!==p||v===S[d])||e9(e,d,v,S[d],r),d="checked",void 0!==T&&T!==e[d]&&e9(e,d,T,S[d],r))}return e}(n.__e,t,n,i,r,a,o,l,d);(c=eU.diffed)&&c(t)}function tn(e,t,n){t.__d=void 0;for(var i=0;i<n.length;i++)ti(n[i],n[++i],n[++i]);eU.__c&&eU.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){eU.__e(e,t.__v)}})}function ti(e,t,n){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==t||(e.__u=e(t))}else e.current=t}catch(e){eU.__e(e,n)}}function tr(e,t,n){return this.constructor(e,n)}ek=eq.slice,eU={__e:function(e,t,n,i){for(var r,a,o;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&null!=a.getDerivedStateFromError&&(r.setState(a.getDerivedStateFromError(e)),o=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,i||{}),o=r.__d),o)return r.__E=r}catch(t){e=t}throw e}},eB=0,eH=function(e){return null!=e&&null==e.constructor},e3.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=eJ({},this.state),"function"==typeof e&&(e=e(eJ({},n),this.props)),e&&eJ(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),e4(this))},e3.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),e4(this))},e3.prototype.render=e2,eW=[],ex="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,eG=function(e,t){return e.__v.__b-t.__v.__b},e6.__r=0,eK=0,eY=te(!1),ej=te(!0);var ta,to,ts,tl,td=0,tc=[],tu=eU,tE=tu.__b,t_=tu.__r,tv=tu.diffed,tT=tu.__c,tS=tu.unmount,th=tu.__;function tp(e,t){tu.__h&&tu.__h(to,e,td||t),td=0;var n=to.__H||(to.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function tg(e,t){var n=tp(ta++,3);!tu.__s&&tm(n.__H,t)&&(n.__=e,n.i=t,to.__H.__h.push(n))}function tC(e){return td=5,tO(function(){return{current:e}},[])}function tO(e,t){var n=tp(ta++,7);return tm(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function tA(){for(var e;e=tc.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(tf),e.__H.__h.forEach(tN),e.__H.__h=[]}catch(t){e.__H.__h=[],tu.__e(t,e.__v)}}tu.__b=function(e){to=null,tE&&tE(e)},tu.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),th&&th(e,t)},tu.__r=function(e){t_&&t_(e),ta=0;var t=(to=e.__c).__H;t&&(ts===to?(t.__h=[],to.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0})):(t.__h.forEach(tf),t.__h.forEach(tN),t.__h=[],ta=0)),ts=to},tu.diffed=function(e){tv&&tv(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==tc.push(t)&&tl===tu.requestAnimationFrame||((tl=tu.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(i),tI&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);tI&&(t=requestAnimationFrame(n))})(tA)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.i=void 0})),ts=to=null},tu.__c=function(e,t){t.some(function(e){try{e.__h.forEach(tf),e.__h=e.__h.filter(function(e){return!e.__||tN(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],tu.__e(n,e.__v)}}),tT&&tT(e,t)},tu.unmount=function(e){tS&&tS(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{tf(e)}catch(e){t=e}}),n.__H=void 0,t&&tu.__e(t,n.__v))};var tI="function"==typeof requestAnimationFrame;function tf(e){var t=to,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),to=t}function tN(e){var t=to;e.__c=e.__(),to=t}function tm(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function tD(e,t){return"function"==typeof t?t(e):t}var tR=Symbol.for("preact-signals");function tL(){if(tV>1)tV--;else{for(var e,t=!1;void 0!==tP;){var n=tP;for(tP=void 0,tw++;void 0!==n;){var i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&tB(n))try{n.c()}catch(n){t||(e=n,t=!0)}n=i}}if(tw=0,tV--,t)throw e}}var ty=void 0,tP=void 0,tV=0,tw=0,tb=0;function tM(e){if(void 0!==ty){var t=e.n;if(void 0===t||t.t!==ty)return t={i:0,S:e,p:ty.s,n:void 0,t:ty,e:void 0,x:void 0,r:t},void 0!==ty.s&&(ty.s.n=t),ty.s=t,e.n=t,32&ty.f&&e.S(t),t;if(-1===t.i)return t.i=0,void 0!==t.n&&(t.n.p=t.p,void 0!==t.p&&(t.p.n=t.n),t.p=ty.s,t.n=void 0,ty.s.n=t,ty.s=t),t}}function tk(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}function tU(e){return new tk(e)}function tB(e){for(var t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function tH(e){for(var t=e.s;void 0!==t;t=t.n){var n=t.S.n;if(void 0!==n&&(t.r=n),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function tW(e){for(var t=e.s,n=void 0;void 0!==t;){var i=t.p;-1===t.i?(t.S.U(t),void 0!==i&&(i.n=t.n),void 0!==t.n&&(t.n.p=i)):n=t,t.S.n=t.r,void 0!==t.r&&(t.r=void 0),t=i}e.s=n}function tF(e){tk.call(this,void 0),this.x=e,this.s=void 0,this.g=tb-1,this.f=4}function tx(e){var t=e.u;if(e.u=void 0,"function"==typeof t){tV++;var n=ty;ty=void 0;try{t()}catch(t){throw e.f&=-2,e.f|=8,tG(e),t}finally{ty=n,tL()}}}function tG(e){for(var t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,tx(e)}function tK(e){if(ty!==this)throw Error("Out-of-order effect");tW(this),ty=e,this.f&=-2,8&this.f&&tG(this),tL()}function tY(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}function tj(e){var t=new tY(e);try{t.c()}catch(e){throw t.d(),e}return t.d.bind(t)}function tX(e,t){eU[e]=t.bind(null,eU[e]||function(){})}function tz(e){_w&&_w(),_w=e&&e.S()}function t$(e){var t=this,n=e.data,i=tq(n);i.value=n;var r=tO(function(){for(var e=t.__v;e=e.__;)if(e.__c){e.__c.__$f|=4;break}return t.__$u.c=function(){var e;eH(r.peek())||3!==(null==(e=t.base)?void 0:e.nodeType)?(t.__$f|=1,t.setState({})):t.base.data=r.peek()},new tF(function(){var e=i.value.value;return 0===e?0:!0===e?"":e||""})},[]);return r.value}function tq(e){return tO(function(){return tU(e)},[])}function tZ(e){var t=tC(e);t.current=e,tg(function(){return tj(function(){return t.current()})},[])}tk.prototype.brand=tR,tk.prototype.h=function(){return!0},tk.prototype.S=function(e){this.t!==e&&void 0===e.e&&(e.x=this.t,void 0!==this.t&&(this.t.e=e),this.t=e)},tk.prototype.U=function(e){if(void 0!==this.t){var t=e.e,n=e.x;void 0!==t&&(t.x=n,e.e=void 0),void 0!==n&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}},tk.prototype.subscribe=function(e){var t=this;return tj(function(){var n=t.value,i=ty;ty=void 0;try{e(n)}finally{ty=i}})},tk.prototype.valueOf=function(){return this.value},tk.prototype.toString=function(){return this.value+""},tk.prototype.toJSON=function(){return this.value},tk.prototype.peek=function(){var e=ty;ty=void 0;try{return this.value}finally{ty=e}},Object.defineProperty(tk.prototype,"value",{get:function(){var e=tM(this);return void 0!==e&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(tw>100)throw Error("Cycle detected");this.v=e,this.i++,tb++,tV++;try{for(var t=this.t;void 0!==t;t=t.x)t.t.N()}finally{tL()}}}}),(tF.prototype=new tk).h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===tb))return!0;if(this.g=tb,this.f|=1,this.i>0&&!tB(this))return this.f&=-2,!0;var e=ty;try{tH(this),ty=this;var t=this.x();(16&this.f||this.v!==t||0===this.i)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return ty=e,tW(this),this.f&=-2,!0},tF.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t)}tk.prototype.S.call(this,e)},tF.prototype.U=function(e){if(void 0!==this.t&&(tk.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t)}},tF.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;void 0!==e;e=e.x)e.t.N()}},Object.defineProperty(tF.prototype,"value",{get:function(){if(1&this.f)throw Error("Cycle detected");var e=tM(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),tY.prototype.c=function(){var e=this.S();try{if(8&this.f||void 0===this.x)return;var t=this.x();"function"==typeof t&&(this.u=t)}finally{e()}},tY.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,tx(this),tH(this),tV++;var e=ty;return ty=this,tK.bind(this,e)},tY.prototype.N=function(){2&this.f||(this.f|=2,this.o=tP,tP=this)},tY.prototype.d=function(){this.f|=8,1&this.f||tG(this)},t$.displayName="_st",Object.defineProperties(tk.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:t$},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),tX("__b",function(e,t){if("string"==typeof t.type){var n,i=t.props;for(var r in i)if("children"!==r){var a=i[r];a instanceof tk&&(n||(t.__np=n={}),n[r]=a,i[r]=a.peek())}}e(t)}),tX("__r",function(e,t){tz();var n,i,r=t.__c;r&&(r.__$f&=-2,void 0===(i=r.__$u))&&(r.__$u=(tj(function(){n=this}),n.c=function(){r.__$f|=1,r.setState({})},i=n)),tz(i),e(t)}),tX("__e",function(e,t,n,i){tz(),e(t,n,i)}),tX("diffed",function(e,t){if(tz(),"string"==typeof t.type&&(n=t.__e)){var n,i=t.__np,r=t.props;if(i){var a=n.U;if(a)for(var o in a){var s=a[o];void 0===s||o in i||(s.d(),a[o]=void 0)}else n.U=a={};for(var l in i){var d=a[l],c=i[l];void 0===d?(d=function(e,t,n,i){var r=t in e&&void 0===e.ownerSVGElement,a=tU(n);return{o:function(e,t){a.value=e,i=t},d:tj(function(){var n=a.value.value;i[t]!==n&&(i[t]=n,r?e[t]=n:n?e.setAttribute(t,n):e.removeAttribute(t))})}}(n,l,c,r),a[l]=d):d.o(c,r)}}}e(t)}),tX("unmount",function(e,t){if("string"==typeof t.type){var n=t.__e;if(n){var i=n.U;if(i)for(var r in n.U=void 0,i){var a=i[r];a&&a.d()}}}else{var o=t.__c;if(o){var s=o.__$u;s&&(o.__$u=void 0,s.d())}}e(t)}),tX("__h",function(e,t,n,i){(i<3||9===i)&&(t.__$f|=2),e(t,n,i)}),e3.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u;if(!(n&&void 0!==n.s||4&this.__$f)||3&this.__$f)return!0;for(var i in t)return!0;for(var r in e)if("__source"!==r&&e[r]!==this.props[r])return!0;for(var a in this.props)if(!(a in e))return!0;return!1};var tQ=class extends a{setMutedSignal(e){this.mutedSignal.value=e}getMutedSignal(){return this.mutedSignal}isMuted(){return this.mutedSignal.value}mute(){this.setMutedSignal(!0)}unmute(){this.setMutedSignal(!1)}static getServiceIdentifier(){return"MuteServiceInterface"}constructor(){super(),this.mutedSignal=tU(!1)}},tJ=()=>{let e=r.getInstance(),t=C.getServiceIdentifier();return e.get(t)},t0="html",t1=e=>(null!=e?e:tJ()).interpreterMap.get(t0),t2=((ES={}).SHOW="SHOW",ES.PRELOAD="PRELOAD",ES.CANCEL_PRELOAD="CANCEL_PRELOAD",ES),t3=((Eh={}).SHOWING="SHOWING",Eh.PRELOADING="PRELOADING",Eh.INITIAL="INITIAL",Eh),t5=((Ep={}).INITIALIZE_PRELOAD="initializePreload",Ep.EMIT_SHOW="emitShow",Ep.TRIGGER_VIEWABLE_CHANGE="triggerViewableChange",Ep.FLUSH_MRAID_EVENTS="flushMraidEvents",Ep.CANCEL_PRELOAD="cancelPreload",Ep),t4=((Eg=t4||{}).MUTE_SOUND="muteSound",Eg.UN_MUTE_SOUND="unMuteSound",Eg.EMIT_MUTED="emitMuted",Eg.EMIT_VIDEO_ERROR="emitVideoError",Eg.CLOSE_VIDEO="closeVideo",Eg.CLOSE_VIDEO_CURRENT_SCENE="closeVideoCurrentScene",Eg.PAUSE_VIDEO="pauseVideo",Eg.PLAY_VIDEO="playVideo",Eg.POSTROLL_VIEW="postrollView",Eg.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE="sendEventVideoSkipToNextScene",Eg),t6=((EC={}).CLOSE_BUTTON_MOUNT="CLOSE_BUTTON_MOUNT",EC.CLOSE_BUTTON_UNMOUNT="CLOSE_BUTTON_UNMOUNT",EC.CLOSE_BUTTON_CLICK="CLOSE_BUTTON_CLICK",EC.CLOSE_BUTTON_WILL_SHOW="CLOSE_BUTTON_WILL_SHOW",EC.COMPLETE="COMPLETE",EC.LAST_CHANCE_ENDCARD="LAST_CHANCE_ENDCARD",EC.LAST_CHANCE_ENDCARD_CLOSE="LAST_CHANCE_ENDCARD_CLOSE",EC.MUTE="MUTE",EC.NEXT="NEXT",EC.PRIVACY_LOGO_SHOW="PRIVACY_LOGO_SHOW",EC.PRIVACY_LOGO_HIDE="PRIVACY_LOGO_HIDE",EC.PRIVACY_BOTTOM_DRAWER_OPEN="PRIVACY_BOTTOM_DRAWER_OPEN",EC.PRIVACY_BOTTOM_DRAWER_CLOSE="PRIVACY_BOTTOM_DRAWER_CLOSE",EC.PRODUCT_VIEW_CLOSE="PRODUCT_VIEW_CLOSE",EC.OPEN_PRIVACY_PAGE="OPEN_PRIVACY_PAGE",EC.UNMUTE="UNMUTE",EC.VIDEO_ERROR="VIDEO_ERROR",EC.VIDEO_FAILURE="VIDEO_FAILURE",EC.CLOSE="CLOSE",EC.CREATIVE_VIEW="CREATIVE_VIEW",EC),t8=class{getObservabilityData(){return{}}getTransitions(){return this.transitions}addTransition(e){return this.transitions.push(e),this}addOrUpdateTransition(e){let t=this.getTransitions().find(t=>t.name===e.name);if(t){t.scene=e.scene,t.cond=e.cond;let n={};t.actions.forEach(e=>{n[e.name]=!0});let i=e.actions.filter(e=>!n[e.name]);t.actions.push(...i)}else this.addTransition(e);return this}getEntryActions(){return this.entryActions}addEntryAction(e){return this.entryActions.push(e),this}getExitActions(){return this.exitActions}addExitAction(e){return this.exitActions.push(e),this}isAlternative(){return this.alternative}getEventStreams(){return{}}static getInstances(){return[]}constructor(){this.transitions=[],this.entryActions=[],this.exitActions=[],this.alternative=!1}},t7=()=>{let e=r.getInstance(),t=D.getServiceIdentifier();return e.get(t)},t9=((EO={}).PAUSE_INTERVALS="pauseAllIntervals",EO.START_INTERVALS="startAllIntervals",EO),ne=e=>({pauseAllIntervals:()=>{(e||t7()).pauseAll()},startAllIntervals:()=>{(e||t7()).startAll()}}),nt=()=>{let e=r.getInstance(),t=L.getServiceIdentifier();return e.get(t)},nn=((EA={}).STANDBY_TIMERS="standbyTimers",EA.WAKE_TIMERS="wakeTimers",EA),ni=e=>({standbyTimers:()=>{(e||nt()).standby()},wakeTimers:()=>{(e||nt()).wake()}}),nr=((EI=nr||{}).OPEN_PRIVACY_URL="openPrivacyUrl",EI.SET_PRIVACY_BUTTON_VISIBLE="setPrivacyButtonVisible",EI.SET_PRIVACY_BUTTON_HIDDEN="setPrivacyButtonHidden",EI.SET_PRIVACY_DRAWER_OPEN="setPrivacyDrawerOpen",EI.SET_PRIVACY_DRAWER_CLOSED="setPrivacyDrawerClosed",EI.TRIGGER_VIEWABLE_CHANGE="triggerViewableChange",EI),na=((Ef={}).CLOSE="CLOSE",Ef.FINISH="FINISH",Ef.INTERRUPT="INTERRUPT",Ef.SET_ERROR="SET_ERROR",Ef.SET_PREPARED="SET_PREPARED",Ef.READY="READY",Ef.RESUME="RESUME",Ef.SET_DISPLAY_OPTIONS="SET_DISPLAY_OPTIONS",Ef.SET_FALLBACK="SET_FALLBACK",Ef.SET_VISIBLE="SET_VISIBLE",Ef.SHOW="SHOW",Ef.START_DELAY_SHOW="START_DELAY_SHOW",Ef.START_IMMEDIATE_SHOW="START_IMMEDIATE_SHOW",Ef),no=((EN={}).CLOSING="CLOSING",EN.ERROR="ERROR",EN.DELAY_SHOW="DELAY_SHOW",EN.DELAY_SHOW_IMMEDIATE="DELAY_SHOW_IMMEDIATE",EN.DELAY_SHOW_INTERRUPTED="DELAY_SHOW_INTERRUPTED",EN.DELAY_SHOW_VISIBLE="DELAY_SHOW_VISIBLE",EN.FALLBACK="FALLBACK",EN.IDLE="IDLE",EN.INITIAL="INITIAL",EN.IMMEDIATE_SHOW="IMMEDIATE_SHOW",EN.IMMEDIATE_SHOW_VISIBLE="IMMEDIATE_SHOW_VISIBLE",EN.PREPARING="PREPARING",EN),ns=((Em={}).ASSIGN_DISPLAY_OPTIONS="ASSIGN_DISPLAY_OPTIONS",Em.ASSIGN_FALLBACK="ASSIGN_FALLBACK",Em.CLOSE_SKO="CLOSE_SKO",Em.EMIT_OBSERVABILITY_EVENT="EMIT_OBSERVABILITY_EVENT",Em.SHOW_FALLBACK="SHOW_FALLBACK",Em.SHOW_SKO="SHOW_SKO",Em);const nl=new k("6.4"),nd=new k("6"),nc=(e=en())=>e.getSdkVersion().isGreaterThanOrEqualTo(nl),nu=(e=en())=>e.getOperatingSystem()===B.iOS&&e.getOsVersion().isGreaterThanOrEqualTo(nd);var nE=(e=en())=>nc(e)&&nu(e),n_=((ED={}).SKPV="SKPV",ED.APP_STORE="APP_STORE",ED.OFF="OFF",ED),nv=(e=en())=>{let t="APP_STORE";return nE(e)&&(t="SKPV"),t},nT=class extends a{canOpen(){return[no.IDLE,no.FALLBACK].some(e=>this.interpreter.state.matches(e))}close(){this.interpreter.send({type:na.CLOSE})}fallback(){this.interpreter.state.context.fallback!==n_.OFF&&(this.interpreter.send({type:na.SET_FALLBACK}),this.open())}finish(){this.interpreter.send({type:na.FINISH})}init(){}interrupt(){this.interpreter.send({type:na.INTERRUPT})}isIdle(){var e;return null!==(e=this.interpreter.state.matches(no.IDLE))&&void 0!==e&&e}isInterrupted(){return[no.CLOSING,no.DELAY_SHOW_INTERRUPTED].some(e=>this.interpreter.state.matches(e))}isOpen(){return[no.DELAY_SHOW,no.DELAY_SHOW_IMMEDIATE,no.DELAY_SHOW_VISIBLE,no.IMMEDIATE_SHOW,no.IMMEDIATE_SHOW_VISIBLE].some(e=>this.interpreter.state.matches(e))}open(e){let t={type:na.START_IMMEDIATE_SHOW,fallback:null==e?void 0:e.fallback};(null==e?void 0:e.delayed)&&(t.type=this.interpreter.state.matches(no.DELAY_SHOW)?na.SHOW:na.START_DELAY_SHOW),this.interpreter.send(t)}resume(){this.interpreter.send({type:na.RESUME})}setDisplayOptions(e){this.interpreter.send({type:na.SET_DISPLAY_OPTIONS,displayOptions:e})}subscribe(e){return this.interpreter.subscribe(e)}static getServiceIdentifier(){return"StoreKitOverlayServiceInterface"}constructor(e,t={},n=tJ()){super(),this.machineConfig=e,this.machineOptions=t,this.stateMachineService=n;let i=this.stateMachineService.createMachine(this.machineConfig,this.machineOptions);this.interpreter=this.stateMachineService.interpret(i),this.interpreter.start()}},nS=()=>{let e=r.getInstance(),t=nT.getServiceIdentifier();if(e.has(t))return e.get(t)},nh=((ER={}).CLOSE_OVERLAY_VIEW="closeOverlayView",ER.INTERRUPT_OVERLAY_VIEW="interruptOverlayView",ER.RESUME_OVERLAY_VIEW="resumeOverlayView",ER.SHOW_OVERLAY_VIEW="showOverlayView",ER),np=(e=nS)=>({closeOverlayView:()=>{let t=e();(null==t?void 0:t.isOpen())&&(null==t||t.close())},interruptOverlayView:()=>{let t=e();(null==t?void 0:t.isOpen())&&(null==t||t.interrupt())},resumeOverlayView:()=>{let t=e();(null==t?void 0:t.isInterrupted())&&(null==t||t.resume())},showOverlayView:()=>{let t=e();null!=t&&t.isOpen()||((null==t?void 0:t.isInterrupted())?null==t||t.resume():null==t||t.open())}}),ng=()=>ed();const nC=(e,t=["name"],n=ng())=>n.getActivityEvents().filter(n=>n.type===F.EVENT&&"observability"===n.eventType&&t.every(t=>{var i;return(null===(i=n.data)||void 0===i?void 0:i[t])===e[t]})).length;var nO=(e,t=Number.MAX_SAFE_INTEGER,n=["name"],i=ng())=>{t!==Number.MAX_SAFE_INTEGER&&nC(e,n,i)>=t||i.emit({type:"observability",event:F.EVENT,data:e})},nA=((EL=nA||{}).START="start",EL.STOP="stop",EL),nI=()=>ed(),nf=((Ey=nf||{}).MINIMIZED="minimized",Ey.MAXIMIZED="maximized",Ey),nN=(e,t=ed())=>{let n,i;let r=t.getActivity(),a=r.filter(e=>"event"===e.activity.type&&"viewability"===e.activity.eventType),o=r.filter(e=>"event"===e.activity.type&&"observability"===e.activity.eventType),s=[];a.forEach(e=>{let t=e.activity;t.name===nf.MINIMIZED?n=e:t.name===nf.MAXIMIZED&&n&&(s.push([n,e]),n=null)});let l=0;s.forEach(e=>{l+=e[1].timestamp-e[0].timestamp});let d=[];o.forEach(e=>{var t,n;let r=e.activity;(null===(t=r.data)||void 0===t?void 0:t.name)===x.APP_STORE_OPEN?i=e:(null===(n=r.data)||void 0===n?void 0:n.name)===x.APP_STORE_CLOSE&&i&&(d.push([i,e]),i=null)});let c=0;return d.forEach(e=>{c+=e[1].timestamp-e[0].timestamp}),Date.now()-e-l+c},nm=((EP=nm||{}).CLOSE_AD="CLOSE_AD",EP),nD=()=>{let e=r.getInstance(),t=eu.getServiceIdentifier();return e.get(t)},nR=((EV=nR||{}).RESOURCE="resource",EV.EXCEPTION="exception",EV.UNHANDLEDREJECTION="unhandledrejection",EV.PLAYABLE="playable",EV),nL=((Ew={}).IMAGE="img",Ew.VIDEO="video",Ew),ny=((Eb={}).NESTED_IFRAME_WITH_CORS="cors",Eb.NESTED_IFRAME_WITHOUT_CORS="basic",Eb);const nP=e=>{let t=ed().getActivityEvents().filter(t=>{var n,i;return t.type===F.EVENT&&"observability"===t.eventType&&(null===(n=t.data)||void 0===n?void 0:n.name)===x.NESTED_IFRAME_TYPE&&(null===(i=t.data)||void 0===i?void 0:i.scene_id)===e}).map(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.nested_iframe_type});return t.includes(ny.NESTED_IFRAME_WITH_CORS)?ny.NESTED_IFRAME_WITH_CORS:t.includes(ny.NESTED_IFRAME_WITHOUT_CORS)?ny.NESTED_IFRAME_WITHOUT_CORS:""},nV=e=>ed().getActivityEvents().filter(t=>{var n,i;return t.type===F.EVENT&&"observability"===t.eventType&&(null===(n=t.data)||void 0===n?void 0:n.name)===x.CLICK_OCCURRED&&(null===(i=t.data)||void 0===i?void 0:i.scene_id)===e}).length,nw=e=>ed().getActivityEvents().filter(t=>{var n;return t.type===F.EVENT&&"error-logging"===t.eventType&&t.name===nR.PLAYABLE&&(null===(n=t.data)||void 0===n?void 0:n.scene_id)===e}).length,nb=(e="video_0")=>{var t,n;return null===(n=ed().getActivityEvents().filter(t=>{var n,i;return t.type===F.EVENT&&"observability"===t.eventType&&(null===(n=t.data)||void 0===n?void 0:n.name)===x.BANDWIDTH_ESTIMATION&&(null===(i=t.data)||void 0===i?void 0:i.scene_id)===e}).pop())||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.bwe},nM=(e,t)=>{var n,i,r,a,o;return{near_click_count_after_close_button_appears:null===(n=t.getPendingEventData(x.NEAR_CLOSE_BUTTON_CLICK_COUNT,e))||void 0===n?void 0:n.after_close_button_appears,near_click_count_before_close_button_appears:null===(i=t.getPendingEventData(x.NEAR_CLOSE_BUTTON_CLICK_COUNT,e))||void 0===i?void 0:i.before_close_button_appears,near_close_button_clicks:null===(r=t.getPendingEventData(x.NEAR_CLOSE_BUTTON_CLICK_COUNT,e))||void 0===r?void 0:r.coordinates,close_button_idle_time:null===(a=t.getPendingEventData(x.CLOSE_BUTTON_VISIBLE,e))||void 0===a?void 0:a.duration,interaction_after_close_button_visible:!!(null===(o=t.getPendingEventData(x.INTERACTION_AFTER_CLOSE_BUTTON_VISIBLE,e))||void 0===o?void 0:o.value)}},nk=(e,t,n,i)=>{var r,a,o,s;n(O(d({name:x.VIDEO_SCENE_END,scene_id:e,scene_type:t},nM(e,i)),{duration:null===(r=i.getPendingEventData(x.VIDEO_DURATION))||void 0===r?void 0:r.duration,first_click_after_video_play:null===(a=i.getPendingEventData(x.FIRST_INTERACTION_AFTER_VIDEO_PLAY_DURATION))||void 0===a?void 0:a.duration,video_load_duration:null===(o=i.getPendingEventData(x.VIDEO_START_DELAY))||void 0===o?void 0:o.duration,persistent_cta_duration:null===(s=i.getPendingEventData(x.PERSISTENT_CTA_BUTTON_DURATION))||void 0===s?void 0:s.duration,video_click_count:nV(e),bwe:nb(e)}),1,["name","scene_id"])},nU=(e,t,n,i)=>{var r,a,o;n(O(d({name:x.ENDCARD_SCENE_END,scene_id:e,scene_type:t},nM(e,i)),{duration:null===(r=i.getPendingEventData(x.ENDCARD_DURATION,e))||void 0===r?void 0:r.duration,iframe:nP(e),endcard_load_duration:null===(a=i.getPendingEventData(x.ENDCARD_LOAD_DURATION,e))||void 0===a?void 0:a.duration,endcard_click_count:nV(e),endcard_error_count:nw(e),endcard_first_click:null===(o=i.getPendingEventData(x.ENDCARD_FIRST_CLICK_DURATION,e))||void 0===o?void 0:o.duration}),1,["name","scene_id"])},nB=(e=nO,t=nD())=>{var n,i;let r=K.lastChanceEndcard,a=K.lastChanceEndcard;e(O(d({name:x.LAST_CHANCE_ENDCARD_END,scene_id:r,scene_type:a},nM(r,t)),{duration:null===(n=t.getPendingEventData(x.LAST_CHANCE_ENDCARD_DURATION))||void 0===n?void 0:n.duration,last_chance_endcard_clicked:0!==nV(r),last_chance_endcard_cta_button_duration:null===(i=t.getPendingEventData(x.LAST_CHANCE_ENDCARD_CTA_BUTTON_DURATION))||void 0===i?void 0:i.duration}),1,["name","scene_id"])};var nH=(e,t,n=nO,i=nD())=>{t===eS.video&&nk(e,t,n,i),t===eS.endcard&&nU(e,t,n,i),t===K.lastChanceEndcard&&nB(n,i)},nW=((EM=nW||{}).PAUSE="pause",EM.PLAY="play",EM.MUTE="mute",EM.UNMUTE="unmute",EM.PROGRESS="progress",EM.ERROR="error",EM.CLOSE="close",EM.ENDED="ended",EM.DURATION_CHANGE="durationchange",EM.WAITING="waiting",EM.SUSPEND="suspend",EM.TIME_UPDATE="timeupdate",EM.CAN_PLAY_THROUGH="canplaythrough",EM),nF=class extends a{findObservabilityActivityEvent(e){return t=>{var n;if("eventType"in t.activity&&"observability"===t.activity.eventType&&(null===(n=t.activity.data)||void 0===n?void 0:n.name)===e)return t.activity}}getAdStartTime(){let e=this.reportingService.getActivity().find(this.findObservabilityActivityEvent(x.AD_START));if(e)return new Date(e.timestamp)}getVideoEnd(){var e;let t=this.reportingService.getActivityEvents().find(e=>"video"===e.eventType&&e.name===nW.CLOSE);if(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.maximumViewingTime)return Math.floor(1e3*t.data.maximumViewingTime)}getEndcardInteractions(){var e;let t=this.reportingService.getActivityEvents().find(e=>{var t,n;return"observability"===e.eventType&&(null===(t=e.data)||void 0===t?void 0:t.name)===x.ENDCARD_SCENE_END&&(null===(n=e.data)||void 0===n?void 0:n.scene_id)==="endcard_0"});return null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.endcard_click_count}getEndcardDuration(){var e;let t=this.reportingService.getActivityEvents().find(e=>{var t,n;return"observability"===e.eventType&&(null===(t=e.data)||void 0===t?void 0:t.name)===x.ENDCARD_SCENE_END&&(null===(n=e.data)||void 0===n?void 0:n.scene_id)==="endcard_0"});return null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.duration}getVideoCloseShown(){let e=this.reportingService.getActivity(),t=e.find(this.findObservabilityActivityEvent(x.VIDEO_START)),n=e.find(this.findObservabilityActivityEvent(x.VIDEO_CLOSE_BUTTON_SHOW));if(t&&n)return n.timestamp-t.timestamp}getEndcardCloseShown(){let e=this.reportingService.getActivity(),t=e.find(this.findObservabilityActivityEvent(x.ENDCARD_START)),n=e.find(this.findObservabilityActivityEvent(x.ENDCARD_CLOSE_BUTTON_SHOW));if(t&&n)return n.timestamp-t.timestamp}getEndcardInteractionsAfterCloseButton(){return this.reportingService.getActivityEvents().filter(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.name)===x.INTERACTION_AFTER_CLOSE_BUTTON_VISIBLE}).length}addRecord(){var e,t,n;let i={eventId:null!==(e=this.tokenService.get(w.SESSION_ID))&&void 0!==e?e:"",creativeId:null!==(t=this.tokenService.get(w.CREATIVE_ID))&&void 0!==t?t:"",adSource:this.tokenService.get(w.AD_SOURCE),placementType:this.placementTypeService.getPlacementType(),time:this.getAdStartTime(),videoUrl:null!==(n=this.tokenService.get(w.ORIGINAL_VIDEO_URL))&&void 0!==n?n:this.tokenService.get(w.MAIN_STREAM),videoStart:0,videoEnd:this.getVideoEnd(),endcardInteractions:this.getEndcardInteractions(),endcardDuration:this.getEndcardDuration(),videoCloseShown:this.getVideoCloseShown(),endcardCloseShown:this.getEndcardCloseShown(),endcardInteractionsAfterCloseButton:this.getEndcardInteractionsAfterCloseButton(),rewarded:this.rewarded,createDate:Date.now(),averageBandwidth:this.injectedGetVideoStreamAverageBandwidth()};return this.indexedDatabaseService.addRecord(i)}getAllRecords(){return this.indexedDatabaseService.getAllRecords()}clearStore(){this.indexedDatabaseService.clearStore()}deleteExpiredRecords(){return this.indexedDatabaseService.deleteExpiredRecords()}static getIndexedDatabaseConfig(){return{storeName:"userActivity",keyPath:"eventId",expiry:90}}static getServiceIdentifier(){return"UserActivityServiceInterface"}constructor(e,t=V(),n=nI(),i=nb,r=ei(),a=el(t)){super(),this.indexedDatabaseService=e,this.tokenService=t,this.reportingService=n,this.placementTypeService=r,this.rewarded=a,this.injectedGetVideoStreamAverageBandwidth=i}},nx=()=>{let e=r.getInstance();if(e.has(nF.getServiceIdentifier()))return e.get(nF.getServiceIdentifier())},nG=(e=nt(),t=nI(),n=r.getInstance().startTimestamp,i=nO,a=nx)=>{var o;e.destroyAll(),t.emit({type:"heartbeat",event:nA.STOP}),i({name:x.AD_CLOSE,ad_duration:nN(n,t)},void 0,void 0,t),null===(o=a())||void 0===o||o.addRecord(),t.emit({type:"close",event:nm.CLOSE_AD,fireOnlyOnce:!0})},nK=((Ek={}).CLOSE="CLOSE",Ek.OPEN="OPEN",Ek.PREPARE_FINISHED="PREPARE_FINISHED",Ek.PREPARE_SUCCESS="PREPARE_SUCCESS",Ek.READY="READY",Ek.SET_FALLBACK="SET_FALLBACK",Ek),nY=((EU={}).FALLBACK="FALLBACK",EU.HIDDEN="HIDDEN",EU.INITIAL="INITIAL",EU.PREPARING="PREPARING",EU.SHOWING="SHOWING",EU.DONE="DONE",EU),nj=class extends a{isDone(){var e,t;return null!==(t=null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(nY.DONE))&&void 0!==t&&t}canOpen(){var e,t,n;return null!==(n=(null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(nY.HIDDEN))||(null===(t=this.interpreter)||void 0===t?void 0:t.state.matches(nY.FALLBACK)))&&void 0!==n&&n}close(){var e;null===(e=this.interpreter)||void 0===e||e.send({type:nK.CLOSE})}fallback(){}init(){}isOpen(){var e,t;return null!==(t=null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(nY.SHOWING))&&void 0!==t&&t}open(e){var t;this.hasFallback=e,null===(t=this.interpreter)||void 0===t||t.send({type:nK.OPEN})}subscribe(e){var t;return null===(t=this.interpreter)||void 0===t?void 0:t.subscribe(e)}static getServiceIdentifier(){return"ProductViewServiceInterface"}constructor(e,t={},n=tJ()){super(),this.machineConfig=e,this.machineOptions=t,this.stateMachineService=n;let i=this.stateMachineService.createMachine(this.machineConfig,this.machineOptions);this.interpreter=this.stateMachineService.interpret(i),this.interpreter.start()}},nX=()=>{let e=r.getInstance(),t=nj.getServiceIdentifier();if(e.has(t))return e.get(t)},nz=(e=en())=>e.getSdkVersion().isLessThan(new k("7"))&&e.getOrientation()===H.LANDSCAPE;const n$=new k("14"),nq=new k("6.8.1"),nZ=(e=en())=>e.getOperatingSystem()===B.iOS&&e.getOsVersion().isGreaterThanOrEqualTo(n$),nQ=(e=en())=>e.getSdkVersion().isGreaterThanOrEqualTo(nq);var nJ=(e=en(),t=ei())=>nZ(e)&&nQ(e)&&!(t.isMrec()||t.isBanner()||t.isInLine()),n0=((EB={}).SHOW_PRODUCT_VIEW="showProductView",EB.HIDE_PRODUCT_VIEW="hideProductView",EB.END_AD_ON_PRODUCT_VIEW_CLOSE="endAdOnProductViewClose",EB.EMIT_TRANSITION_OPEN_OBSERVABILITY_EVENT="emitTransitionOpenObservabilityEvent",EB);const n1=()=>({showProductView:()=>{if(nz()&&nJ()){let e=nS();(null==e?void 0:e.canOpen())&&e.open({fallback:n_.OFF});return}let e=nX();null==e||e.open(!1)},hideProductView:()=>{},endAdOnProductViewClose:()=>{en().getSdkVersion().isEqualTo(W.sdkSeven)&&nE()&&ed().addEventHandler("viewability",(e,t)=>{t.event===nf.MAXIMIZED&&nG()})},emitTransitionOpenObservabilityEvent:()=>{nO({name:x.APP_STORE_ON_FIRST_TRANSITION_START})}});var n2=()=>nE()?n1():void 0,n3=((EH=n3||{})[EH.CLOSE=0]="CLOSE",EH[EH.SKIP=1]="SKIP",EH),n5=((EW={}).SET_CLOSE_BUTTON_VISIBLE="setCloseButtonVisible",EW.EMIT_CLOSE_BUTTON_SHOW="emitCloseButtonShow",EW.EMIT_CLOSE_BUTTON_CLICK="emitCloseButtonClick",EW.SET_CLOSE_BUTTON_HIDDEN="setCloseButtonHidden",EW),n4=n3;const n6={name:t6.PRIVACY_LOGO_SHOW,actions:[{name:nr.SET_PRIVACY_BUTTON_VISIBLE}]},n8={name:t6.PRIVACY_LOGO_HIDE,actions:[{name:nr.SET_PRIVACY_BUTTON_HIDDEN}]},n7=e=>({name:t6.PRIVACY_BOTTOM_DRAWER_OPEN,actions:e?[{name:nr.SET_PRIVACY_DRAWER_OPEN},{name:nr.TRIGGER_VIEWABLE_CHANGE},{name:t4.PAUSE_VIDEO},{name:t9.PAUSE_INTERVALS},{name:nn.STANDBY_TIMERS},{name:nh.INTERRUPT_OVERLAY_VIEW}]:[{name:nr.OPEN_PRIVACY_URL}]}),n9={name:t6.PRIVACY_BOTTOM_DRAWER_CLOSE,actions:[{name:t4.PLAY_VIDEO},{name:nr.SET_PRIVACY_DRAWER_CLOSED},{name:nr.TRIGGER_VIEWABLE_CHANGE},{name:t9.START_INTERVALS},{name:nn.WAKE_TIMERS},{name:nh.RESUME_OVERLAY_VIEW}]},ie={name:t6.OPEN_PRIVACY_PAGE,actions:[{name:nr.OPEN_PRIVACY_URL}]},it={name:t6.PRODUCT_VIEW_CLOSE,actions:[{name:n0.END_AD_ON_PRODUCT_VIEW_CLOSE}]},ii={name:t6.CLOSE_BUTTON_MOUNT,actions:[{name:n5.SET_CLOSE_BUTTON_VISIBLE}]},ir={name:t6.CLOSE_BUTTON_UNMOUNT,actions:[{name:n5.SET_CLOSE_BUTTON_HIDDEN}]},ia={name:t6.CLOSE_BUTTON_CLICK,actions:[{name:n5.EMIT_CLOSE_BUTTON_CLICK}]},io={name:t6.CLOSE_BUTTON_WILL_SHOW,actions:[{name:n5.EMIT_CLOSE_BUTTON_SHOW}]};var is=function(e){return!!e&&"function"==typeof e.getLastChanceEndcardConfig},il=class extends t8{getTransitions(){return super.getTransitions().concat(n8,n6,n7(this.isFullscreen),n9,ie)}isLastPage(){var e;return(!is(this)||!this.getLastChanceEndcardConfig().enabled)&&(null===(e=this.next)||void 0===e?void 0:e.getSceneType())===eS.closed}constructor({isFullscreen:e}){super(),this.isFullscreen=e}};const id={name:t6.MUTE,actions:[{name:t4.MUTE_SOUND},{name:t4.EMIT_MUTED}]},ic={name:t6.UNMUTE,actions:[{name:t4.UN_MUTE_SOUND},{name:t4.EMIT_MUTED}]},iu={name:t6.VIDEO_ERROR,actions:[{name:t4.EMIT_VIDEO_ERROR}]};var iE=((EF=iE||{}).OFF="off",EF.SKO="overlay_view",EF.SKP="product_view",EF.DEFAULT="default",EF),i_=e=>{switch(e){case"off":return eh.OFF;case"overlay_view":return eh.SKO;default:return eh.SKPV}},iv=class{getFullScreenClickConfig(){return{enabled:(()=>{if(this.placementType!==P.FULLSCREEN)return!0;let e=this.skOverlayAutoTokenValue,t=this.fullCtaOptionTokenValue,n=this.fullCtaTokenValue;return"fsc_off"!==t&&("true"===e||"true"===n)})(),id:this.id,target:[P.BANNER,P.MREC].includes(this.placementType)?eh.SKPV:i_(this.skFullCtaTokenValue)}}constructor({skOverlayAutoTokenValue:e,fullCtaOptionTokenValue:t,fullCtaTokenValue:n,skFullCtaTokenValue:i,id:r,placementType:a}){this.skOverlayAutoTokenValue=e,this.fullCtaOptionTokenValue=t,this.fullCtaTokenValue=n,this.skFullCtaTokenValue=i,this.id=r,this.placementType=a}},iT=((Ex=iT||{}).CHECKPOINT_0="checkpoint.0",Ex.CHECKPOINT_100="checkpoint.100",Ex.CHECKPOINT_25="checkpoint.25",Ex.CHECKPOINT_50="checkpoint.50",Ex.CHECKPOINT_75="checkpoint.75",Ex.CLICK_URL="clickUrl",Ex.POSTROLL_CLICK="postroll.click",Ex.POSTROLL_VIEW="postroll.view",Ex.VIDEO_CLOSE="video.close",Ex.VIDEO_MUTE="video.mute",Ex.VIDEO_UNMUTE="video.unmute",Ex.ASOI_INTERACTION="download.ASOIInteraction",Ex.ASOI_COMPLETE="download.ASOIComplete",Ex.REWARD_GRANTED="rewardGranted",Ex),iS=()=>ed(),ih=(e,t=!1,n)=>{let i=iS(),r={type:"tpat",event:e};t&&(r.fireOnlyOnce=!0),n&&(r.data=n),i.emit(r)},ip=(e=ih,t=eo())=>{let n=(null==t?void 0:t.getSceneType())===eS.image||(null==t?void 0:t.getSceneType())===eS.endcard;t&&"shouldSplitVideoEndcardClick"in t&&t.shouldSplitVideoEndcardClick?(null==t?void 0:t.getSceneType())===eS.video&&e(iT.CLICK_URL,!0):e(iT.CLICK_URL,!0),n&&e(iT.POSTROLL_CLICK,!0)},ig=class{getStoreKitOverlayAutoShowConfig(e=ip){let t="adv_pref"===this.fullCtaOptionTokenValue,n="false"===this.skOverlayDisableAutoMMPTokenValue;return{enabled:!!nJ(this.environmentService,this.placementTypeService)&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&es(this.skOverlayAutoTokenValue)&&t,autoShowDelay:(()=>{if(!this.skOverlayDelaySecondsTokenValue)return 5e3;let e=parseInt(this.skOverlayDelaySecondsTokenValue,10);return Number.isNaN(e)?5e3:1e3*e})(),isAutoClose:!!this.skOverlayAutoCloseTokenValue&&!["0","-1"].includes(this.skOverlayAutoCloseTokenValue),autoCloseDelay:(()=>{var e;let t=parseInt(null!==(e=this.skOverlayAutoCloseTokenValue)&&void 0!==e?e:"0",10);return Number.isNaN(t)?5e3:Math.max(5e3,1e3*t)})(),openCallback:n?e:()=>{}}}constructor(e,t,n,i,r,a,o=en(),s=ei()){this.appStoreId=e,this.fullCtaOptionTokenValue=t,this.skOverlayAutoTokenValue=n,this.skOverlayDelaySecondsTokenValue=i,this.skOverlayAutoCloseTokenValue=r,this.skOverlayDisableAutoMMPTokenValue=a,this.environmentService=o,this.placementTypeService=s}},iC=(e=V())=>{let t=e.get(w.APP_STORE_ID);if(t)return t;let n=e.get(w.CTA_BUTTON_URL),i=null==n?void 0:n.match(/\/id(\d+)/i);if(null==i?void 0:i[1])return i[1]},iO=class{getAppStoreOnDelayConfig(){var e;let t=Number(null!==(e=this.appStoreOnVideoAutoDelayTokenValue)&&void 0!==e?e:"0");return{enabled:!(!nE(this.environmentService)||void 0===this.appStoreId||0===this.appStoreId.length||this.placementService.isInLine())&&!Number.isNaN(t)&&Number.isFinite(t)&&t>0,autoShowDelay:Number.isNaN(t)||!Number.isFinite(t)||t<3e3?3e3:t}}constructor(e,t,n=en(),i=ei()){this.appStoreOnVideoAutoDelayTokenValue=e,this.appStoreId=t,this.environmentService=n,this.placementService=i}},iA=e=>{var t;return!!e&&(null==e?void 0:null===(t=e.trim())||void 0===t?void 0:t.toLowerCase())==="false"},iI=class{getStoreKitOverlayAutoShowConfig(e=ip){let t=this.isEndcardOnly?this.skOverlayDelaySecondsTokenValue:this.ecSkOverlayDelaySecondsTokenValue,n="false"===this.ecSkOverlayDisableAutoMMPTokenValue&&0===this.endcardIndex;return{enabled:!(!nJ(this.environmentService,this.placementTypeService)||!this.appStoreId||iA(this.skOverlayAutoTokenValue))&&!(this.endcardIndex>0)&&("adv_pref"===this.fullCtaOptionTokenValue||this.isEndcardOnly)&&!!t&&parseInt(t,10)>=0,isAutoClose:!!this.skOverlayAutoCloseTokenValue&&!["0","-1"].includes(this.skOverlayAutoCloseTokenValue),autoShowDelay:(()=>{let e=parseInt(null!=t?t:"5",10);return Number.isNaN(e)?3e3:Math.max(3e3,1e3*e)})(),autoCloseDelay:(()=>{var e;let t=parseInt(null!==(e=this.skOverlayAutoCloseTokenValue)&&void 0!==e?e:"0",10);return Number.isNaN(t)?5e3:Math.max(5e3,1e3*t)})(),openCallback:n?()=>e():()=>{}}}constructor(e,t,n,i,r,a,o,s,l,d=en(),c=ei()){this.endcardIndex=e,this.isEndcardOnly=t,this.appStoreId=n,this.fullCtaOptionTokenValue=i,this.skOverlayAutoTokenValue=r,this.skOverlayDelaySecondsTokenValue=a,this.ecSkOverlayDelaySecondsTokenValue=o,this.skOverlayAutoCloseTokenValue=s,this.ecSkOverlayDisableAutoMMPTokenValue=l,this.environmentService=d,this.placementTypeService=c}},iN=class{getAppStoreOnDelayConfig(){var e;let t=Number(null!==(e=this.appStoreOnEndcardAutoDelayTokenValue)&&void 0!==e?e:"0");return{enabled:!!nE(this.environmentService)&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&0===this.endcardIndex&&!Number.isNaN(t)&&Number.isFinite(t)&&t>0,autoShowDelay:Number.isNaN(t)||!Number.isFinite(t)||t<3e3?3e3:t}}constructor(e,t,n,i=en()){this.endcardIndex=e,this.appStoreId=t,this.appStoreOnEndcardAutoDelayTokenValue=n,this.environmentService=i}};const im=(e,t=V(),n=ei())=>({appNameEncoded:t.get(w.APP_NAME_ENCODED),appStoreId:t.get(w.APP_STORE_ID),ctaButtonDelay:t.get(w.DOWNLOAD_BUTTON_DELAY_SECONDS),ctaButtonText:t.get(w.CTA_BUTTON_TEXT),ctaButtonTextEncoded:t.get(w.CTA_BUTTON_ENCODED_TEXT),ctaButtonUrl:t.get(w.CTA_BUTTON_URL),ctaTarget:eh.SKPV,enabled:!1,endcardCloseButtonDelaySeconds:t.get(w.EC_CLOSE_BUTTON_DELAY_SECONDS),fullCtaOptionTokenValue:t.get(w.FULL_CTA_OPTION),fullCtaTokenValue:t.get(w.FULL_CTA),hasEndcard:t.has(w.EC_HTML)||t.has(w.EC_IMAGE),hasVideo:t.has(w.MAIN_VIDEO)||t.has(w.MAIN_STREAM),icon:t.get(w.APP_ICON),id:e,isFullscreen:n.isFullscreen(),name:t.get(w.APP_NAME),showECCloseButtonCountDownTokenValue:t.get(w.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),skCtaOnlyTokenValue:t.get(w.SK_CTA_ONLY),skFscTokenValue:t.get(w.SK_FSC),staticEndcardCloseButtonDelaySeconds:t.get(w.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS)});var iD=class{getCtaButtonText(){if(this.ctaButtonTextEncoded)try{return U(this.ctaButtonTextEncoded)}catch(e){}return this.ctaButtonText?this.ctaButtonText:this.icon&&this.name&&this.appStoreId?"GET":"Open"}getCtaButtonDelay(){var e;return parseInt(null!==(e=this.ctaButtonDelay)&&void 0!==e?e:"4",10)}getCloseDelay(){let e=this.hasVideo&&!this.hasEndcard,t=3;return e&&this.endcardCloseButtonDelaySeconds?t=Number(this.endcardCloseButtonDelaySeconds):this.staticEndcardCloseButtonDelaySeconds&&(t=Number(this.staticEndcardCloseButtonDelaySeconds)),Math.min(Math.max(t,1),e?6:30)}getCountDown(){return!this.showECCloseButtonCountDownTokenValue||"true"===this.showECCloseButtonCountDownTokenValue}getAppName(){var e;if(this.appNameEncoded)try{return U(this.appNameEncoded)}catch(e){}return null!==(e=this.name)&&void 0!==e?e:""}getLastChanceEndcardConfig(){return{enabled:this.isFullscreen&&this.enabled,id:this.id,appMeta:{enabled:!!(this.icon&&this.name),name:this.getAppName(),icon:this.icon},cta:{text:this.getCtaButtonText(),url:this.ctaButtonUrl||"",isPersistent:!1,target:i_(this.skCtaOnlyTokenValue),delay:this.getCtaButtonDelay()},fsc:{enabled:es(this.fullCtaTokenValue)&&"fsc_off"!==this.fullCtaOptionTokenValue,ctaUrl:this.ctaButtonUrl,target:i_(this.skFscTokenValue)},close:{delay:this.getCloseDelay(),style:n4.CLOSE,countdown:this.getCountDown()}}}setLastChanceEndcardConfig(){}constructor({appNameEncoded:e,appStoreId:t,ctaButtonDelay:n,ctaButtonText:i,ctaButtonTextEncoded:r,ctaButtonUrl:a,ctaTarget:o,enabled:s=!1,endcardCloseButtonDelaySeconds:l,fullCtaOptionTokenValue:d,fullCtaTokenValue:c,hasEndcard:u,hasVideo:E,icon:_,id:v,isFullscreen:T,name:S,showECCloseButtonCountDownTokenValue:h,skCtaOnlyTokenValue:p,skFscTokenValue:g,staticEndcardCloseButtonDelaySeconds:C}){this.appNameEncoded=e,this.appStoreId=t,this.ctaButtonDelay=n,this.ctaButtonText=i,this.ctaButtonTextEncoded=r,this.ctaButtonUrl=a,this.ctaTarget=null!=o?o:eh.SKPV,this.enabled=s,this.endcardCloseButtonDelaySeconds=l,this.fullCtaOptionTokenValue=d,this.fullCtaTokenValue=c,this.hasEndcard=!!u,this.hasVideo=!!E,this.icon=_,this.id=v,this.isFullscreen=!!T,this.name=S,this.showECCloseButtonCountDownTokenValue=h,this.skCtaOnlyTokenValue=p,this.skFscTokenValue=g,this.staticEndcardCloseButtonDelaySeconds=C}},iR=class{getCloseButtonConfig(){return{delay:this.getDelay(),style:this.getStyle(),countdown:this.getCountDown()}}constructor({ecCloseButtonDelaySecondsTokenValue:e,staticEcCloseButtonDelaySecondsTokenValue:t,endcardCloseButtonAsSkipTokenValue:n,showECCloseButtonCountDownTokenValue:i,isSecondEndcard:r}){this.getDelay=()=>{let e=0;return this.isSecondEndcard&&this.staticEcCloseButtonDelaySecondsTokenValue?e=Number(this.staticEcCloseButtonDelaySecondsTokenValue):this.ecCloseButtonDelaySecondsTokenValue&&(e=Number(this.ecCloseButtonDelaySecondsTokenValue)),e},this.getStyle=()=>this.isSecondEndcard?n4.CLOSE:es(this.endcardCloseButtonAsSkipTokenValue)?n4.SKIP:n4.CLOSE,this.getCountDown=()=>!this.showECCloseButtonCountDownTokenValue||es(this.showECCloseButtonCountDownTokenValue),this.ecCloseButtonDelaySecondsTokenValue=e,this.staticEcCloseButtonDelaySecondsTokenValue=t,this.endcardCloseButtonAsSkipTokenValue=n,this.showECCloseButtonCountDownTokenValue=i,this.isSecondEndcard=r}},iL=class{getTrackingEventMapConfig(){return{enabled:this.enabled,events:this.events}}constructor(e,t){this.enabled=e,this.events=t}};const iy=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"});var iP=(e,t=ec())=>{if(!e)return[];try{let t=JSON.parse(e);if(!Array.isArray(t))return[];return t.slice(0,4)}catch(e){t.emit({type:"error-logging",event:nR.RESOURCE,data:{error:{message:"Unable to parse app screenshots"}}})}return[]};const iV=(e=V(),t=ec())=>({ctaButtonUrl:e.get(w.CTA_BUTTON_URL),ctaButtonText:e.get(w.CTA_BUTTON_TEXT),ctaButtonTextEncoded:e.get(w.CTA_BUTTON_ENCODED_TEXT),ctaButtonDelay:e.get(w.DOWNLOAD_BUTTON_DELAY_SECONDS),appName:e.get(w.APP_NAME),appIcon:e.get(w.APP_ICON),appDescription:e.get(w.APP_DESCRIPTION),appRatingCount:e.get(w.APP_RATING_COUNT),appLongDescription:e.get(w.APP_LONG_DESCRIPTION),appContentRating:e.get(w.APP_CONTENT_RATING),appScreenShots:e.get(w.APP_SCREENSHOTS),appDownloadCount:e.get(w.APP_DOWNLOAD_COUNT),appRating:e.get(w.APP_RATING),appStoreRating:e.get(w.APP_STORE_RATING),appStoreId:e.get(w.APP_STORE_ID),appNameEncoded:e.get(w.APP_NAME_ENCODED),appDescriptionEncoded:e.get(w.APP_DESCRIPTION_ENCODED),appLongDescriptionEncoded:e.get(w.APP_LONG_DESCRIPTION_ENCODED),errorLoggingReportingService:t});var iw=class{hasAppMetadata(){return!!(this.appIcon&&this.appName)}getAppRatingCount(){var e;let t=parseInt(null!==(e=this.appRatingCount)&&void 0!==e?e:"",10);return Number.isInteger(t)&&Number.isFinite(t)?iy.format(t):""}getAppContentRatingImg(){var e,t;return null!==(t=({Everyone:"https://cdn-lb.vungle.com/esrb/E.svg","Everyone 10+":"https://cdn-lb.vungle.com/esrb/E10plus.svg",Teen:"https://cdn-lb.vungle.com/esrb/T.svg","Mature 17+":"https://cdn-lb.vungle.com/esrb/M.svg","Adults Only 18+":"https://cdn-lb.vungle.com/esrb/AO.svg"})[null!==(e=this.appContentRating)&&void 0!==e?e:""])&&void 0!==t?t:""}getAppDownloadCount(){let{appDownloadCount:e}=this;if(!e)return"";if(/[KMB]/.test(e))return e;e.includes("-")&&([e]=e.split("-"));let t=Number(e=e.replace(/[,+ ]+/g,""));return t?`${new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:0}).format(t)}+`:""}getAppRating(){var e,t;let n=null!==(t=null!==(e=this.appRating)&&void 0!==e?e:this.appStoreRating)&&void 0!==t?t:"4.4",i=n.lastIndexOf("/")+1,r=n.indexOf("-stars.svg"),a=n.substring(i,r);if(a){let e=parseFloat(a);if(!Number.isNaN(e))return e}let o=parseFloat(n);return Number.isNaN(o)?parseFloat("4.4"):o}getAppName(){var e;if(this.appNameEncoded)try{return U(this.appNameEncoded)}catch(e){}return null!==(e=this.appName)&&void 0!==e?e:""}getAppDescription(){var e;if(this.appDescriptionEncoded)try{return U(this.appDescriptionEncoded)}catch(e){}return null!==(e=this.appDescription)&&void 0!==e?e:""}getAppLongDescription(){var e;if(this.appLongDescriptionEncoded)try{return U(this.appLongDescriptionEncoded)}catch(e){}return null!==(e=this.appLongDescription)&&void 0!==e?e:""}getCtaButtonText(){if(this.ctaButtonTextEncoded)try{return U(this.ctaButtonTextEncoded)}catch(e){}return this.ctaButtonText&&""!==this.ctaButtonText.trim()?this.ctaButtonText:this.hasAppMetadata()&&this.appStoreId?"GET":"Open"}getCtaButtonDelay(){var e;let t=parseInt(null!==(e=this.ctaButtonDelay)&&void 0!==e?e:"",10);return Number.isInteger(t)&&Number.isFinite(t)?t:0}getCtaButtonUrl(){var e;return null!==(e=this.ctaButtonUrl)&&void 0!==e?e:""}getAppMetaData(){var e,t;return{enabled:this.hasAppMetadata(),company:this.getAppDescription(),contentRating:null!==(e=this.appContentRating)&&void 0!==e?e:"",contentRatingImg:this.getAppContentRatingImg(),description:this.getAppLongDescription(),downloads:this.getAppDownloadCount(),icon:null!==(t=this.appIcon)&&void 0!==t?t:"",isRatingGreaterThanMinimum:this.getAppRating()>=4,minimumAppRating:4,name:this.getAppName(),price:"",rating:this.getAppRating(),ratingCount:this.getAppRatingCount(),screenshots:iP(this.appScreenShots,this.errorLoggingReportingService)}}constructor({ctaButtonUrl:e,ctaButtonText:t,ctaButtonTextEncoded:n,ctaButtonDelay:i,appName:r,appIcon:a,appDescription:o,appRatingCount:s,appLongDescription:l,appContentRating:d,appScreenShots:c,appDownloadCount:u,appRating:E,appStoreRating:_,appStoreId:v,appNameEncoded:T,appDescriptionEncoded:S,appLongDescriptionEncoded:h,errorLoggingReportingService:p=ec()}){this.ctaButtonUrl=e,this.ctaButtonText=t,this.ctaButtonTextEncoded=n,this.ctaButtonDelay=i,this.appName=r,this.appIcon=a,this.appDescription=o,this.appRatingCount=s,this.appLongDescription=l,this.appContentRating=d,this.appScreenShots=c,this.appDownloadCount=u,this.appRating=E,this.appStoreRating=_,this.appStoreId=v,this.appNameEncoded=T,this.appDescriptionEncoded=S,this.appLongDescriptionEncoded=h,this.errorLoggingReportingService=p}},ib=class extends iw{getCallToActionConfig(){return{url:super.getCtaButtonUrl(),text:super.getCtaButtonText(),appMeta:super.getAppMetaData(),delay:super.getCtaButtonDelay(),target:i_(this.skEcCtaOnlyTokenValue)}}constructor({skEcCtaOnlyTokenValue:e,appMetaProviderParams:t}){super(t),this.skEcCtaOnlyTokenValue=e}},iM=class extends a{getMessageFromErrorEvent(e){var t;return e.message&&""!==e.message?e.message:(null===(t=e.error)||void 0===t?void 0:t.message)&&""!==e.error.message?e.error.message:"Unexpected script error"}isIgnoredError(e){let t=e.toLowerCase();return["syntaxerror: unexpected token ':'"].some(e=>-1!==t.indexOf(e))}sendImageError(e,t=!1){let n=this.getImageErrorEvent(e.target);t&&(n.data.isFatal=!0),this.send(n)}shouldImageErrorBeFatal(e){var t;return"image_0"===e&&!(null===(t=this.currentScene())||void 0===t?void 0:t.prev)}handlePlayableError(e){var t,n,i,r;let a=e.data&&"playable-error"===e.data.title,o=null!==(i=null===(n=e.data)||void 0===n?void 0:null===(t=n.content)||void 0===t?void 0:t.message)&&void 0!==i?i:"";a&&!this.isIgnoredError(o)&&(e.data.content.error_source=G.PLAYABLE,this.send({type:"error-logging",event:nR.PLAYABLE,data:{error:e.data.content,sceneId:null===(r=eo())||void 0===r?void 0:r.getId()}}))}handleUnhandledrejectionError(e){var t,n;this.send({type:"error-logging",event:nR.UNHANDLEDREJECTION,data:{error:{message:null!==(n=null===(t=e.reason)||void 0===t?void 0:t.toString())&&void 0!==n?n:"Unhandled rejection error",error_source:G.TEMPLATE}}})}handleCommonError(e){let{localName:t}=e.target;if("video"===t)return;if("img"===t){let{id:t}=e.target,n=this.shouldImageErrorBeFatal(t);this.sendImageError(e,n);return}let n={type:"error-logging",event:nR.EXCEPTION,data:{error:{message:this.getMessageFromErrorEvent(e),error_source:G.TEMPLATE,resource_url:null==e?void 0:e.filename}}};this.send(n)}getErrorCode(e){var t;let n=null===(t=e.data)||void 0===t?void 0:t.resourceType;return n===nL.IMAGE?1e4:n===nL.VIDEO?10001:30006}getImageErrorEvent(e){let{currentSrc:t}=e;return{type:"error-logging",event:nR.RESOURCE,data:{resourceType:nL.IMAGE,error:{resource_url:t,error_source:G.RESOURCE,message:$}}}}init(){window.addEventListener("error",this.handleCommonError.bind(this),!0),window.addEventListener("unhandledrejection",this.handleUnhandledrejectionError.bind(this)),window.addEventListener("message",this.handlePlayableError.bind(this))}send(e){this.errorLoggingReportingService.emit(e)}notifyFatalError(e){var t,n,i,r;let a=this.getErrorCode(e),o=null!==(r=null===(t=e.data.error)||void 0===t?void 0:t.message)&&void 0!==r?r:"Unknown error";null===(i=this.mraidService.getMraidBridgeExt())||void 0===i||null===(n=i.notifyError)||void 0===n||n.call(i,a,o,!0)}static getServiceIdentifier(){return"ErrorLoggingServiceInterface"}constructor(e=y(),t=ec(),n=eo){super(),this.mraidService=e,this.errorLoggingReportingService=t,this.currentScene=n}},ik=()=>{let e=r.getInstance(),t=iM.getServiceIdentifier();return e.get(t)},iU=((EG={}).CLOSE_AD="closeAd",EG.CLOSE_STOREKIT_OVERLAY="closeStoreKitOverlay",EG.ENSURE_REWARD_GRANTED="ensureRewardGranted",EG.SEND_VIDEO_ERROR="sendVideoError",EG),iB=()=>({closeAd:()=>{nG()},closeStoreKitOverlay:()=>{var e;null===(e=nS())||void 0===e||e.close()},ensureRewardGranted:(e,t,n=V(),i=ng(),r=ed(),a=y(),o=ih)=>{var s;!i.getActivityEvents().some(e=>"observability"===e.eventType&&e.data.name===x.FORFEIT_REWARD)&&el(n)&&(r.getActivityEvents().some(e=>"tpat"===e.eventType&&e.name===iT.REWARD_GRANTED)||(null===(s=a.getMraidBridgeExt())||void 0===s||s.notifySuccessfulViewAd(),o(iT.REWARD_GRANTED,!0)))},sendVideoError:(e,t,n=ik())=>{let i={type:"error-logging",event:nR.RESOURCE,data:{resourceType:nL.VIDEO,isFatal:!0,error:{message:q}}};n.send(i)}}),iH=((EK=iH||{}).ON_CREATIVE_VIEW="onCreativeView",EK.DESTROY_IFRAME="destroyIframe",EK.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS="flushMraidEventsProxyCallbacks",EK.INIT_CHECKPOINTS="initCheckpoints",EK.INIT_OMSDK_HTML_DISPLAY_SERVICE="initOmsdkHtmlDisplayService",EK.ON_ENDCARD_START="onEndcardStart",EK.ON_ENDCARD_CLOSE="onEndcardClose",EK.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW="closeWillAppear",EK.ON_SHOW="onShow",EK);class iW extends t8{getId(){return"closed"}static getInstances(){let e=ei();return e.isBanner()||e.isMrec()||e.isInLine()?[]:[new iW]}getSceneType(){return eS.closed}constructor(){super(),this.addEntryAction({name:iU.ENSURE_REWARD_GRANTED}),this.addEntryAction({name:iH.DESTROY_IFRAME}),this.getEntryActions().some(e=>e.name===iU.CLOSE_AD)||this.addEntryAction({name:iU.CLOSE_AD}),this.addTransition(d({},it))}}var iF=(e=V(),t=ei())=>!!t.isMrec()||es(e.get(w.START_MUTED))||es(e.get(w.REAL_START_MUTED)),ix=class{subscribe(e){let t;let n=()=>{t&&t.unsubscribe(),this.isUnsubscribed||(this.isUnsubscribed=!0)};return t=this.subscribeFn({next:t=>{this.isUnsubscribed||e.next(t)},error:t=>{var i;this.isUnsubscribed||(null===(i=e.error)||void 0===i||i.call(e,t),n())},complete:()=>{var t;this.isUnsubscribed||(null===(t=e.complete)||void 0===t||t.call(e),n())}}),{unsubscribe:n}}pipe(...e){return e.reduce((e,t)=>t(e),this)}constructor(e){this.isUnsubscribed=!1,this.subscribeFn=e}},iG=function(e){return t=>new ix(n=>t.subscribe({next:t=>{e(t)&&n.next(t)},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}}))},iK=(e,t)=>new ix(n=>{let i=(e,t)=>n.next(t);return e.addEventHandler(t,i),{unsubscribe:()=>{e.removeEventHandler(t,i)}}}),iY=(e,t,n)=>iK(e,"error-logging").pipe(iG(e=>e.event===t&&(!n||e.data.resourceType===n))),ij=function(){return e=>new ix(t=>{let n=0,i=e.subscribe({next:()=>{n+=1,t.next(n)},error:e=>{var n;return null===(n=t.error)||void 0===n?void 0:n.call(t,e)},complete:()=>{var e;return null===(e=t.complete)||void 0===e?void 0:e.call(t)}});return{unsubscribe:()=>i.unsubscribe()}})},iX=function(e){return t=>new ix(n=>{let i=null,r=t.subscribe({next:e=>n.next(e),error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}});return i=e.subscribe({next:()=>{var e;null===(e=n.complete)||void 0===e||e.call(n),r.unsubscribe(),null==i||i.unsubscribe()}}),{unsubscribe:()=>{r.unsubscribe(),i.unsubscribe()}}})},iz=(e,t)=>iK(e,"scene-event").pipe(iG(e=>e.event===t)),i$=((EY=i$||{}).APP_STORE_CLOSE="APP_STORE_CLOSE",EY.APP_STORE_OPEN="APP_STORE_OPEN",EY.CLICK="CLICK",EY.CLOSE_BUTTON_CLICK="CLOSE_BUTTON_CLICK",EY.CLOSE_BUTTON_SHOW="CLOSE_BUTTON_SHOW",EY.CTA_BUTTON_CLICK="CTA_BUTTON_CLICK",EY.CTA_BUTTON_SHOW="CTA_BUTTON_SHOW",EY.EMIT_SCENE_END_OBSERVABILITY_EVENT="EMIT_SCENE_END_OBSERVABILITY_EVENT",EY.LAST_CHANCE_ENDCARD_CLOSE="LAST_CHANCE_ENDCARD_CLOSE",EY.LAST_CHANCE_ENDCARD_OPEN="LAST_CHANCE_ENDCARD_OPEN",EY.LOAD_COMPLETE="LOAD_COMPLETE",EY.LOAD_START="LOAD_START",EY.NEAR_CLOSE_BUTTON_CLICK="NEAR_CLOSE_BUTTON_CLICK",EY.PRELOAD_COMPLETE="PRELOAD_COMPLETE",EY.PRELOAD_START="PRELOAD_START",EY.SCENE_END="SCENE_END",EY.SCENE_START="SCENE_START",EY),iq=(e,t)=>new ix(n=>{let i=null,r=null,a=null;return r=e.subscribe({next:()=>{i=Date.now()}}),a=t.subscribe({next:()=>{if(null!=i){var e;n.next(Date.now()-i),null==r||r.unsubscribe(),null==a||a.unsubscribe(),null===(e=n.complete)||void 0===e||e.call(n)}}}),{unsubscribe:()=>{null==r||r.unsubscribe(),null==a||a.unsubscribe()}}}),iZ=(e=nI(),t=!1)=>{let n={duration:iq(iz(e,i$.SCENE_START),iz(e,i$.SCENE_END))};return t&&(n.last_chance_endcard_duration=iq(iz(e,i$.LAST_CHANCE_ENDCARD_OPEN),iz(e,i$.LAST_CHANCE_ENDCARD_CLOSE))),n},iQ=(e,t,n)=>new ix(i=>{let r=iq(e,t).subscribe({next:e=>{var t;i.next(e),null===(t=i.complete)||void 0===t||t.call(i)}}),a=n.subscribe({next:()=>{var e;i.next(0),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe(),a.unsubscribe()}}}),iJ=(e=!1,t=nI())=>{let n=iY(t,nR.PLAYABLE).pipe(ij()).pipe(iX(iz(t,i$.SCENE_END))),i=iQ(iz(t,i$.LOAD_START),iz(t,i$.LOAD_COMPLETE),iz(t,i$.SCENE_END));return O(d({},iZ(t,e)),{error_count:n,load_duration:i})};const i0=[w.EC_IMAGE,w.EC_IMAGE_2,w.EC_HTML,w.ADM_HTML,w.EC_HTML_2];var i1=((Ej={}).BASE64_ENCODED="base64-encoded",Ej.GZIP="gzip",Ej.NONE="none",Ej);class i2 extends il{getId(){return this.id}getSceneType(){return this.sceneType}getStoreKitOverlayAutoShowConfig(){return this.storeKitOverlayAutoShowConfig}getAppStoreOnDelayConfig(){return this.appStoreOnDelayConfig}getCloseButtonConfig(){return O(d({},this.closeButtonConfig),{style:this.isLastPage()?n4.CLOSE:this.closeButtonConfig.style})}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}getTrackingEventMapConfig(){return this.trackingEventMapConfig}getCallToActionConfig(){return this.callToActionConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getEventStreams(){return this.eventStreams?this.eventStreams:iJ(this.lastChanceEndcardConfig.enabled)}static getInstances(e=V(),t=ei(),n=en(),i=ec()){let r=[w.EC_HTML,w.ADM_HTML,w.EC_HTML_2],a=[],o={[w.EC_HTML]:"endcard",[w.ADM_HTML]:"endcard",[w.EC_HTML_2]:"secondEndcard"},s=es(e.get(w.EC_HTML_PRELOAD));return r.filter(t=>e.has(t)).forEach((r,l)=>{var d;let c=r===w.ADM_HTML,u=`${o[r]}_${l}`;a.push(new i2({id:u,endcardContent:null!==(d=e.get(r))&&void 0!==d?d:"",index:l,isAlternative:!1,compressionType:e.get(w.EC_HTML_COMPRESS)?"gzip":"base64-encoded",storeKitOverlayAutoShowConfig:new iI(l,this.isEndcardOnly(e),iC(e),e.get(w.FULL_CTA_OPTION),e.get(w.SKOVERLAY_AUTO),e.get(w.SKOVERLAY_DELAY_SECONDS),e.get(w.EC_SKOVERLAY_DELAY_SECONDS),e.get(w.SKOVERLAY_AUTO_CLOSE),e.get(w.EC_SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new iN(l,iC(e),e.get(w.APP_STORE_ON_ENDCARD_AUTO_DELAY),n).getAppStoreOnDelayConfig(),lastChanceEndcardConfig:new iD(im(u,e,t)).getLastChanceEndcardConfig(),omsdkEnabled:c,closeButtonConfig:new iR({ecCloseButtonDelaySecondsTokenValue:e.get(w.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(w.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(w.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(w.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:1===l}).getCloseButtonConfig(),trackingEventMapConfig:new iL(!1).getTrackingEventMapConfig(),callToActionConfig:new ib({skEcCtaOnlyTokenValue:e.get(w.SK_EC_CTA_ONLY),appMetaProviderParams:iV(e,i)}).getCallToActionConfig(),muted:iF(e,t),eligibleToPreload:s,placementTypeService:t,shouldSplitVideoEndcardClick:es(e.get(w.VIDEO_ENDCARD_CLICK_SPLIT))}))}),a}constructor({id:e,endcardContent:t,index:n,isAlternative:i,compressionType:r,storeKitOverlayAutoShowConfig:a,appStoreOnDelayConfig:o,lastChanceEndcardConfig:s,omsdkEnabled:l,closeButtonConfig:d,trackingEventMapConfig:c,muted:u=!1,eligibleToPreload:E=!1,callToActionConfig:_,placementTypeService:v=ei(),shouldSplitVideoEndcardClick:T=!1,eventStreams:S}){super({isFullscreen:v.isFullscreen()}),this.sceneType=eS.endcard,this.id=e,this.endcardContent=t,this.index=n,this.alternative=i,this.compressionType=r,this.storeKitOverlayAutoShowConfig=a,this.appStoreOnDelayConfig=o,this.lastChanceEndcardConfig=s,this.omsdkEnabled=l,this.trackingEventMapConfig=c,this.closeButtonConfig=d,this.callToActionConfig=_,this.placementTypeService=v,this.muted=u,this.eligibleToPreload=E,this.shouldSplitVideoEndcardClick=T,this.eventStreams=S,l?this.addEntryAction({name:iH.INIT_OMSDK_HTML_DISPLAY_SERVICE}):(this.addEntryAction({name:iH.ON_ENDCARD_START}),this.addExitAction({name:iH.ON_ENDCARD_CLOSE})),0===n&&(this.addTransition(ii),this.addTransition(ir),this.addTransition(ia),this.addTransition(io)),this.addOrUpdateTransition({name:t6.CLOSE,actions:[],scene:new iW}),this.addExitAction({name:iH.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS}),this.addOrUpdateTransition({name:t6.CLOSE_BUTTON_WILL_SHOW,actions:[{name:iH.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW}]}),this.addTransition({name:t6.CREATIVE_VIEW,actions:[{name:iH.ON_CREATIVE_VIEW}]}),this.addEntryAction({name:iH.ON_SHOW})}}i2.isEndcardOnly=(e=V())=>{let t=!e.has(w.MAIN_VIDEO)&&!e.has(w.MAIN_STREAM),n=1===i0.filter(t=>e.has(t)).length;return t&&n};var i3=i2,i5=class{getDelay(){return es(this.incentivizedTokenValue)&&this.incentivizedCloseButtonDelaySecondsTokenValue?Number(this.incentivizedCloseButtonDelaySecondsTokenValue):this.closeButtonDelaySecondsTokenValue?Number(this.closeButtonDelaySecondsTokenValue):0}getCountDown(){return void 0===this.showVideoCloseButtonCountDownTokenValue||es(this.showVideoCloseButtonCountDownTokenValue)}getStyle(){return es(this.videoCloseButtonAsSkipTokenValue)?n4.SKIP:n4.CLOSE}getCloseButtonConfig(){return{delay:this.getDelay(),style:this.getStyle(),countdown:this.getCountDown()}}constructor({closeButtonDelaySecondsTokenValue:e,incentivizedCloseButtonDelaySecondsTokenValue:t,incentivizedTokenValue:n,videoCloseButtonAsSkipTokenValue:i,showVideoCloseButtonCountDownTokenValue:r}){this.closeButtonDelaySecondsTokenValue=e,this.incentivizedCloseButtonDelaySecondsTokenValue=t,this.incentivizedTokenValue=n,this.videoCloseButtonAsSkipTokenValue=i,this.showVideoCloseButtonCountDownTokenValue=r}},i4=class{getProgressBarConfig(){var e,t;return{show:!this.isBanner&&!iA(this.videoProgressBarTokenValue),color:null!==(t=null!==(e=this.videoProgressBarColorTokenValue)&&void 0!==e?e:this.ctaButtonBackgroundTokenValue)&&void 0!==t?t:eO}}constructor({videoProgressBarTokenValue:e,videoProgressBarColorTokenValue:t,ctaButtonBackgroundTokenValue:n,isBanner:i}){this.videoProgressBarTokenValue=e,this.videoProgressBarColorTokenValue=t,this.ctaButtonBackgroundTokenValue=n,this.isBanner=i}};const i6=(e=V(),t=ei(),n=ec())=>{let i=iV(e,n);return{appStoreId:iC(e),skCtaOnlyTokenValue:e.get(w.SK_CTA_ONLY),blockPersistentCtaTokenValue:e.get(w.BLOCK_PERSISTENT_CTA),appMetaProviderParams:i,placementTypeService:t}};var i8=class extends iw{getCallToActionTarget(){return this.placementTypeService.isBanner()||this.placementTypeService.isMrec()?eh.SKPV:i_(this.skCtaOnlyTokenValue)}isPersistentCtaEnabled(){return(this.placementTypeService.isFullscreen()||this.placementTypeService.isMrec()||this.placementTypeService.isInLine())&&!es(this.blockPersistentCtaTokenValue)}getCallToActionConfig(){return{isPersistent:this.isPersistentCtaEnabled(),target:this.getCallToActionTarget(),url:super.getCtaButtonUrl(),text:super.getCtaButtonText(),appMeta:super.getAppMetaData(),delay:super.getCtaButtonDelay()}}constructor({appStoreId:e,skCtaOnlyTokenValue:t,blockPersistentCtaTokenValue:n,appMetaProviderParams:i,placementTypeService:r=ei()}){super(i),this.appStoreId=e,this.skCtaOnlyTokenValue=t,this.blockPersistentCtaTokenValue=n,this.placementTypeService=r}},i7=class{getStreamManifest(){var e;if(void 0!==this.mainManifestTokenValue&&""!==this.mainManifestTokenValue)return{manifest:U(this.mainManifestTokenValue),track_0:U(null!==(e=this.track0TokenValue)&&void 0!==e?e:""),chunks:this.chunkSeriesValues}}constructor(e,t,n){this.mainManifestTokenValue=e,this.track0TokenValue=t,this.chunkSeriesValues=n}},i9=function(e){if(null===e||"object"!=typeof e||"function"!=typeof e.getStreamManifest)return!1;let t=e.getStreamManifest();return void 0===t||!!(null!==t&&"object"==typeof t&&(void 0===t.manifest||"string"==typeof t.manifest)&&(void 0===t.track_0||"string"==typeof t.track_0)&&(void 0===t.chunks||Array.isArray(t.chunks)&&t.chunks.every(e=>"string"==typeof e||null!==e&&"object"==typeof e&&Object.values(e).every(e=>"string"==typeof e))))};const re=e=>{if("object"==typeof e)return Object.values(e).some(e=>re(e));let t=e.toLowerCase();return!t.startsWith("http://")&&!t.startsWith("https://")};var rt=e=>{let t=window.location.pathname.replace("index.html","");return`file://${t}${e}`},rn=class{getCachedFirstTrack(){var e,t;let n=null===(e=ea.getValue())||void 0===e?void 0:e.scene;if(!i9(n)||!this.hasCachedFirstTrack())return"";let i=null===(t=n.getStreamManifest())||void 0===t?void 0:t.track_0;return void 0===i?"":i}getCachedManifest(){var e,t;let n=null===(e=ea.getValue())||void 0===e?void 0:e.scene;if(!i9(n)||!this.hasCachedManifest())return"";let i=null===(t=n.getStreamManifest())||void 0===t?void 0:t.manifest;return void 0===i?"":i}getCachedVideoSegmentUrls(){var e,t,n,i;let r=null===(e=ea.getValue())||void 0===e?void 0:e.scene;return i9(r)&&null!==(i=null===(n=r.getStreamManifest())||void 0===n?void 0:null===(t=n.chunks)||void 0===t?void 0:t.map(e=>{if(re(e)){if("string"==typeof e){if(!e.toLowerCase().startsWith("file://"))return rt(e)}else if("object"==typeof e)return Object.entries(e).reduce((e,[t,n])=>(e[t]=n.toLowerCase().startsWith("file://")?n:rt(n),e),{})}return e}))&&void 0!==i?i:[]}hasCachedFirstTrack(){var e,t;let n=null===(e=ea.getValue())||void 0===e?void 0:e.scene;return!!i9(n)&&!!(null===(t=n.getStreamManifest())||void 0===t?void 0:t.track_0)}hasCachedManifest(){var e,t;let n=null===(e=ea.getValue())||void 0===e?void 0:e.scene;return!!i9(n)&&!!(null===(t=n.getStreamManifest())||void 0===t?void 0:t.manifest)}hasCachedStreamChunks(){var e,t,n;let i=null===(e=ea.getValue())||void 0===e?void 0:e.scene;if(!i9(i))return!1;let r=null!==(n=null===(t=i.getStreamManifest())||void 0===t?void 0:t.chunks)&&void 0!==n?n:[];return 0!==r.length&&re(r[0])}getChunkFormat(){var e,t;let n=null===(e=ea.getValue())||void 0===e?void 0:e.scene;if(!i9(n)||!this.hasCachedStreamChunks())return"";let i=(null===(t=n.getStreamManifest())||void 0===t?void 0:t.chunks)[0].split(".");return i.length<2?"":i[i.length-1]}},ri=(e=!1,t=nI())=>{let n=iY(t,nR.RESOURCE,nL.VIDEO).pipe(ij()).pipe(iX(iz(t,i$.SCENE_END))),i=iQ(iz(t,i$.LOAD_START),iz(t,i$.LOAD_COMPLETE),iz(t,i$.SCENE_END)),r=iQ(iz(t,i$.CTA_BUTTON_SHOW),iz(t,i$.CTA_BUTTON_CLICK),iz(t,i$.SCENE_END));return O(d({},iZ(t,e)),{cta_duration:r,error_count:n,load_duration:i})},rr=((EX={}).PROGRESSIVE="mp4",EX.HLS="hls",EX);class ra extends il{getTransitions(){let e=super.getTransitions();return e.push(id,ic,iu,ii,ir,ia,io),e}getId(){return this.id}getSceneType(){return eS.video}getVideoPlayer(){return"mp4"===this.videoType?"progressive":window.Hls.isSupported()?"custom":"native"}getVideoUrl(){return"mp4"===this.videoType&&void 0!==this.originalVideoUrl?this.originalVideoUrl:this.url}getObservabilityData(){var e,t,n,i;let r=new rn;return{url:null!==(n=this.getVideoUrl())&&void 0!==n?n:"",video:this.videoType,player:this.getVideoPlayer(),manifest:r.hasCachedManifest(),track:r.hasCachedFirstTrack(),segments:null!==(i=null===(t=this.getStreamManifest())||void 0===t?void 0:null===(e=t.chunks)||void 0===e?void 0:e.length)&&void 0!==i?i:0,cached:r.getCachedVideoSegmentUrls().length,format:r.getChunkFormat()}}getProgressBarConfig(){return this.progressBarConfig}getFullScreenClickConfig(){return this.fullScreenClickConfig}getAppStoreOnDelayConfig(){return this.appStoreOnDelayConfig}getCloseButtonConfig(){return O(d({},this.closeButtonConfig),{style:this.isLastPage()?n4.CLOSE:this.closeButtonConfig.style})}getStoreKitOverlayAutoShowConfig(){return this.storeKitOverlayAutoShowConfig}getCallToActionConfig(){return this.callToActionConfig}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}getTrackingEventMapConfig(){return this.trackingEventMapConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getStreamManifest(){return this.streamManifest}getEventStreams(){return this.eventStreams?this.eventStreams:ri(this.lastChanceEndcardConfig.enabled)}static isLoopingVideo(e,t=!1){return t||es(e)}static getInstances(e=V(),t=ei(),n=en(),i=i6()){let r=[w.MAIN_VIDEO,w.MAIN_STREAM],a=[],o=e.get(w.ORIGINAL_VIDEO_URL),s=ra.isLoopingVideo(e.get(w.VIDEO_LOOPING),ra.isVideoOnly(e));return r.filter(t=>e.has(t)).forEach((r,l)=>{var d;let c=r===w.MAIN_STREAM?"hls":"mp4",u=`video_${l}`;a.push(new ra({id:u,url:null!==(d=e.get(r))&&void 0!==d?d:"",index:l,isAlternative:!1,videoType:c,streamManifest:new i7(e.get(w.MAIN_MANIFEST),e.get(w.TRACK_0),e.getSeriesValues("STREAM_CHUNK_")).getStreamManifest(),progressBarConfig:new i4({videoProgressBarTokenValue:e.get(w.VIDEO_PROGRESS_BAR),videoProgressBarColorTokenValue:e.get(w.VIDEO_PROGRESS_BAR_COLOR),ctaButtonBackgroundTokenValue:e.get(w.CTA_BUTTON_BACKGROUND),isBanner:t.isBanner()}).getProgressBarConfig(),fullScreenClickConfig:new iv({skOverlayAutoTokenValue:e.get(w.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(w.FULL_CTA_OPTION),fullCtaTokenValue:e.get(w.FULL_CTA),skFullCtaTokenValue:e.get(w.SK_FSC),id:u,placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:new ig(iC(e),e.get(w.FULL_CTA_OPTION),e.get(w.SKOVERLAY_AUTO),e.get(w.SKOVERLAY_DELAY_SECONDS),e.get(w.SKOVERLAY_AUTO_CLOSE),e.get(w.SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new iO(e.get(w.APP_STORE_ON_VIDEO_AUTO_DELAY),iC(e),n,t).getAppStoreOnDelayConfig(),callToActionConfig:new i8(i).getCallToActionConfig(),lastChanceEndcardConfig:new iD(im(u,e,t)).getLastChanceEndcardConfig(),trackingEventMapConfig:new iL(!1).getTrackingEventMapConfig(),closeButtonConfig:new i5({closeButtonDelaySecondsTokenValue:e.get(w.CLOSE_BUTTON_DELAY_SECONDS),incentivizedCloseButtonDelaySecondsTokenValue:e.get(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),incentivizedTokenValue:e.get(w.INCENTIVIZED),videoCloseButtonAsSkipTokenValue:e.get(w.VIDEO_CLOSE_BUTTON_AS_SKIP),showVideoCloseButtonCountDownTokenValue:e.get(w.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN)}).getCloseButtonConfig(),originalVideoUrl:o,loopVideo:s,isFullscreen:t.isFullscreen(),muted:iF(e,t),shouldSplitVideoEndcardClick:es(e.get(w.VIDEO_ENDCARD_CLICK_SPLIT))}))}),a}constructor({id:e,url:t,index:n,isAlternative:i,videoType:r,streamManifest:a,fullScreenClickConfig:o,storeKitOverlayAutoShowConfig:s,appStoreOnDelayConfig:l,callToActionConfig:d,lastChanceEndcardConfig:c,progressBarConfig:u,closeButtonConfig:E,originalVideoUrl:_,trackingEventMapConfig:v,loopVideo:T=!1,muted:S=!1,isFullscreen:h,shouldSplitVideoEndcardClick:p=!1,eventStreams:g}){super({isFullscreen:h}),this.id=e,this.url=t,this.index=n,this.alternative=i,this.videoType=r,this.streamManifest=a,this.progressBarConfig=u,this.fullScreenClickConfig=o,this.storeKitOverlayAutoShowConfig=s,this.appStoreOnDelayConfig=l,this.callToActionConfig=d,this.lastChanceEndcardConfig=c,this.closeButtonConfig=E,this.originalVideoUrl=_,this.loopVideo=T,this.muted=S,this.trackingEventMapConfig=v,this.shouldSplitVideoEndcardClick=p,this.eventStreams=g,this.addTransition({name:t6.NEXT,actions:[{name:t4.CLOSE_VIDEO}]})}}ra.isVideoOnly=(e=V())=>{let t=!e.some(...i0),n=1===[w.MAIN_VIDEO,w.MAIN_STREAM].filter(t=>e.has(t)).length;return t&&n};var ro=function(e){return e instanceof ra&&Object.values(rr).includes(e.videoType)&&"object"==typeof e.progressBarConfig&&"object"==typeof e.fullScreenClickConfig&&"object"==typeof e.storeKitOverlayAutoShowConfig&&"object"==typeof e.appStoreOnDelayConfig&&"object"==typeof e.callToActionConfig&&"object"==typeof e.lastChanceEndcardConfig&&"object"==typeof e.trackingEventMapConfig&&(void 0===e.originalVideoUrl||!0)&&(void 0===e.loopVideo||!0)},rs=e=>e instanceof i3&&e.getSceneType()===eS.endcard,rl=class extends a{static getServiceIdentifier(){return"PreloadServiceInterface"}isHTMLPreloading(e=eo(),t=t1()){return ro(e)&&(null==t?void 0:t.state.value)===t3.PRELOADING}getHTMLSceneToPreload(e){let t=e.next;if(ro(e)&&rs(t)&&(null==t?void 0:t.eligibleToPreload))return{scene:t,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0}}startPreloading(e=t1()){null==e||e.send(t2.PRELOAD)}cancelPreloading(e=t1()){null==e||e.send(t2.CANCEL_PRELOAD)}},rd={};function rc(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(rd=rc).default=rc;class ru extends Error{}var rE=(e,t=1e4,n=new ru("Timed out waiting!"))=>new Promise((i,r)=>{let a=t=>{var o;let s=e();((o=rd)&&o.__esModule?o.default:o)(s)?s.then(e=>{e?i(e):t<0?r(n):setTimeout(()=>a(t-100),100)}):s?i(s):t<0?r(n):setTimeout(()=>a(t-100),100)};setTimeout(()=>a(t-100),100)}),r_=(e,t)=>new Proxy(e,{get:(e,n,i)=>n in t?t[n]:Reflect.get(e,n,i)});const rv=e=>Object.values(i$).includes(e);var rT=(e=eo)=>{let t=ed();return r_(t,{emit:n=>{let i;if("string"==typeof n&&rv(n)){let t=e();if(!t)return;i={type:"scene-event",event:n,data:{sceneId:t.getId(),sceneType:t.getSceneType()}}}else i=n;t.emit(i)}})},rS=class extends a{addEventStreams(e){var t;let n=e.getId();if(null===(t=this.sceneEventStreams[n])||void 0===t?void 0:t.hasCompleted)throw Error("Cannot add more event streams after completion");let i={eventStreams:e.getEventStreams(),results:{},errors:{},completed:{},hasCompleted:!1};this.sceneEventStreams[n]=i,Object.keys(i.eventStreams).forEach(e=>{i.eventStreams[e].subscribe({next:t=>{i.results[e]=t},error:t=>{i.errors[e]=t},complete:()=>{i.completed[e]=!0}})})}end(e){this.reportingService.emit({type:"scene-event",event:i$.SCENE_END,data:{sceneId:e.getId(),sceneType:e.getSceneType()}})}start(e){this.addEventStreams(e),this.reportingService.emit({type:"scene-event",event:i$.SCENE_START,data:{sceneId:e.getId(),sceneType:e.getSceneType()}})}subscribeAll(e){var t;let n=e.getId();if(null===(t=this.sceneEventStreams[n])||void 0===t?void 0:t.hasCompleted)throw Error("Subscription already completed");let i=this.sceneEventStreams[n];return 0===Object.keys(i.eventStreams).length?Promise.resolve({}):new Promise((e,t)=>{rE(()=>Object.keys(i.eventStreams).every(e=>i.errors[e]?(t(i.errors[e]),!0):i.completed[e])).then(()=>{i.hasCompleted=!0,e(i.results)})})}static getServiceIdentifier(){return"EventStreamServiceInterface"}constructor(e=rT()){super(),this.reportingService=e,this.sceneEventStreams={}}},rh=(e=y(),t=en())=>{var n;let i=e.getMraid();t.getOperatingSystem()===B.Windows&&(null==i||null===(n=i.useCustomClose)||void 0===n||n.call(i,!0))},rp=0;function rg(e,t,n,i,r,a){t||(t={});var o,s,l=t;"ref"in t&&(o=t.ref,delete t.ref);var d={type:e,props:l,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--rp,__i:-1,__u:0,__source:r,__self:a};if("function"==typeof e&&(o=e.defaultProps))for(s in o)void 0===l[s]&&(l[s]=o[s]);return eU.vnode&&eU.vnode(d),d}var rC=(e,t,n=t7())=>{let i=tq(e),r=tC(void 0),a=()=>{var e;null==r||null===(e=r.current)||void 0===e||e.destroy(),r.current=void 0};return tg(()=>{if(void 0===r.current){var e;r.current=n.getNewInterval(1e3,()=>{let e=i.value-1;i.value=e<=0?0:e}),null===(e=r.current)||void 0===e||e.start()}return()=>a()},[]),tZ(()=>{0===i.value&&a(),t&&t(i.value)}),i};_b="NQnIja_countdown";var rO=({delay:e,isVisible:t=!0,children:n,handleTimerUpdate:i,showNextButtonDuringCountDownInBackground:r})=>{let a=rC(e,i);if(a.value>0&&r)return /*#__PURE__*/rg("div",{children:n});if(a.value>0&&!t)return /*#__PURE__*/rg("div",{id:"countdown"});if(a.value>0&&t){let e=Math.round(a.value);return 0===e?null:/*#__PURE__*/rg("div",{id:"countdown",className:_b,children:e})}return /*#__PURE__*/rg("div",{children:n})},rA=(e,t,n=ed())=>(tg(()=>(n.addEventHandler(e,t),()=>{n.removeEventHandler(e,t)}),[n,e,t]),()=>{n.removeEventHandler(e,t)});const rI="close-or-skip-button",rf="privacy-drawer",rN="shield-icon",rm=[P.MREC,P.BANNER,P.IN_LINE];var rD=class{placementSupportsNextButton(){return!rm.includes(this.placementTypeService.getPlacementType())}constructor(e=ei()){this.placementTypeService=e}},rR=(e=iS())=>e.getActivityEvents().some(e=>e.name===iT.CLICK_URL||e.name===iT.POSTROLL_CLICK),rL=class{getButtonPadding(e=0,t=10){return rR()?t:Math.min(Math.max(parseInt(this.tokenService.get(w.CLOSE_BUTTON_PADDING),10)||e,e),t)}constructor(e=V()){this.tokenService=e}};_M="mqB7Ka_closeIcon",_k="mqB7Ka_skipIcon";var ry=({sendEvent:e=()=>{},type:t=n4.CLOSE,service:n=new rL,showLastChanceEndcard:i=!1,beforeClick:r=()=>{}})=>{let a=t===n4.SKIP?_k:_M,o=t===n4.SKIP?"Skip button":"Close button",s=tq(n.getButtonPadding());tg(()=>{e&&e({type:t6.CLOSE_BUTTON_WILL_SHOW})},[]),rA("tpat",()=>{s.value=n.getButtonPadding()});let l=-s.value;return /*#__PURE__*/rg("button",{title:o,"aria-label":o,id:rI,type:"button",style:{padding:`${s.value}px`,margin:`${l}px`},onClick:t=>{t.stopPropagation(),e({type:t6.CLOSE_BUTTON_CLICK}),r(),e(i?{type:t6.LAST_CHANCE_ENDCARD}:{type:t6.NEXT})},children:/*#__PURE__*/rg("div",{className:a})})};_U="LJWyoG_nextButton";const rP=tU(!0);var rV=({handleTimerUpdate:e,showNextButtonDuringCountDownInBackground:t,sendAdEvent:n,showLastChanceEndcard:i=!1,config:r,beforeClick:a=()=>{}})=>{let{delay:o=0,countdown:s=!0}=r,l=new rD,d=o>0;return rA("viewability",(e,t)=>{rP.value=t.event===nf.MAXIMIZED}),l.placementSupportsNextButton()?/*#__PURE__*/rg("div",{id:i?"last-chance-endcard-next-button":"next-button",className:_U,role:"button",tabIndex:0,"data-countdown-running":rP.value,children:d?/*#__PURE__*/rg(rO,{delay:o,isVisible:s,handleTimerUpdate:e,showNextButtonDuringCountDownInBackground:t,children:/*#__PURE__*/rg(ry,{sendEvent:n,type:r.style,showLastChanceEndcard:i,beforeClick:a})}):/*#__PURE__*/rg(ry,{sendEvent:n,type:r.style,showLastChanceEndcard:i,beforeClick:a})}):null},rw={},rb=function(e,t,n,i,r){var a=new Worker(rw[t]||(rw[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(e){var t=e.data,n=t.$e$;if(n){var i=Error(n[0]);i.code=n[1],i.stack=n[2],r(i,null)}else r(null,t)},a.postMessage(n,i),a},rM=Uint8Array,rk=Uint16Array,rU=Int32Array,rB=new rM([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rH=new rM([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rW=new rM([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rF=function(e,t){for(var n=new rk(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];for(var r=new rU(n[30]),i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)r[a]=a-n[i]<<5|i;return{b:n,r:r}},rx=rF(rB,2),rG=rx.b,rK=rx.r;rG[28]=258,rK[258]=28;for(var rY=rF(rH,0),rj=rY.b,rX=rY.r,rz=new rk(32768),r$=0;r$<32768;++r$){var rq=(43690&r$)>>1|(21845&r$)<<1;rq=(61680&(rq=(52428&rq)>>2|(13107&rq)<<2))>>4|(3855&rq)<<4,rz[r$]=((65280&rq)>>8|(255&rq)<<8)>>1}for(var rZ=function(e,t,n){for(var i,r=e.length,a=0,o=new rk(t);a<r;++a)e[a]&&++o[e[a]-1];var s=new rk(t);for(a=1;a<t;++a)s[a]=s[a-1]+o[a-1]<<1;if(n){i=new rk(1<<t);var l=15-t;for(a=0;a<r;++a)if(e[a])for(var d=a<<4|e[a],c=t-e[a],u=s[e[a]-1]++<<c,E=u|(1<<c)-1;u<=E;++u)i[rz[u]>>l]=d}else for(a=0,i=new rk(r);a<r;++a)e[a]&&(i[a]=rz[s[e[a]-1]++]>>15-e[a]);return i},rQ=new rM(288),r$=0;r$<144;++r$)rQ[r$]=8;for(var r$=144;r$<256;++r$)rQ[r$]=9;for(var r$=256;r$<280;++r$)rQ[r$]=7;for(var r$=280;r$<288;++r$)rQ[r$]=8;for(var rJ=new rM(32),r$=0;r$<32;++r$)rJ[r$]=5;var r0=/*#__PURE__*/rZ(rQ,9,0),r1=/*#__PURE__*/rZ(rQ,9,1),r2=/*#__PURE__*/rZ(rJ,5,0),r3=/*#__PURE__*/rZ(rJ,5,1),r5=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},r4=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},r6=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},r8=function(e){return(e+7)/8|0},r7=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new rM(e.subarray(t,n))},r9=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ae=function(e,t,n){var i=Error(t||r9[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,ae),!n)throw i;return i},at=function(e,t,n,i){var r=e.length,a=i?i.length:0;if(!r||t.f&&!t.l)return n||new rM(0);var o=!n,s=o||2!=t.i,l=t.i;o&&(n=new rM(3*r));var d=function(e){var t=n.length;if(e>t){var i=new rM(Math.max(2*t,e));i.set(n),n=i}},c=t.f||0,u=t.p||0,E=t.b||0,_=t.l,v=t.d,T=t.m,S=t.n,h=8*r;do{if(!_){c=r4(e,u,1);var p=r4(e,u+1,3);if(u+=3,p){if(1==p)_=r1,v=r3,T=9,S=5;else if(2==p){var g=r4(e,u,31)+257,C=r4(e,u+10,15)+4,O=g+r4(e,u+5,31)+1;u+=14;for(var A=new rM(O),I=new rM(19),f=0;f<C;++f)I[rW[f]]=r4(e,u+3*f,7);u+=3*C;for(var N=r5(I),m=(1<<N)-1,D=rZ(I,N,1),f=0;f<O;){var R=D[r4(e,u,m)];u+=15&R;var L=R>>4;if(L<16)A[f++]=L;else{var y=0,P=0;for(16==L?(P=3+r4(e,u,3),u+=2,y=A[f-1]):17==L?(P=3+r4(e,u,7),u+=3):18==L&&(P=11+r4(e,u,127),u+=7);P--;)A[f++]=y}}var V=A.subarray(0,g),w=A.subarray(g);T=r5(V),S=r5(w),_=rZ(V,T,1),v=rZ(w,S,1)}else ae(1)}else{var L=r8(u)+4,b=e[L-4]|e[L-3]<<8,M=L+b;if(M>r){l&&ae(0);break}s&&d(E+b),n.set(e.subarray(L,M),E),t.b=E+=b,t.p=u=8*M,t.f=c;continue}if(u>h){l&&ae(0);break}}s&&d(E+131072);for(var k=(1<<T)-1,U=(1<<S)-1,B=u;;B=u){var y=_[r6(e,u)&k],H=y>>4;if((u+=15&y)>h){l&&ae(0);break}if(y||ae(2),H<256)n[E++]=H;else if(256==H){B=u,_=null;break}else{var W=H-254;if(H>264){var f=H-257,F=rB[f];W=r4(e,u,(1<<F)-1)+rG[f],u+=F}var x=v[r6(e,u)&U],G=x>>4;x||ae(3),u+=15&x;var w=rj[G];if(G>3){var F=rH[G];w+=r6(e,u)&(1<<F)-1,u+=F}if(u>h){l&&ae(0);break}s&&d(E+131072);var K=E+W;if(E<w){var Y=a-w,j=Math.min(w,K);for(Y+E<0&&ae(3);E<j;++E)n[E]=i[Y+E]}for(;E<K;++E)n[E]=n[E-w]}}t.l=_,t.p=B,t.b=E,t.f=c,_&&(c=1,t.m=T,t.d=v,t.n=S)}while(!c)return E!=n.length&&o?r7(n,0,E):n.subarray(0,E)},an=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8},ai=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8,e[i+2]|=n>>16},ar=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var r=n.length,a=n.slice();if(!r)return{t:au,l:0};if(1==r){var o=new rM(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var s=n[0],l=n[1],d=0,c=1,u=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=r-1;)s=n[n[d].f<n[u].f?d++:u++],l=n[d!=c&&n[d].f<n[u].f?d++:u++],n[c++]={s:-1,f:s.f+l.f,l:s,r:l};for(var E=a[0].s,i=1;i<r;++i)a[i].s>E&&(E=a[i].s);var _=new rk(E+1),v=aa(n[c-1],_,0);if(v>t){var i=0,T=0,S=v-t,h=1<<S;for(a.sort(function(e,t){return _[t.s]-_[e.s]||e.f-t.f});i<r;++i){var p=a[i].s;if(_[p]>t)T+=h-(1<<v-_[p]),_[p]=t;else break}for(T>>=S;T>0;){var g=a[i].s;_[g]<t?T-=1<<t-_[g]++-1:++i}for(;i>=0&&T;--i){var C=a[i].s;_[C]==t&&(--_[C],++T)}v=t}return{t:new rM(_),l:v}},aa=function(e,t,n){return -1==e.s?Math.max(aa(e.l,t,n+1),aa(e.r,t,n+1)):t[e.s]=n},ao=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new rk(++t),i=0,r=e[0],a=1,o=function(e){n[i++]=e},s=1;s<=t;++s)if(e[s]==r&&s!=t)++a;else{if(!r&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(r),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(r);a=1,r=e[s]}return{c:n.subarray(0,i),n:t}},as=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},al=function(e,t,n){var i=n.length,r=r8(t+2);e[r]=255&i,e[r+1]=i>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var a=0;a<i;++a)e[r+a+4]=n[a];return(r+4+i)*8},ad=function(e,t,n,i,r,a,o,s,l,d,c){an(t,c++,n),++r[256];for(var u,E,_,v,T=ar(r,15),S=T.t,h=T.l,p=ar(a,15),g=p.t,C=p.l,O=ao(S),A=O.c,I=O.n,f=ao(g),N=f.c,m=f.n,D=new rk(19),R=0;R<A.length;++R)++D[31&A[R]];for(var R=0;R<N.length;++R)++D[31&N[R]];for(var L=ar(D,7),y=L.t,P=L.l,V=19;V>4&&!y[rW[V-1]];--V);var w=d+5<<3,b=as(r,rQ)+as(a,rJ)+o,M=as(r,S)+as(a,g)+o+14+3*V+as(D,y)+2*D[16]+3*D[17]+7*D[18];if(l>=0&&w<=b&&w<=M)return al(t,c,e.subarray(l,l+d));if(an(t,c,1+(M<b)),c+=2,M<b){u=rZ(S,h,0),E=S,_=rZ(g,C,0),v=g;var k=rZ(y,P,0);an(t,c,I-257),an(t,c+5,m-1),an(t,c+10,V-4),c+=14;for(var R=0;R<V;++R)an(t,c+3*R,y[rW[R]]);c+=3*V;for(var U=[A,N],B=0;B<2;++B)for(var H=U[B],R=0;R<H.length;++R){var W=31&H[R];an(t,c,k[W]),c+=y[W],W>15&&(an(t,c,H[R]>>5&127),c+=H[R]>>12)}}else u=r0,E=rQ,_=r2,v=rJ;for(var R=0;R<s;++R){var F=i[R];if(F>255){var W=F>>18&31;ai(t,c,u[W+257]),c+=E[W+257],W>7&&(an(t,c,F>>23&31),c+=rB[W]);var x=31&F;ai(t,c,_[x]),c+=v[x],x>3&&(ai(t,c,F>>5&8191),c+=rH[x])}else ai(t,c,u[F]),c+=E[F]}return ai(t,c,u[256]),c+E[256]},ac=/*#__PURE__*/new rU([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),au=/*#__PURE__*/new rM(0),aE=function(e,t,n,i,r,a){var o=a.z||e.length,s=new rM(i+o+5*(1+Math.ceil(o/7e3))+r),l=s.subarray(i,s.length-r),d=a.l,c=7&(a.r||0);if(t){c&&(l[0]=a.r>>3);for(var u=ac[t-1],E=u>>13,_=8191&u,v=(1<<n)-1,T=a.p||new rk(32768),S=a.h||new rk(v+1),h=Math.ceil(n/3),p=2*h,g=function(t){return(e[t]^e[t+1]<<h^e[t+2]<<p)&v},C=new rU(25e3),O=new rk(288),A=new rk(32),I=0,f=0,N=a.i||0,m=0,D=a.w||0,R=0;N+2<o;++N){var L=g(N),y=32767&N,P=S[L];if(T[y]=P,S[L]=y,D<=N){var V=o-N;if((I>7e3||m>24576)&&(V>423||!d)){c=ad(e,l,0,C,O,A,f,m,R,N-R,c),m=I=f=0,R=N;for(var w=0;w<286;++w)O[w]=0;for(var w=0;w<30;++w)A[w]=0}var b=2,M=0,k=_,U=y-P&32767;if(V>2&&L==g(N-U))for(var B=Math.min(E,V)-1,H=Math.min(32767,N),W=Math.min(258,V);U<=H&&--k&&y!=P;){if(e[N+b]==e[N+b-U]){for(var F=0;F<W&&e[N+F]==e[N+F-U];++F);if(F>b){if(b=F,M=U,F>B)break;for(var x=Math.min(U,F-2),G=0,w=0;w<x;++w){var K=N-U+w&32767,Y=T[K],j=K-Y&32767;j>G&&(G=j,P=K)}}}P=T[y=P],U+=y-P&32767}if(M){C[m++]=0x10000000|rK[b]<<18|rX[M];var X=31&rK[b],z=31&rX[M];f+=rB[X]+rH[z],++O[257+X],++A[z],D=N+b,++I}else C[m++]=e[N],++O[e[N]]}}for(N=Math.max(N,D);N<o;++N)C[m++]=e[N],++O[e[N]];c=ad(e,l,d,C,O,A,f,m,R,N-R,c),d||(a.r=7&c|l[c/8|0]<<3,c-=7,a.h=S,a.p=T,a.i=N,a.w=D)}else{for(var N=a.w||0;N<o+d;N+=65535){var $=N+65535;$>=o&&(l[c/8|0]=d,$=o),c=al(l,c+1,e.subarray(N,$))}a.i=o}return r7(s,0,i+r8(c)+r)},a_=function(e,t,n,i,r){if(!r&&(r={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new rM(a.length+e.length);o.set(a),o.set(e,a.length),e=o,r.w=a.length}return aE(e,null==t.level?6:t.level,null==t.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,i,r)},av=function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n},aT=function(e,t,n){for(var i=e(),r=e.toString(),a=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/\s+/g,"").split(","),o=0;o<i.length;++o){var s=i[o],l=a[o];if("function"==typeof s){t+=";"+l+"=";var d=s.toString();if(s.prototype){if(-1!=d.indexOf("[native code]")){var c=d.indexOf(" ",8)+1;t+=d.slice(c,d.indexOf("(",c))}else for(var u in t+=d,s.prototype)t+=";"+l+".prototype."+u+"="+s.prototype[u].toString()}else t+=d}else n[l]=s}return t},aS=[],ah=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},ap=function(e){(31!=e[0]||139!=e[1]||8!=e[2])&&ae(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=(e[10]|e[11]<<8)+2);for(var i=(t>>3&1)+(t>>4&1);i>0;i-=!e[n++]);return n+(2&t)},ag=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0};function aC(e,t){var n=ap(e);return n+8>e.length&&ae(6,"invalid gzip data"),at(e.subarray(n,-8),{i:2},t&&t.out||new rM(ag(e)),t&&t.dictionary)}var aO="undefined"!=typeof TextDecoder&&/*#__PURE__*/new TextDecoder;try{aO.decode(au,{stream:!0})}catch(e){}var aA=function(e){for(var t="",n=0;;){var i=e[n++],r=(i>127)+(i>223)+(i>239);if(n+r>e.length)return{s:t,r:r7(e,n-1)};r?3==r?t+=String.fromCharCode(55296|(i=((15&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536)>>10,56320|1023&i):1&r?t+=String.fromCharCode((31&i)<<6|63&e[n++]):t+=String.fromCharCode((15&i)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(i)}};"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var aI=e=>{if(/Android/i.test(e.navigator.userAgent)){let t;let n=e.addEventListener;e.addEventListener=(t,i,r)=>{n.call(e,"load"===t?"DOMContentLoaded":t,i,r)},Object.defineProperty(e,"onload",{set:n=>{t=n,e.addEventListener("DOMContentLoaded",t)},get:()=>t})}},af=(e=ei(),t=V())=>t.has(w.ADM_HTML)&&(e.isBanner()||e.isMrec()||e.isInLine()),aN=e=>{e.addEventListener("error",t=>{var n,i,r;e.parent.postMessage({title:"playable-error",content:{message:null!==(r=null==t?void 0:t.message)&&void 0!==r?r:null==t?void 0:null===(n=t.error)||void 0===n?void 0:n.message,stack:null==t?void 0:null===(i=t.error)||void 0===i?void 0:i.stack}},"*")}),e.addEventListener("unhandledrejection",t=>{e.parent.postMessage({title:"playable-error",content:{message:null==t?void 0:t.reason}},"*")})},am=e=>{let t=/<script[^>]*?src=(["'][^"']*?mraid.js[^>]*?["'])[^>]*?>(<\/script>)?/gi;return t.test(e)?e.replace(t,""):e},aD=((Ez={}).ADD_EVENT_LISTENER="addEventListener",Ez.CLOSE="close",Ez.CLOSE_STOREKIT_OVERLAY_VIEW="closeStoreKitOverlayView",Ez.EXIT_ALTERNATIVE="exitAlternative",Ez.GET_CURRENT_POSITION="getCurrentPosition",Ez.GET_DEFAULT_POSITION="getDefaultPosition",Ez.GET_EXPAND_PROPERTIES="getExpandProperties",Ez.GET_MAX_SIZE="getMaxSize",Ez.GET_PLACEMENT_TYPE="getPlacementType",Ez.GET_SCREEN_SIZE="getScreenSize",Ez.GET_STATE="getState",Ez.GET_VIEWABLE="getViewable",Ez.GRANT_REWARD="grantReward",Ez.IS_VIEWABLE="isViewable",Ez.OPEN="open",Ez.OPEN_STOREKIT_OVERLAY_VIEW="openStoreKitOverlayView",Ez.OPEN_STOREKIT_PRODUCT_VIEW="openStoreKitProductView",Ez.REMOVE_EVENT_LISTENER="removeEventListener",Ez.SET_ORIENTATION_PROPERTIES="setOrientationProperties",Ez.SHOW_ALTERNATIVE="showAlternative",Ez.NEXT="next",Ez),aR=((E$={}).CREATE_CALENDAR_EVENT="createCalendarEvent",E$.EXPAND="expand",E$.GET_CONSENT_ACCEPT_BUTTON_TEXT="getConsentAcceptButtonText",E$.GET_CONSENT_BODY_TEXT="getConsentBodyText",E$.GET_CONSENT_DENY_BUTTON_TEXT="getConsentDenyButtonText",E$.GET_CONSENT_REQUIRED="getConsentRequired",E$.GET_CONSENT_TITLE_TEXT="getConsentTitleText",E$.GET_ORIENTATION_PROPERTIES="getOrientationProperties",E$.GET_RESIZE_PROPERTIES="getResizeProperties",E$.GET_VERSION="getVersion",E$.PLAY_VIDEO="playVideo",E$.RESIZE="resize",E$.SET_EXPAND_PROPERTIES="setExpandProperties",E$.SET_RESIZE_PROPERTIES="setResizeProperties",E$.STORE_PICTURE="storePicture",E$.USE_CUSTOM_CLOSE="useCustomClose",E$),aL=()=>({[aR.CREATE_CALENDAR_EVENT]:()=>void 0,[aR.EXPAND]:()=>void 0,[aR.GET_CONSENT_ACCEPT_BUTTON_TEXT]:()=>void 0,[aR.GET_CONSENT_BODY_TEXT]:()=>void 0,[aR.GET_CONSENT_DENY_BUTTON_TEXT]:()=>void 0,[aR.GET_CONSENT_REQUIRED]:()=>void 0,[aR.GET_CONSENT_TITLE_TEXT]:()=>void 0,[aR.GET_ORIENTATION_PROPERTIES]:()=>void 0,[aR.GET_RESIZE_PROPERTIES]:()=>void 0,[aR.GET_VERSION]:()=>()=>"1.0",[aR.PLAY_VIDEO]:()=>void 0,[aR.RESIZE]:()=>void 0,[aR.SET_EXPAND_PROPERTIES]:()=>void 0,[aR.SET_RESIZE_PROPERTIES]:()=>void 0,[aR.STORE_PICTURE]:()=>void 0,[aR.USE_CUSTOM_CLOSE]:()=>()=>!1});const ay={V4_9_0:new k("4.9.0"),V4_9_3:new k("4.9.3"),V5_0_0:new k("5.0.0"),V5_0_1:new k("5.0.1"),V5_1_2:new k("5.1.2"),V5_2_1:new k("5.2.1")};var aP=((Eq=aP||{}).SILENT="silent",Eq.UN_SILENT="un-silent",Eq),aV=(e=y())=>{var t,n,i;return null!==(i=null===(n=e.getMraidExt())||void 0===n?void 0:null===(t=n.isSilent)||void 0===t?void 0:t.call(n))&&void 0!==i&&i},aw=(e=eT())=>e.filter(e=>{let t=e.getSceneType();return[eS.video,eS.endcard].includes(t)}).some(e=>e.muted),ab=()=>ed();const aM=(e=ed())=>e.getActivityEvents().some(e=>"silent"===e.eventType&&(e.name===aP.SILENT||e.name===aP.UN_SILENT)),ak=(e,t,n)=>{t||n||e.emit({type:"silent",event:aP.UN_SILENT})},aU=(e,t)=>{e.emit({type:"silent",event:t?aP.SILENT:aP.UN_SILENT})},aB=(e=y(),t=ab(),n=en(),i=aw())=>{let r=aV(e);if(n.getOperatingSystem()===B.iOS){var a;null===(a=e.getMraid())||void 0===a||a.removeEventListener("silentChange",aB),ak(t,i,r)}else aU(t,r)};var aH=()=>{let e=r.getInstance(),t=ez.getServiceIdentifier();return e.get(t)},aW=()=>ed(),aF=(e=aW(),t=aH())=>{let n=t.isViewable();e.emit({type:"viewability",event:n?nf.MAXIMIZED:nf.MINIMIZED})},ax=()=>{let e=r.getInstance(),t=rl.getServiceIdentifier();return e.get(t)},aG=((EZ={}).INFO="info",EZ.READY="ready",EZ.ERROR="error",EZ.STATE_CHANGE="stateChange",EZ.ORIENTATION_CHANGE="orientationChange",EZ.VIEWABLE_CHANGE="viewableChange",EZ.SIZE_CHANGE="sizeChange",EZ.SILENT_CHANGE="silentChange",EZ),aK=((EQ={}).CLOSE_BUTTON_WILL_SHOW="closeButtonWillShow",EQ),aY=class extends a{getEventCallbacks(e){return this.callbacks[e]=this.callbacks[e]||[],[...this.callbacks[e]]}updateEventCallbacks(e,t){this.callbacks[e]=t}addEventListener(e,t){if(!this.allowedMraidEvents.includes(e))return;let n=this.getEventCallbacks(e);this.updateEventCallbacks(e,[...n,t])}removeEventListener(e,t){if(this.allowedMraidEvents.includes(e)){if(t){let n=this.getEventCallbacks(e).filter(e=>e!==t);this.updateEventCallbacks(e,n)}else this.updateEventCallbacks(e,[])}}flushAllEventCallbacks(){this.allowedMraidEvents.forEach(e=>{this.updateEventCallbacks(e,[])})}init(){this.mraidEvents.forEach(e=>{this.mraidService.getMraid().addEventListener(e,(...t)=>{"silentChange"===e&&this.injectedHandleAdSilentMessage(),"viewableChange"===e&&this.injectedHandleAdViewabilityMessage(),this.getEventCallbacks(e).forEach(e=>{e(...t)})})})}triggerEvent(e,...t){"viewableChange"===e&&this.injectedPreloadService.isHTMLPreloading()||this.getEventCallbacks(e).forEach(e=>{e(...t)})}static getServiceIdentifier(){return"MraidEventsProxyServiceInterface"}constructor(e,t=y(),n=aB,i=aF,r=ax()){super(),this.mraidEvents=e,this.mraidService=t,this.injectedHandleAdSilentMessage=n,this.injectedHandleAdViewabilityMessage=i,this.injectedPreloadService=r,this.allowedMraidEvents=[...this.mraidEvents,...Object.values(aK)],this.callbacks={}}},aj=()=>{let e=r.getInstance(),t=aY.getServiceIdentifier();return e.get(t)},aX=()=>({[nr.SET_PRIVACY_BUTTON_VISIBLE]:g({isPrivacyButtonVisible:!0}),[nr.SET_PRIVACY_BUTTON_HIDDEN]:g({isPrivacyButtonVisible:!1}),[nr.OPEN_PRIVACY_URL]:()=>{var e,t;let n=en(),i=V(),r=n.getOperatingSystem(),a=r===B.Android||r===B.iOS&&n.getMraidVersion().isGreaterThanOrEqualTo(ay.V5_0_0),o=i.get(w.VUNGLE_PRIVACY_URL);nO({name:x.PRIVACY_CTA});let s=y();a?null===(e=s.getMraidBridgeExt())||void 0===e||e.openPrivacy(o):null===(t=s.getMraid())||void 0===t||t.open(o)},[nr.SET_PRIVACY_DRAWER_OPEN]:g({isPrivacyDrawerOpen:!0}),[nr.SET_PRIVACY_DRAWER_CLOSED]:g({isPrivacyDrawerOpen:!1}),[nr.TRIGGER_VIEWABLE_CHANGE]:e=>{let t=aj(),n=aH();e.isPrivacyDrawerOpen?n.setViewable(!1):n.resetViewable(),t.triggerEvent(aG.VIEWABLE_CHANGE,n.isViewable())}}),az=((EJ={}).LANDSCAPE="landscape",EJ.PORTRAIT="portrait",EJ.UNKNOWN="unknown",EJ),a$=((E0={}).LOAD_FAIL="LOAD_FAIL",E0.PLAY="PLAY",E0.CAN_PLAY="CAN_PLAY",E0.AUTO_PLAY_FAIL="AUTO_PLAY_FAIL",E0.PAUSE="PAUSE",E0.END="END",E0.TIME_UPDATE="TIME_UPDATE",E0.CLOSE="CLOSE",E0.DURATION_CHANGE="DURATION_CHANGE",E0.WAITING="WAITING",E0.SUSPEND="SUSPEND",E0.RETRY="RETRY",E0.MAXIMIZE="MAXIMIZE",E0.MINIMIZE="MINIMIZE",E0.RESET_CLOSE="RESET_CLOSE",E0),aq=((E1={}).LOADING="LOADING",E1.LOAD_FAIL_RETRY="LOAD_FAIL_RETRY",E1.PLAYING="PLAYING",E1.PAUSED="PAUSED",E1.AUTO_PLAY_FAIL="AUTO_PLAY_FAIL",E1.ENDED="ENDED",E1),aZ=((E2={}).UPDATE_PROGRESS="updateProgress",E2.EMIT_PROGRESS="emitProgress",E2.EMIT_LOAD="emitLoad",E2.EMIT_PLAY="emitPlay",E2.EMIT_PAUSE="emitPause",E2.EMIT_CLOSE="emitClose",E2.EMIT_CLOSE_FULLY_PLAYED="emitCloseFullyPlayed",E2.INCREMENT_LOOP_COUNT="incrementLoopCount",E2.REPORT_VIDEO_START="reportVideoStart",E2.SET_CAN_PLAY="setCanPlay",E2.CHECK_SUCCESS_FULL_VIEW_AD_REACHED="checkSuccessFulViewAdReached",E2.EMIT_DURATION_CHANGE="emitDurationChange",E2.EMIT_TIME_UPDATE="emitTimeUpdate",E2.EMIT_WAITING="emitWaiting",E2.EMIT_SUSPEND="emitSuspend",E2.UPDATE_CURRENT_TIME="updateCurrentTime",E2.RESET_CURRENT_TIME="resetCurrentTime",E2.RESET_CONTEXT="resetContext",E2.EMIT_CHECKPOINT_TPAT_EVENT="emitCheckpointTpatEvent",E2.EMIT_SCENE_EVENT="emitTrackingEvent",E2),aQ="video",aJ=e=>(null!=e?e:tJ()).interpreterMap.get(aQ),a0=(e=eo())=>({scene_id:e.getId(),scene_type:e.getSceneType()});const a1=(e,t,n)=>ed().getActivityEvents().filter(i=>{var r,a,o,s;return i.type===F.EVENT&&"observability"===i.eventType&&(null===(r=i.data)||void 0===r?void 0:r.name)===x.NEAR_CLOSE_BUTTON_CLICK&&(null===(a=i.data)||void 0===a?void 0:a.scene_type)===t&&(null===(o=i.data)||void 0===o?void 0:o.scene_id)===e&&(null===(s=i.data)||void 0===s?void 0:s.close_button_visible)===n}),a2=e=>{let t=document.querySelector(`#${rI}`);if(null===t)return!1;let{clientX:n,clientY:i}=e,{top:r,right:a,bottom:o,left:s}=t.getBoundingClientRect();return(n<s&&n>=s-30||n>a&&n<=a+30)&&i>=r-30&&i<=o+30||(i<r&&i>=r-30||i>o&&i<=o+30)&&n>=s-30&&n<=a+30},a3=e=>{let t={left:window.innerWidth-75,bottom:75};return e.clientX>=t.left&&e.clientY<=t.bottom},a5=(e,t,n,i)=>{a2(e)&&i({name:x.NEAR_CLOSE_BUTTON_CLICK,close_button_visible:!0,coordinate:e,scene_id:n,scene_type:t})},a4=(e,t,n,i)=>{a3(e)&&i({name:x.NEAR_CLOSE_BUTTON_CLICK,close_button_visible:!1,coordinate:e,scene_id:n,scene_type:t})},a6=(e,t=eo().getSceneType(),n=eo().getId(),i=nO)=>{if(void 0===e)return;let r={clientX:"touches"in e?e.touches[0].clientX:e.clientX,clientY:"touches"in e?e.touches[0].clientY:e.clientY};null===document.querySelector(`#${rI}`)?a4(r,t,n,i):a5(r,t,n,i)};var a8=(e,t)=>{let n=a1(e,t,!1),i=a1(e,t,!0),r=n.map(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.coordinate}).map(e=>({x:e.clientX,y:e.clientY})),a=i.map(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.coordinate}).map(e=>({x:e.clientX,y:e.clientY}));nO({name:x.NEAR_CLOSE_BUTTON_CLICK_COUNT,scene_id:e,scene_type:t,before_close_button_appears:n.length,after_close_button_appears:i.length,coordinates:r.concat(a)})};const a7=(e,t,n=nO)=>{let i;t===eS.video&&n({name:x.VIDEO_CLOSE,scene_id:e},1,["name","scene_id"]),t===eS.endcard&&(i=x.ENDCARD_CLOSE),t===K.lastChanceEndcard&&(i=x.LAST_CHANCE_ENDCARD_DURATION_END),i&&n({name:i,scene_id:e},1,["name","scene_id"])};var a9=(e,t,n=nO,i=a8,r=nH)=>{i(e,t),a7(e,t,n);let a=new Map([[eS.video,x.VIDEO_CLOSE_BUTTON_CLICK],[eS.endcard,x.ENDCARD_CLOSE_BUTTON_CLICK]]);a.set(K.lastChanceEndcard,x.LAST_CHANCE_ENDCARD_CLOSE_BUTTON_CLICK),a.has(t)&&n({name:a.get(t),scene_id:e},1,["name","scene_id"]),r(e,t)},oe=()=>{let e=r.getInstance(),t=tQ.getServiceIdentifier();return e.get(t)};const ot=()=>ed(),on=()=>ed();var oi=()=>({[t4.MUTE_SOUND]:()=>{oe().mute()},[t4.UN_MUTE_SOUND]:()=>{oe().unmute()},[t4.EMIT_MUTED]:()=>{let e=ot(),t=oe();e.emit({type:"video",event:t.isMuted()?nW.MUTE:nW.UNMUTE})},[t4.EMIT_VIDEO_ERROR]:(e,t)=>{ot().emit({type:"video",event:nW.ERROR,data:t})},[t4.CLOSE_VIDEO]:()=>{let e=aJ();null==e||e.send({type:a$.CLOSE});let t=a0();t&&a9(t.scene_id,t.scene_type)},[t4.CLOSE_VIDEO_CURRENT_SCENE]:()=>{let e=aJ();null==e||e.send({type:a$.CLOSE});let t=a0();t&&a9(t.scene_id,t.scene_type)},[t4.PAUSE_VIDEO]:()=>{let e=aJ();null==e||e.send({type:a$.PAUSE})},[t4.PLAY_VIDEO]:()=>{let e=aJ();null==e||e.send({type:a$.PLAY})},[t4.POSTROLL_VIEW]:()=>{ih(iT.POSTROLL_VIEW,!0)},[t4.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE]:()=>{nO({name:x.VIDEO_SKIP_TO_ENDCARD})}}),or=((E3={}).SHOW="SHOW",E3.HIDE="HIDE",E3),oa=((E5={}).SHOWING="SHOWING",E5.HIDDEN="HIDDEN",E5),oo=((E4={}).ON_LAST_CHANCE_ENDCARD_SHOW="onLastChanceEndcardShow",E4.ON_LAST_CHANCE_ENDCARD_HIDE="onLastChanceEndcardHide",E4);const os="last-chance-endcard",ol=e=>({id:null!=e?`${os}-${e}`:os,initial:oa.HIDDEN,context:{delay:0},states:{[oa.SHOWING]:{on:{[or.HIDE]:{target:oa.HIDDEN,actions:[oo.ON_LAST_CHANCE_ENDCARD_HIDE]}}},[oa.HIDDEN]:{on:{[or.SHOW]:{target:oa.SHOWING,actions:[oo.ON_LAST_CHANCE_ENDCARD_SHOW]}}}}}),od={actions:{[oo.ON_LAST_CHANCE_ENDCARD_SHOW]:()=>{let e=ng();e.emit({type:"observability",event:F.EVENT,data:{name:x.LAST_CHANCE_ENDCARD_START}}),e.emit({type:"observability",event:F.EVENT,data:{name:x.LAST_CHANCE_ENDCARD_DURATION_START}});let t=rT(),{scene:n}=ea.getValue();n&&t.emit({type:"scene-event",event:i$.LAST_CHANCE_ENDCARD_OPEN,data:{sceneId:n.getId(),sceneType:n.getSceneType()}})},[oo.ON_LAST_CHANCE_ENDCARD_HIDE]:()=>{let e=rT(),{scene:t}=ea.getValue();t&&e.emit({type:"scene-event",event:i$.LAST_CHANCE_ENDCARD_CLOSE,data:{sceneId:t.getId(),sceneType:t.getSceneType()}})}}};var oc=(e,t)=>{let n=null!=t?t:tJ(),i=null!=e?`${os}-${e}`:os;return n.interpreterMap.get(i)},ou=(e=a0,t=oc)=>{let n=t(e().scene_id);return null==n?void 0:n.state.matches(oa.SHOWING)},oE=(e=a0,t=ou)=>{let n=e();return{sceneId:t()?K.lastChanceEndcard:n.scene_id,sceneType:t()?K.lastChanceEndcard:n.scene_type}},o_=(e=oE)=>({[n5.EMIT_CLOSE_BUTTON_SHOW]:()=>{let{sceneId:t,sceneType:n}=e(),i=new Map([[eS.video,x.VIDEO_CLOSE_BUTTON_SHOW],[eS.endcard,x.ENDCARD_CLOSE_BUTTON_SHOW]]);i.set(K.lastChanceEndcard,x.LAST_CHANCE_ENDCARD_CLOSE_BUTTON_SHOW),i.has(n)&&nO({name:i.get(n),scene_type:n,scene_id:t},1,["name","scene_id"])},[n5.EMIT_CLOSE_BUTTON_CLICK]:()=>{let{sceneId:t,sceneType:n}=e();a9(t,n)},[n5.SET_CLOSE_BUTTON_VISIBLE]:g({isCloseButtonVisible:!0}),[n5.SET_CLOSE_BUTTON_HIDDEN]:g({isCloseButtonVisible:!1})}),ov=((E6=ov||{}).PROGRESS="progress",E6.VIDEO_LENGTH="videoLength",E6.SUCCESSFUL_VIEW_AD="successfulViewAd",E6.VIDEO_REACHED_DURATION="videoReachedDuration",E6),oT=(e,t=V())=>{let n=Number(t.get(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS));return!es(t.get(w.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))||Number.isNaN(n)||n>e?.8*e:.8*n},oS=(e,t)=>0===t?0:t-e<=.5?4:Math.floor(e/t*4);const oh=(e,t,n)=>{y().getMraidBridgeExt()&&t>0&&e>0&&on().emit({type:"videoViewed",event:ov.VIDEO_LENGTH,data:{currentTime:e,duration:t,seconds:n},fireOnlyOnce:!0})},op=(e,t)=>{el()&&e>=oT(t)&&on().emit({type:"videoViewed",event:ov.SUCCESSFUL_VIEW_AD,fireOnlyOnce:!0})},og=(e,t,n)=>{let i=oS(e,t),r=on();4===i&&r.emit({type:"videoViewed",event:ov.VIDEO_REACHED_DURATION,data:{currentTime:e,duration:t,seconds:n},fireOnlyOnce:!0})},oC=(e,t,n)=>{let i=on();i.getActivityEvents().some(e=>e.name===ov.PROGRESS&&e.data.seconds>=n)||i.emit({type:"videoViewed",event:ov.PROGRESS,data:{currentTime:e,duration:t,seconds:n}}),oh(e,t,n),op(e,t),og(e,t,n)},oO=(e,t)=>Math.floor(1e3*(t.isInLine()?Math.max(e,.1):e));var oA=(e,t,n=ed(),i=y(),r=ei())=>{var a,o,s,l;let d=i.getMraidBridgeExt();if(!d)return;let c=oO(null!==(s=null===(a=t.data)||void 0===a?void 0:a.currentTime)&&void 0!==s?s:0,r),u=Math.floor((null!==(l=null===(o=t.data)||void 0===o?void 0:o.duration)&&void 0!==l?l:0)*1e3),E=n.getActivityEvents().some(e=>{var t;return(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.name)===x.FORFEIT_REWARD});switch(t.event){case ov.PROGRESS:d.notifyEventValuePairEvent("videoViewed",c);break;case ov.VIDEO_REACHED_DURATION:d.notifyEventValuePairEvent("videoViewed",u);break;case ov.VIDEO_LENGTH:d.notifyEventValuePairEvent("videoLength",u);break;case ov.SUCCESSFUL_VIEW_AD:E||(nO({name:x.GRANT_REWARD}),d.notifySuccessfulViewAd(),ih(iT.REWARD_GRANTED,!0))}};const oI=[{currentTime:.1,timeout:0},{currentTime:2,timeout:2e3},{currentTime:3,timeout:1e3},{currentTime:4,timeout:1e3},{currentTime:5,timeout:1e3}],of=(e,t)=>[iT.CHECKPOINT_0,iT.CHECKPOINT_25,iT.CHECKPOINT_50,iT.CHECKPOINT_75,iT.CHECKPOINT_100][Math.floor(e/t*4)],oN=(e,t=nt())=>{let n=oI[e],i=oI.length-1;t.getNewTimer(n.timeout,()=>{ih(of(n.currentTime,5),!0,{currentTime:n.currentTime,endcardDuration:5}),oC(n.currentTime,5,Math.round(n.currentTime)),e!==i&&oN(e+1)}).start()};var om=()=>"true"===V().get(w.OM_ENABLED),oD=((E8={}).REMOVE_HANDLER="REMOVE_HANDLER",E8),oR=()=>{try{return window.OmidSessionClient.default}catch(e){return}},oL=class{init(e,t){var n,i;if(this.sessionClient=oR(),!this.sessionClient)return;let{AdSession:r,Partner:a,Context:o,VerificationScriptResource:s,AdEvents:l,MediaEvents:d}=this.sessionClient;if(t){let e=new s(t.vendorURL,t.vendorKey,t.params);this.verificationScriptResources=[e]}let c=en().getSdkVersion().toString();this.partner=new a(this.vungleData.partnerName,c||this.vungleData.partnerVersion),this.context=new o(this.partner,this.verificationScriptResources),void 0!==e&&(null===(n=this.context)||void 0===n||n.setVideoElement(e)),this.adSession=new r(this.context),(null===(i=this.adSession)||void 0===i?void 0:i.isSupported)&&this.adSession.isSupported()&&(this.adEvents=new l(this.adSession),this.mediaEvents=new d(this.adSession))}eventDrain(){this.funcsOnImpression.forEach(e=>{e()}),this.funcsOnImpression=[]}pushOrCallFunction(e){if(this.hasSessionStarted){e();return}this.funcsOnImpression.push(e)}onCtaClick(){this.pushOrCallFunction(()=>{var e;null===(e=this.mediaEvents)||void 0===e||e.adUserInteraction("click")})}constructor(){this.vungleData={partnerName:"Vungle",partnerVersion:"1.0"},this.hasSessionStartRequested=!1,this.initialized=!1,this.hasSessionStarted=!1,this.funcsOnImpression=[]}},oy=((E7=oy||{}).HTML_DISPLAY="htmlDisplay",E7.VIDEO="video",E7),oP=((E9=oP||{}).LOADED="loaded",E9),oV=((_e=oV||{}).SESSION_START="sessionStart",_e.SESSION_ERROR="sessionError",_e.SESSION_FINISH="sessionFinish",_e),ow=class extends oL{init(){if(!this.initialized)try{var e,t,n;this.initialized=!0,super.init(),null===(e=this.adSession)||void 0===e||e.setCreativeType(oy.HTML_DISPLAY),null===(t=this.adSession)||void 0===t||t.setImpressionType(oP.LOADED),null===(n=this.adSession)||void 0===n||n.registerSessionObserver(this.onSessionChange.bind(this))}catch(e){ed().emit({type:"error-logging",event:nR.EXCEPTION,data:{error:{message:"Unable to init omsdk banner and mrec"}}})}}onSessionStarted(){var e,t;this.hasSessionStartRequested&&this.initialized&&!this.hasSessionStarted&&(null===(e=this.adEvents)||void 0===e||e.impressionOccurred(),this.hasSessionStarted=!0,null===(t=this.adEvents)||void 0===t||t.loaded(null),this.eventDrain())}onSessionChange(e){if(e.type===oV.SESSION_START){this.hasSessionStartRequested=!0,this.onSessionStarted();return}e.type===oV.SESSION_FINISH&&ed().emit({type:"cta",event:oD.REMOVE_HANDLER})}static getServiceIdentifier(){return"OmsdkHtmlDisplayServiceInterface"}constructor(){super(),this.init()}},ob=()=>{if(om()){let e=ow.getServiceIdentifier(),t=new ow;r.getInstance().bind(e,t)}},oM=e=>{e.length>0&&(new Image().src=e)},ok=()=>ed();const oU=(e,t)=>`${e}_${t}`,oB=e=>{let t=e.split("_");return t[t.length-1]},oH=(e,t)=>{var n,i;if(!(null===(n=t.data)||void 0===n?void 0:n.trackingEventMapConfig.enabled))return;let r=oB(t.event),a=null===(i=t.data)||void 0===i?void 0:i.trackingEventMapConfig.events;if(!(null==a?void 0:a[r]))return;let o=a[r];null==o||o.forEach(e=>{oM(e)})};var oW=(e=!0,t=ok())=>{tg(()=>e?(t.addEventHandler("tracking-event",oH),()=>{t.removeEventHandler("tracking-event",oH)}):()=>{},[t,e])},oF=(e,t,n,i=!1,r=ok())=>{if(!t||!n||!n.enabled)return;let a=n.events;if(!(null==a?void 0:a[e]))return;let o=oU(t,e);r.emit({type:"tracking-event",event:o,fireOnlyOnce:i,data:{trackingEventMapConfig:n}})},ox=(e=a0,t=eo,n=t1)=>({[iH.ON_CREATIVE_VIEW]:()=>{let e=t();e&&[eS.endcard,eS.image].includes(e.getSceneType())&&oF(ep.CREATIVE_VIEW,e.getId(),e.getTrackingEventMapConfig(),!0)},[iH.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS]:()=>{aj().flushAllEventCallbacks()},[iH.DESTROY_IFRAME]:g({shouldRenderIFrame:!1}),[iH.INIT_CHECKPOINTS]:()=>{!ed().hasExistingEvent({type:"tpat",event:iT.CHECKPOINT_0})&&aH().isViewable()&&oN(0)},[iH.INIT_OMSDK_HTML_DISPLAY_SERVICE]:()=>{ob()},[iH.ON_ENDCARD_START]:()=>{nO({name:x.ENDCARD_START}),nO({name:x.ENDCARD_LOAD_START}),nO({name:x.ENDCARD_FIRST_CLICK_START})},[iH.ON_ENDCARD_CLOSE]:()=>{let t=e();t&&a9(t.scene_id,t.scene_type)},[iH.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW]:()=>{let e=aj();e.triggerEvent(aK.CLOSE_BUTTON_WILL_SHOW),e.removeEventListener(aK.CLOSE_BUTTON_WILL_SHOW)},[iH.ON_SHOW]:()=>{let e=n();null==e||e.send({type:t2.SHOW})}});const oG=er({isLastChanceEndcardOverlayShowing:!1},"LastChanceEndcardOverlayContext");var oK=((_t={}).SHOW_LAST_CHANCE_ENDCARD="showLastChanceEndcard",_t.CLOSE_LAST_CHANCE_ENDCARD="closeLastChanceEndcard",_t),oY=()=>({showLastChanceEndcard:()=>{let e=ea.getValue().scene;if(is(e)){let t=oc(e.getId());oG.setValue({isLastChanceEndcardOverlayShowing:!0}),null==t||t.send({type:or.SHOW})}},closeLastChanceEndcard:()=>{oG.setValue({isLastChanceEndcardOverlayShowing:!1});let e=ea.getValue().scene;if(is(e)){let t=oc(e.getId());null==t||t.send({type:or.HIDE})}}}),oj=class extends a{initializeForComponent(e,t,n){0!==t&&(this.storeKitOverlayService.canOpen()?e(!0):this.timerService.getNewTimer(n,()=>{this.initializeForComponent(e,t-1,n)}).start())}startAutoShow(e){var t;if(this.reset(),!e.enabled)return Promise.resolve();let n=this.timerService.getNewTimer(null!==(t=e.autoShowDelay)&&void 0!==t?t:5e3);return this.openTimer=n,(async()=>{let t;if(e.isAutoClose){var i;let n=null!==(i=e.autoCloseDelay)&&void 0!==i?i:5e3;t=this.timerService.getNewTimer(n,()=>{this.storeKitOverlayService.close()}),this.closeTimer=t}this.storeKitOverlayService.open({delayed:!0,fallback:n_.OFF}),await n.asPromise().then(()=>{this.storeKitOverlayService.open({delayed:!0,fallback:n_.OFF}),t&&t.start(),e.openCallback&&e.openCallback(),n.destroy()})})()}reset(){this.openTimer&&(this.openTimer.destroy(),this.openTimer=void 0),this.closeTimer&&(this.closeTimer.destroy(),this.closeTimer=void 0)}static getServiceIdentifier(){return"StoreKitOverlayAutoShowServiceInterface"}constructor(e,t=nt()){super(),this.storeKitOverlayService=e,this.timerService=t}},oX=()=>{let e=r.getInstance(),t=oj.getServiceIdentifier();if(e.has(t))return e.get(t)},oz=((_n={}).RESET_AUTO_SHOW_OVERLAY_SERVICE="resetAutoShowOverlayService",_n),o$=(e=oX)=>({resetAutoShowOverlayService:()=>{let t=e();null==t||t.reset()}}),oq=()=>d({},iB(),aX(),oi(),np(),o$(),n2(),ni(),ne(),o_(),ox(),oY()),oZ=()=>({isPrivacyButtonVisible:!1,isPrivacyDrawerOpen:!1,isCloseButtonVisible:!1,shouldRenderIFrame:!0}),oQ=class{convertScene(e){let t=e.getTransitions(),n={[e.getId()]:{entry:[],exit:[],on:{}}};return e.getEntryActions().forEach(t=>{n[e.getId()].entry.push(t.name)}),e.getExitActions().forEach(t=>{n[e.getId()].exit.push(t.name)}),t.forEach(t=>{let i=t.actions.map(e=>e.name),{cond:r}=t;t.scene?n[e.getId()].on[t.name]={actions:i,target:t.scene.getId(),cond:r}:n[e.getId()].on[t.name]={actions:i,cond:r}}),this.removeFalsyValues(n)}convertScenes(e){let t={};return e.forEach(e=>{Object.assign(t,this.convertScene(e))}),t}removeFalsyValues(e){return Object.keys(e).forEach(t=>{e[t]&&"object"==typeof e[t]?(this.removeFalsyValues(e[t]),0===Object.keys(e[t]).length&&delete e[t]):e[t]||delete e[t]}),e}},oJ=()=>{let e=new oQ,t=eT(),n=e.convertScenes(t);return{id:"ad",initial:t[0].getId(),states:n,context:oZ()}},o0=((_i=o0||{}).DECODING_ERROR="decoding_error",_i),o1=(e=y(),t=ei())=>{var n,i,r,a,o,s;return null!==(s=null!==(o=null===(i=e.getMraidExt())||void 0===i?void 0:null===(n=i.getConsentRequired)||void 0===n?void 0:n.call(i))&&void 0!==o?o:null===(a=e.getMraid())||void 0===a?void 0:null===(r=a.getConsentRequired)||void 0===r?void 0:r.call(a))&&void 0!==s&&s&&!t.isBanner()},o2=class{decodeAndUnzip(e){try{let t=Uint8Array.from(atob(e),e=>e.charCodeAt(0)),n=aC(t),i=String.fromCharCode.apply(null,n).replace(/"stateMachine":/g,'"statemachine":');return JSON.parse(i)}catch(e){this.freeFormReportingService.emit({type:"free-form",event:o0.DECODING_ERROR});return}}getAdExperience(e=o1(this.mraidService,this.placementTypeService)){var t,n;if(!this.adExperienceCache){let n=null!==(t=this.tokenService.get(w.AD_EXPERIENCE))&&void 0!==t?t:"",i=this.decodeAndUnzip(n);this.adExperienceCache=this.addGDPRSceneIfConsentRequired(i,e)}return null!==(n=this.adExperienceCache)&&void 0!==n?n:{components:{},statemachine:{id:"ad",initial:"closed",states:{}}}}addGDPRSceneIfConsentRequired(e,t=o1(this.mraidService,this.placementTypeService)){if(e&&t){let t=e.statemachine.initial;e.statemachine.states.gdpr={on:{[t6.NEXT]:{target:t}}},e.statemachine.initial=ev}return e}getAdMachineConfig(){let e=this.getAdExperience();return O(d({},null==e?void 0:e.statemachine),{id:"ad"})}getSceneData(){let e=this.getAdExperience();return(null==e?void 0:e.components)?Object.entries(e.components).map(([e,t])=>O(d({},t),{id:e})):[]}constructor(e=V(),t=ed(),n=y(),i=ei()){this.tokenService=e,this.freeFormReportingService=t,this.mraidService=n,this.placementTypeService=i}},o3=(e=new o2,t=eT())=>{let n=e.getAdMachineConfig();return n.states=n.states||{},t.forEach(e=>{let t=e.getId();n.states[t]=n.states[t]||{on:{},entry:[],exit:[]},e.getTransitions().forEach(e=>{if(n.states[t].on){var i,r,a;let o=e.name,s=null===(i=e.scene)||void 0===i?void 0:i.getId(),l=null===(r=n.states[t].on)||void 0===r?void 0:r[o],c={actions:Array.from(new Set([...Array.from(null!==(a=null==l?void 0:l.actions)&&void 0!==a?a:[]),...e.actions.map(e=>e.name)])),cond:(null==l?void 0:l.cond)?l.cond:e.cond};s&&(c.target=s),n.states[t].on[o]=d({},null!=l?l:{},c)}}),n.states[t].entry||(n.states[t].entry=[]),n.states[t].entry.push(...e.getEntryActions().map(e=>e.name)),n.states[t].exit||(n.states[t].exit=[]),n.states[t].exit.push(...e.getExitActions().map(e=>e.name))}),O(d({},n),{context:d({},oZ(),n.context)})},o5=(e=V())=>[e.has(w.AD_EXPERIENCE)?o3():oJ(),{actions:d({},oq())}];const o4=(e=tJ())=>{let t=e.machineMap.get("ad");if(t)return t.machine;let[n,i]=o5();return e.createMachine(n,i)};var o6=(e=tJ())=>e.interpret(o4(e)),o8=()=>({width:window.innerWidth,height:window.innerHeight}),o7=()=>O(d({},o8()),{useCustomClose:!1,isModal:!1}),o9=()=>d({x:0,y:0},o8());const se=new k("5.0.0");var st=(e=en())=>e.getMraidVersion().isGreaterThanOrEqualTo(se);const sn=(e=ed())=>e.getActivityEvents().filter(e=>{var t;return e.type===F.EVENT&&"observability"===e.eventType&&(null===(t=e.data)||void 0===t?void 0:t.name)===x.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND}).length>=2;var si=async(e,t=nX(),n=sn(),i=st(),r=nO)=>{if(n)return!1;if(r({name:x.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND}),null==t||t.open(),i)try{await rE(()=>null==t?void 0:t.isOpen(),e)}catch(e){return!1}return!0},sr=()=>({[aD.OPEN_STOREKIT_OVERLAY_VIEW]:(e,t=nJ,n=nS)=>async()=>{if(!t())return!1;let e=n();if(!e.isIdle())return!1;if(e.isOpen())return!0;e.open({fallback:n_.OFF});try{return await rE(()=>e.isOpen(),3e3),!0}catch(e){return!1}},[aD.CLOSE_STOREKIT_OVERLAY_VIEW]:(e,t=nJ,n=nS)=>async()=>{if(!t())return!1;let e=n();if(!e.isOpen())return!0;e.close();try{return await rE(()=>!e.isOpen(),3e3),!0}catch(e){return!1}},[aD.OPEN_STOREKIT_PRODUCT_VIEW]:(e,t=nE,n=nX,i=si)=>async()=>{if(!t())return!1;let e=n();return null!=e&&!!e.isOpen()||(null==e||e.open(),await i(3e3))}}),sa=e=>(null!=e?e:ed()).getActivityEvents().some(e=>e.type===F.EVENT&&"observability"===e.eventType&&e.data.name===x.ENDCARD_CLICK),so=()=>{if(af())return!1;let e=en();if(e.getOperatingSystem()===B.Android||e.getOperatingSystem()===B.Unknown)return!1;let t=new k("6.12.0");return!e.getSdkVersion().isLessThanOrEqualTo(t)},ss=((_r=ss||{}).DOWNLOAD_BUTTON_CTA="DOWNLOAD_BUTTON_CTA",_r.ENDCARD_CTA="ENDCARD_CTA",_r.LAST_CHANCE_ENDCARD_CTA="LAST_CHANCE_ENDCARD_CTA",_r.PERSISTENT_CTA="PERSISTENT_CTA",_r);const sl=()=>ed(),sd=()=>ed();var sc=(_a=e=>{sl().emit({type:"cta",event:ss.ENDCARD_CTA,data:{ctaUrl:e}})},t=!1,function(...n){!t&&(e||(_a.apply(this,n),t=!0,e=window.setTimeout(()=>{t=!1,e=void 0},300)))}),su=e=>!!e&&!![eS.video,eS.image,eS.endcard].includes(e.getSceneType())&&e.getLastChanceEndcardConfig().enabled,sE=()=>d({[aD.CLOSE]:(e,t=o6)=>()=>t().send(t6.CLOSE),[aD.ADD_EVENT_LISTENER]:()=>(e,t,n=aj)=>{n().addEventListener(e,t)},[aD.EXIT_ALTERNATIVE]:(e,t=o6,n=a9,i=su)=>()=>{if(oG.getValue().isLastChanceEndcardOverlayShowing)return;let e=eo(),r={type:t6.NEXT};e&&(n(e.getId(),e.getSceneType()),i(e)&&(r={type:t6.LAST_CHANCE_ENDCARD})),t().send(r)},[aD.IS_VIEWABLE]:(e,t=aH,n=ax)=>()=>!n().isHTMLPreloading()&&t().isViewable(),[aD.GET_VIEWABLE]:(e,t=aH,n=ax)=>()=>!n().isHTMLPreloading()&&t().isViewable(),[aD.GET_CURRENT_POSITION]:()=>o9,[aD.GET_DEFAULT_POSITION]:()=>o9,[aD.GET_EXPAND_PROPERTIES]:()=>o7,[aD.GET_MAX_SIZE]:()=>o8,[aD.GET_PLACEMENT_TYPE]:e=>e.getPlacementType.bind(e),[aD.GET_SCREEN_SIZE]:()=>o8,[aD.GET_STATE]:e=>e.getState.bind(e),[aD.OPEN]:(e,t=af,n=sa,i=sc)=>t()?e=>n()?i(e):null:e=>{i(e,"CTA")},[aD.REMOVE_EVENT_LISTENER]:()=>(e,t,n=aj)=>{n().removeEventListener(e,t)},[aD.SET_ORIENTATION_PROPERTIES]:(e,t=so)=>t()?e.setOrientationProperties.bind(e):()=>null,[aD.SHOW_ALTERNATIVE]:(e,t=o6)=>e=>{oG.getValue().isLastChanceEndcardOverlayShowing||t().send(e)},[aD.NEXT]:(e,t=o6)=>e=>{oG.getValue().isLastChanceEndcardOverlayShowing||t().send(e)},[aD.GRANT_REWARD]:(e,t=y,n=nO,i=ih)=>{let r=t().getMraidBridgeExt();return n({name:x.GRANT_REWARD}),null==r||r.notifySuccessfulViewAd(),i(iT.REWARD_GRANTED,!0),()=>null}},sr()),s_=()=>O(d({},sE(),aL()),{supports:()=>e=>Object.values(aD).includes(e)}),sv=class{getProxyMraid(){return new Proxy(this.originalMraid,this.getProxyHandler())}constructor(e=y().getMraid(),t=s_(),n=nO){this.originalMraid=e,this.commandHandlers=t,this.injectedEmitObservabilityEvent=n,this.getProxyHandler=()=>{let{commandHandlers:e,injectedEmitObservabilityEvent:t}=this;return{get:(n,i)=>e[i]?e[i](n):n[i]?n[i]:(t({name:x.UNKNOWN_MRAID_COMMAND,value:i}),()=>!1)}}}},sT=e=>{e.addEventListener("load",()=>{nO({name:x.ENDCARD_LOAD_COMPLETE,scene_id:eo().getId()})})},sS=e=>{let t=/(?:window\.)?(?:top\.|parent\.)?(?:window\.)?(?:location(?:\.href)?)\s*=\s*([^;]+?)(;|\s*<\/script>|$)/g;return t.test(e)?e.replace(t,(e,t,n)=>`mraid.open(${t})${n}`):e},sh=()=>"ontouchstart"in document.documentElement==!0?"touchstart":"click";const sp=(e,t)=>{if(e instanceof Element){var n;let i=null!==(n=e.getAttribute("id"))&&void 0!==n?n:"";return!t.includes(i)&&("body"===e.tagName.toLowerCase()||sp(e.parentElement,t))}return!0},sg=[eC,rI,rN,rf],sC=(e,t,n=nO)=>{sp(e.target,sg)&&n({name:x.INTERACTION_AFTER_CLOSE_BUTTON_VISIBLE,value:null!==document.querySelector(`#${rI}`),scene_id:t},1,["name","scene_id"])},sO=(e,t,n=nO)=>{sp(e.target,sg)&&n({name:x.CLICK_OCCURRED,scene_id:t})},sA=(e,t,n=nO)=>{sp(e.target,sg)&&t===eS.video&&n({name:x.FIRST_INTERACTION_ON_VIDEO_PAGE},1)},sI=(e,t,n,i=nO)=>{sp(e.target,sg)&&[eS.endcard,eS.image].includes(t)&&e.isTrusted&&(i({name:x.ENDCARD_FIRST_CLICK,scene_id:n},1,["name","scene_id"]),i({name:x.ENDCARD_CLICK,scene_id:n}))},sf=(e,t=!1,n=eo,i=nO)=>{var r,a;let o=t?K.lastChanceEndcard:null===(r=n())||void 0===r?void 0:r.getSceneType(),s=t?K.lastChanceEndcard:null===(a=n())||void 0===a?void 0:a.getId();sC(e,s,i),sO(e,s,i),sA(e,o,i),sI(e,o,s,i),a6(e,o,s)};var sN=(e,t=!0,n=eo,i=nO,r=sf)=>{tg(()=>{if(!t)return()=>{};let a=t=>{r(t,e,n,i)};return document.body.addEventListener(sh(),a,!0),()=>{document.body.removeEventListener(sh(),a,!0)}},[e,t])},sm=(e,t,n,i=sf,r=oF)=>{e&&e.document.addEventListener(sh(),e=>{(null==e?void 0:e.isTrusted)&&r(ep.CLICK_THROUGH,n,t),i(e,!1)},!0)},sD=e=>e.replace(/(top\.window\.open|top\.mraid\.open|parent\.window\.open|parent\.mraid\.open)\((.*?)\)/g,"mraid.open($2)"),sR=()=>{let e=r.getInstance(),t=eX.getServiceIdentifier();return e.get(t)},sL=((_o=sL||{})[_o.MUTE=0]="MUTE",_o[_o.UNMUTE=1]="UNMUTE",_o),sy=class{interceptAudioContext(){let e=this;function t(){let t=new e.originAudioContext,n=t.createGain();return n.gain.setValueAtTime(e.shouldMute?0:1,t.currentTime),n.connect(t.destination),Object.defineProperty(t,"destination",{get:()=>n,configurable:!0}),e.instances.set(t,n),t}t.prototype=this.originAudioContext.prototype,Object.defineProperty(this.targetWindow,"AudioContext",{value:t,configurable:!0})}muteAll(){this.shouldMute=!0,this.instances.forEach((e,t)=>{e.gain.setValueAtTime(0,t.currentTime)})}unmuteAll(){this.shouldMute=!1,this.instances.forEach((e,t)=>{e.gain.setValueAtTime(1,t.currentTime)})}constructor(e,t){this.instances=new Map,this.targetWindow=e,this.originAudioContext=e.AudioContext||e.webkitAudioContext,this.shouldMute=t,this.interceptAudioContext()}},sP=((_s={}).AUDIO="audio",_s.VIDEO="video",_s.IFRAME="iframe",_s.DEFAULT="default",_s),sV=e=>{let t=e.nodeName.toLowerCase();switch(t){case"audio":case"video":case"iframe":return t;default:return"default"}},sw=class{isNodeAllowed(e){return[sP.AUDIO,sP.VIDEO].includes(sV(e))}preventSoundResume(e){Object.defineProperty(e,"muted",{set:()=>{},get:()=>!0,configurable:!0})}mute(e,t=!0){(!t||this.isNodeAllowed(e))&&(e.muted=!0,this.preventSoundResume(e),this.storeElement(e))}unmute(e,t=!0){if(t&&!this.isNodeAllowed(e))return;let n=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"muted");n&&Object.defineProperty(e,"muted",n),e.muted=!1,this.storeElement(e)}muteAll(){this.instances.forEach(e=>{this.mute(e,!1)}),Array.from(this.targetWindow.document.querySelectorAll("audio, video")).forEach(e=>{this.mute(e,!1)})}unmuteAll(){this.instances.forEach(e=>{this.unmute(e,!1)})}storeElement(e){this.instances.has(e)||this.instances.add(e)}constructor(e){this.targetWindow=e,this.instances=new Set}};class sb{interceptStaticIframes(){Array.from(this.targetWindow.document.querySelectorAll("iframe")).forEach(e=>{this.handleIframeNode(e)})}doMuteAllIfMute(){this.mute&&this.muteAllMedias()}unmuteAllMedias(){this.mute=!1,this.silencers.forEach(e=>e.unmuteAll())}muteAllMedias(){this.mute=!0,this.silencers.forEach(e=>e.muteAll())}handleIframeNode(e){var t;sb.isWindowAccessible(e.contentWindow)&&sb.interceptAllMediaElements(e.contentWindow,this.mute);let n=!sb.hasIframeCrossOriginUrl(e);this.injectedEmitObservabilityEvent({name:x.NESTED_IFRAME_TYPE,scene_id:null===(t=this.injectedGetCurrentScene())||void 0===t?void 0:t.getId(),nested_iframe_type:n?ny.NESTED_IFRAME_WITHOUT_CORS:ny.NESTED_IFRAME_WITH_CORS})}handleNewNode(e){sV(e)===sP.IFRAME&&this.handleIframeNode(e),this.mute?this.silencers.forEach(t=>{var n;return null===(n=t.mute)||void 0===n?void 0:n.call(t,e)}):this.silencers.forEach(t=>{var n;return null===(n=t.unmute)||void 0===n?void 0:n.call(t,e)})}interceptCreateElement(){let e=this.targetWindow.document.createElement;Object.defineProperty(this.targetWindow.document,"createElement",{value:(t,...n)=>{let i=e.call(this.targetWindow.document,t,...n);return this.handleNewNode(i),i},configurable:!0})}observeDomMutation(){new this.targetWindow.MutationObserver(e=>{e.forEach(e=>{let{addedNodes:t}=e;for(let e=0;e<t.length;e+=1)this.handleNewNode(t[e])})}).observe(this.targetWindow.document,{subtree:!0,childList:!0})}constructor(e,t,n=!1,i=nO,r=eo){this.targetWindow=e,this.silencers=t,this.mute=n,this.injectedEmitObservabilityEvent=i,this.injectedGetCurrentScene=r,this.interceptCreateElement(),"complete"===this.targetWindow.document.readyState?(this.doMuteAllIfMute(),this.observeDomMutation()):this.targetWindow.document.addEventListener("DOMContentLoaded",()=>{this.doMuteAllIfMute(),this.observeDomMutation()}),this.interceptStaticIframes(),this.doMuteAllIfMute()}}sb.instances=new Map,sb.hasIframeCrossOriginUrl=e=>{var t;return null===(t=e.src)||void 0===t?void 0:t.toLowerCase().startsWith("http")},sb.isWindowAccessible=e=>{try{return!!(null==e?void 0:e.document)}catch(e){return!1}},sb.interceptAllMediaElements=(e,t,n=nO,i=eo)=>{let r=new sb(e,[new sw(e),new sy(e,t)],t,n,i);sb.instances.set(e,r)},sb.muteAllMedias=()=>{sb.instances.forEach(e=>{sb.isWindowAccessible(e.targetWindow)&&e.muteAllMedias()})},sb.unmuteAllMedias=()=>{sb.instances.forEach(e=>{sb.isWindowAccessible(e.targetWindow)&&e.unmuteAllMedias()})};var sM=(e,t)=>{Object.defineProperty(e,t,{configurable:!1,enumerable:!0,value:e[t],writable:!1})},sk=e=>{let t=e.addEventListener;e.addEventListener=(n,i,r)=>{"beforeunload"!==n&&t.call(e,n,i,r)}},sU=(e,t,n)=>{if(e)return t;let i=new URLSearchParams(window.location.search);return t||i.has(n)},sB=(e,t)=>{e.document.addEventListener("click",e=>{var n;let i=e.target.closest("a");if(i){if(!e.isTrusted){e.preventDefault();return}(null===(n=i.href)||void 0===n?void 0:n.toLowerCase().startsWith("http"))&&(e.preventDefault(),t(i.href))}},{capture:!0})},sH=class extends rD{getIframeHTML(){return this.scene.isAlternative()?this.decodeHtml(this.scene.endcardContent,!1):this.decodeHtml(this.scene.endcardContent,this.scene.compressionType===i1.GZIP)}getCloseButtonConfig(){let e=this.scene.getCloseButtonConfig(),t=this.scene instanceof i3&&1===this.scene.index,n=O(d({},e),{delay:!t&&this.globalTimerService.isEnabled()?this.globalTimerService.getEndcardPageCloseButtonDelaySeconds():e.delay});return(sU(!0,es("false"),"VIDEO_TIMER_VISIBLE_ENDCARD_TIMER_NOT_VISIBLE")||sU(!0,es("false"),"BOTH_VIDEO_AND_ENDCARD_TIMERS_NOT_VISIBLE"))&&(n.countdown=!1),(sU(!0,es("false"),"VIDEO_TIMER_NOT_VISIBLE_ENDCARD_TIMER_VISIBLE")||sU(!0,es("false"),"VIDEO_ENDCARD_TIMERS_BOTH_VISIBLE"))&&(n.countdown=!0),n}initMraidInIframeForFullscreen(e){if(!e)return;let t=this.proxyMraidService.getProxyMraid();e.mraid=t,sM(e,"mraid"),e.open=e=>t.open(e)}initMraidInIframeForNonFullscreen(e){let t=e.contentWindow;t.mraid=this.proxyMraidService.getProxyMraid(),sM(t,"mraid"),t.open=()=>null;let n=e=>{if(e.isTrusted){var i,r,a;t.document.removeEventListener("click",n,!0),t.open=e=>sc(e);let o=e.target.closest("a");(null==o?void 0:null===(i=o.href)||void 0===i?void 0:i.startsWith("http"))?e.preventDefault():null===(r=(a=e.target).click)||void 0===r||r.call(a)}},i=()=>{var e;(null===(e=t.document)||void 0===e?void 0:e.readyState)!=="loading"?t.document.addEventListener("click",n,{capture:!0}):requestAnimationFrame(i)};requestAnimationFrame(i)}injectMethodToIframe(e){af()?this.initMraidInIframeForNonFullscreen(e):this.initMraidInIframeForFullscreen(e.contentWindow)}decompressEncodedEndcard(e){let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e+=1)n[e]=t.charCodeAt(e);return(function(e,t){if(aO)return aO.decode(e);var n,i=aA(e),r=i.s,n=i.r;return n.length&&ae(8),r})(aC(n)).toString()}decodeHtml(e,t){try{let n;n=t&&this.placementTypeService.isFullscreen()?this.decompressEncodedEndcard(e):U(e);let i=am(n),r=sS(i);return sD(r)}catch(e){this.errorLoggingService.emit({type:"error-logging",event:nR.EXCEPTION,data:{error:{message:"Failed to decode endcard"}}});return}}addEndcardClickListener(e){if(this.scene.isAlternative())return;let t=this.scene;sm(e,t.getTrackingEventMapConfig(),t.getId())}updateIframeContent(e,t){if(null==e?void 0:e.current){var n;let i=null===(n=e.current)||void 0===n?void 0:n.contentWindow,r=null==i?void 0:i.document;aI(i),sk(i),this.injectMethodToIframe(e.current);try{r.open(),aN(i),sT(i),this.addEndcardClickListener(i),r.write('<base target="_parent"><style>body {margin: 0;padding: 0;overflow: hidden;}</style>'+(null!=t?t:"")),r.close(),sB(i,sc),sb.interceptAllMediaElements(i,this.muteService.isMuted())}catch(e){this.errorLoggingService.emit({type:"error-logging",event:nR.EXCEPTION,data:{error:{message:"Failed to write endcard to iframe"}}})}}}constructor(e,t=sl(),n=ec(),i=en(),r=ei(),a=new sv,o=sR(),s=oe()){super(),this.scene=e,this.ctaReportingService=t,this.errorLoggingService=n,this.environmentService=i,this.placementTypeService=r,this.proxyMraidService=a,this.globalTimerService=o,this.muteService=s}},sW=function(e,t,n=tJ()){let i=tO(()=>n.createMachine(e,t),[e]),r=tq(i.initialState),[a,o]=tO(()=>{let e=n.interpret(i),t=e.subscribe(e=>{r.value=e});return[e,t]},[i]);return tg(()=>(a.status!==c.Running&&a.start(),()=>{o.unsubscribe(),a.stop()}),[a]),[r,a.send,a,e]},sF=((_l={}).SHOW="ASOD_SHOW",_l.CLOSE="ASOD_CLOSE",_l),sx=((_d={}).INITIAL="ASOD_INITIAL",_d.SHOWN="ASOD_SHOWN",_d),sG=((_c={}).SET_DELAY="ASOD_SET_DELAY",_c.OPEN_APP_STORE="ASOD_OPEN_APP_STORE",_c),sK=class extends a{fireStoreKitOverlayWithDelay(e){let t=nS();new R(e,()=>{(null==t?void 0:t.canOpen())&&(null==t||t.open())}).start()}openStoreViewWithDelay(e){if(nz()&&nJ()){this.fireStoreKitOverlayWithDelay(e);return}let t=nt().getNewTimer(e,()=>{let e=nX();null==e||e.open(!1)});t.start(),this.timer=t}reset(){var e;null===(e=this.timer)||void 0===e||e.destroy()}static getServiceIdentifier(){return"AppStoreOnDelayServiceInterface"}},sY=()=>{let e=r.getInstance(),t=sK.getServiceIdentifier();return e.get(t)};const sj=e=>({id:`app-store-on-delay-${e}`,initial:sx.INITIAL,context:{delay:0},states:{[sx.INITIAL]:{on:{[sF.SHOW]:{target:sx.SHOWN,actions:[sG.SET_DELAY]}}},[sx.SHOWN]:{entry:[sG.OPEN_APP_STORE]}}}),sX={actions:{[sG.SET_DELAY]:g({delay:(e,t)=>t.delay}),[sG.OPEN_APP_STORE]:e=>{sY().openStoreViewWithDelay(e.delay)}}};var sz=(e,t,n=!0,i=!0)=>{let[,r]=sW(sj(e),sX);tg(()=>t.enabled&&n&&i?(r({type:sF.SHOW,delay:t.autoShowDelay}),()=>{sY().reset()}):()=>{},[n,i])},s$=(e,t=!0,n=oX(),i=nS())=>{let r=tq(null==i?void 0:i.canOpen()),a=tq(!1),o=()=>e.enabled&&r.value&&t&&!a.value;tg(()=>(o()&&(null==n||n.startAutoShow(e),a.value=!0),()=>{}),[t,r.value,a.value]),tg(()=>{e.enabled&&(null==n||n.initializeForComponent(e=>{r.value=e},10,500))},[]),tg(()=>a.value?()=>null==n?void 0:n.reset():()=>{},[])},sq=(e=oe())=>{tg(()=>{e.isMuted()?sb.muteAllMedias():sb.unmuteAllMedias()},[e.getMutedSignal().value])};_B="oAV7cW_endcard",_H="oAV7cW_endcardIframe";var sZ=({sendAdEvent:e,htmlService:t,scene:n})=>{let i=tC(null),[r,a]=(td=1,function(e,t,n){var i=tp(ta++,2);if(i.t=e,!i.__c&&(i.__=[tD(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=to,!to.u)){var r=function(e,t,n){if(!i.__c.__H)return!0;var r=i.__c.__H.__.filter(function(e){return!!e.__c});if(r.every(function(e){return!e.__N}))return!a||a.call(this,e,t,n);var o=i.__c.props!==e;return r.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}}),a&&a.call(this,e,t,n)||o};to.u=!0;var a=to.shouldComponentUpdate,o=to.componentWillUpdate;to.componentWillUpdate=function(e,t,n){if(this.__e){var i=a;a=void 0,r(e,t,n),a=i}o&&o.call(this,e,t,n)},to.shouldComponentUpdate=r}return i.__N||i.__}(tD,!1));return tg(()=>{r&&requestAnimationFrame(()=>{let e=t.getIframeHTML(n);t.updateIframeContent(i,e)})},[r]),sq(),/*#__PURE__*/rg("iframe",{id:"endcardIframe",title:"endcard",onLoad:()=>{e({type:t6.PRIVACY_LOGO_SHOW}),a(!0)},ref:i,className:_H,allow:"autoplay",scrolling:"no",frameBorder:"0"})},sQ=(...e)=>e.filter(Boolean).join(" "),sJ=(e,t)=>{tg(()=>{let n=window.setInterval(()=>{var i;(null===(i=e.current)||void 0===i?void 0:i.complete)&&(t({type:t6.PRIVACY_LOGO_SHOW}),window.clearInterval(n))},100);return()=>{window.clearInterval(n)}},[])},s0=((_u=s0||{}).FSC="FSC",_u),s1=class{clickHandler(e){this.reportingService.emit({type:"fsc",event:s0.FSC,data:{ctaUrl:e}})}constructor(e=sd()){this.reportingService=e}};_W="_7pzQ5q_hidden",_F="_7pzQ5q_overlayCta";const s2=tU(!1),s3=(e,t)=>{s2.value=t.event===nf.MINIMIZED},s5=e=>e?`${e}-fullscreen-overlay`:"fullscreen-overlay";var s4=({config:e,ctaUrl:t,service:n=new s1,reportingService:i=aW(),children:r})=>(tg(()=>(i.addEventHandler("viewability",s3),()=>{i.removeEventHandler("viewability",s3)}),[]),/*#__PURE__*/rg(e2,{children:[e.enabled&&/*#__PURE__*/rg("button",{className:sQ(_F,s2.value?_W:""),type:"button",id:s5(e.id),"aria-label":"fsc","aria-hidden":s2.value,onClick:()=>n.clickHandler(t)}),r]})),s6=e=>{let[t]=sW(ol(e),od);return t};_x="poFP6W_animate",_G="poFP6W_backgroundNone",_K="poFP6W_button",_Y="poFP6W_icon",_j="poFP6W_lastChanceEndCard",_X="poFP6W_name",_z="poFP6W_opaque",_$="poFP6W_overlay";const s8=tU(!1);var s7=({config:e,sendAdEvent:t=()=>{},backgroundNone:n=!1,injectedEmitObservabilityEvent:i=nO,onVisibilityChange:r})=>{var a,o,s,l,d,c,u,E;let _=tC(null),v=s6(e.id);sJ(_,t);let T=()=>{ed().emit({type:"cta",event:ss.LAST_CHANCE_ENDCARD_CTA}),s8.value=!0,i({name:x.LAST_CHANCE_ENDCARD_CTA_BUTTON_CLICK})};return(tg(()=>{r(e.enabled&&!v.value.matches(oa.HIDDEN))},[e.enabled,v.value]),!e.enabled||v.value.matches(oa.HIDDEN))?null:/*#__PURE__*/rg("div",{className:sQ(_$,(null===(a=e.appMeta)||void 0===a?void 0:a.icon)!=null?_z:""),id:"last-chance-endcard-overlay",children:/*#__PURE__*/rg(s4,{config:{enabled:!!(null===(o=e.fsc)||void 0===o?void 0:o.enabled)},children:[/*#__PURE__*/rg(rV,{sendAdEvent:t,config:null!==(E=e.close)&&void 0!==E?E:{},showLastChanceEndcard:!1,beforeClick:()=>{a9(K.lastChanceEndcard,K.lastChanceEndcard)}}),/*#__PURE__*/rg("div",{className:sQ(_j,n?_G:""),id:"last-chance-endcard",children:[(null===(s=e.appMeta)||void 0===s?void 0:s.icon)&&/*#__PURE__*/rg("img",{className:_Y,ref:_,src:null===(l=e.appMeta)||void 0===l?void 0:l.icon,alt:null===(d=e.appMeta)||void 0===d?void 0:d.name,id:"last-chance-endcard-app-icon",onClick:T,"aria-hidden":"true"}),/*#__PURE__*/rg("p",{className:_X,id:"last-chance-endcard-app-name",onClick:T,"aria-hidden":"true",children:null===(c=e.appMeta)||void 0===c?void 0:c.name}),/*#__PURE__*/rg("button",{type:"button",className:sQ(_K,s8.value?"":_x),"data-animate":!s8.value,onClick:T,id:"last-chance-endcard-cta",children:null===(u=e.cta)||void 0===u?void 0:u.text})]})]})})},s9=(e,t=!0)=>{tg(()=>t?(e&&e({type:t6.CLOSE_BUTTON_MOUNT}),()=>{e&&e({type:t6.CLOSE_BUTTON_UNMOUNT})}):()=>{},[t])},le=(e=V())=>{var t;return null!==(t=e.get(w.CTA_BUTTON_URL))&&void 0!==t?t:""},lt=class extends a{openCTAWithMraid(){var e;this.url&&(null===(e=this.mraidService.getMraid())||void 0===e||e.open(this.url))}openOverlayView(){var e;null===(e=this.storeKitOverlayService)||void 0===e||e.open()}openProductView(){var e;null===(e=this.productViewService)||void 0===e||e.open()}handleOverlayViewCTA(){var e;this.isStoreKitOverlaySupported?this.openOverlayView():(null===(e=this.productViewService)||void 0===e?void 0:e.canOpen())?this.openProductView():this.openCTAWithMraid()}notifyClickEventToEDsp(){let{isClickEventFromIframe:e,url:t}=this;e&&t&&oM(t)}handleProductViewCTA(){var e,t;null!==(e=this.productViewService)&&void 0!==e&&e.isOpen()||(this.shouldReplaceShowStoreKitOverlay?this.openOverlayView():this.appStoreId&&(null===(t=this.productViewService)||void 0===t?void 0:t.canOpen())?(this.openProductView(),this.notifyClickEventToEDsp()):this.openCTAWithMraid())}invoke(e){let{target:t,url:n,shouldReplaceShowStoreKitOverlay:i,isClickEventFromIframe:r}=e;if(this.injectedFireMMPEvents(),this.url=n||this.ctaButtonUrl,this.shouldReplaceShowStoreKitOverlay=null!=i&&i,this.isClickEventFromIframe=null!=r&&r,this.environmentService.getOperatingSystem()===B.iOS)switch(t){case eh.OFF:this.openCTAWithMraid();break;case eh.SKO:this.handleOverlayViewCTA();break;case eh.SKPV:default:this.handleProductViewCTA()}else this.openCTAWithMraid()}static getServiceIdentifier(){return"CallToActionServiceInterface"}constructor(e=y(),t=en(),n=nX(),i=nS(),r=nJ(),a=iC(),o=le(),s=ip){super(),this.mraidService=e,this.environmentService=t,this.productViewService=n,this.storeKitOverlayService=i,this.isStoreKitOverlaySupported=r,this.appStoreId=a,this.ctaButtonUrl=o,this.injectedFireMMPEvents=s,this.url="",this.shouldReplaceShowStoreKitOverlay=!1,this.isClickEventFromIframe=!1}},ln=()=>{let e=r.getInstance(),t=lt.getServiceIdentifier();return e.get(t)},li=({callToActionConfig:e,trackingEventMapConfig:t,sceneId:n,shouldReplaceShowStoreKitOverlay:i,callToActionService:r=ln(),injectedEmitTrackingEvent:a=oF})=>rA("cta",(o,s)=>{if(e){var l,d;let{target:o,url:c}=e,u=s.event===ss.ENDCARD_CTA;r.invoke({target:o,url:null!==(d=null===(l=s.data)||void 0===l?void 0:l.ctaUrl)&&void 0!==d?d:c,shouldReplaceShowStoreKitOverlay:i,isClickEventFromIframe:u}),a(ep.CLICK_THROUGH,n,t)}}),lr=()=>{let e=r.getInstance(),t=ow.getServiceIdentifier();if(e.has(t))return e.get(t)};const la=(e,t)=>{let n=lr();if(n)switch(t.event){case ss.ENDCARD_CTA:n.onCtaClick();break;case oD.REMOVE_HANDLER:nI().removeEventHandler(t.type,la)}};var lo=({trackingEventMapConfig:e,fullScreenClickConfig:t,sceneId:n,shouldReplaceShowStoreKitOverlay:i,callToActionService:r=ln(),injectedEmitTrackingEvent:a=oF})=>rA("fsc",()=>{(null==t?void 0:t.enabled)&&(r.invoke({target:t.target,url:t.ctaUrl,shouldReplaceShowStoreKitOverlay:i}),a(ep.CLICK_THROUGH,n,e))}),ls=((_E=ls||{}).APP_META_UPDATE="APP_META_UPDATE",_E),ll=()=>ed(),ld=(e,t=!0,n=ll())=>{tg(()=>{var i;t&&e&&"function"==typeof e.getCallToActionConfig&&n.emit({type:"app-meta",event:ls.APP_META_UPDATE,data:null!==(i=e.getCallToActionConfig().appMeta)&&void 0!==i?i:{enabled:!1}})},[t])};const lc=e=>({id:t0,initial:e?t3.INITIAL:t3.SHOWING,states:{[t3.INITIAL]:{on:{[t2.SHOW]:{target:t3.SHOWING},[t2.PRELOAD]:{target:t3.PRELOADING,actions:[t5.INITIALIZE_PRELOAD]}}},[t3.PRELOADING]:{on:{[t2.SHOW]:{target:t3.SHOWING,actions:[t5.EMIT_SHOW,t5.TRIGGER_VIEWABLE_CHANGE]},[t2.CANCEL_PRELOAD]:{target:t3.INITIAL,actions:[t5.CANCEL_PRELOAD,t5.FLUSH_MRAID_EVENTS]}}},[t3.SHOWING]:{}}}),lu=(e=aj(),t=aH())=>({actions:{[t5.INITIALIZE_PRELOAD]:()=>{nO({name:x.PRELOAD_START})},[t5.FLUSH_MRAID_EVENTS]:()=>{e.flushAllEventCallbacks()},[t5.EMIT_SHOW]:()=>{nO({name:x.PRELOAD_END,preloadSuccess:!0})},[t5.CANCEL_PRELOAD]:()=>{nO({name:x.PRELOAD_END,preloadSuccess:!1})},[t5.TRIGGER_VIEWABLE_CHANGE]:()=>{e.triggerEvent(aG.VIEWABLE_CHANGE,t.isViewable())}}});var lE=e=>sW(lc(e),lu()),l_=((__=l_||{})[__.Eligible=1]="Eligible",__[__.Not_Eligible=2]="Not_Eligible",__[__.Started=3]="Started",__[__.Canceled=4]="Canceled",__),lv=(e,t=ax())=>{let n=tq(e?1:2);return[()=>{1===n.value&&(n.value=3,t.startPreloading())},()=>{3===n.value&&(n.value=4,t.cancelPreloading())}]};const lT=tU(!1),lS=(e,t)=>{if(t)return lT.value?e.getLastChanceEndcardConfig().cta:e.getCallToActionConfig()};var lh=({scene:e,sendAdEvent:t,shouldRenderIFrame:n=!0,isCloseButtonVisible:i=!0,eligibleToPreload:r=!1})=>{let a=new sH(e),[o]=lE(r),s=o.value.matches(t3.SHOWING);sz(e.getId(),e.getAppStoreOnDelayConfig(),!0,s),s$(e.getStoreKitOverlayAutoShowConfig(),s),li({callToActionConfig:lS(e,s),trackingEventMapConfig:e.isAlternative()?void 0:e.getTrackingEventMapConfig(),sceneId:e.getId()}),lo({fullScreenClickConfig:s&&lT.value?e.getLastChanceEndcardConfig().fsc:void 0,trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId(),showHTMLPage:s}),rA("cta",(e,t)=>{s&&!lT.value&&la(e,t)});let[l,d]=lv(r);return(rA("video",(e,t)=>{if(r)switch(t.event){case nW.SUSPEND:case nW.WAITING:d();break;case nW.CAN_PLAY_THROUGH:l()}}),s9(t,s),oW(s),ld(e,s),sN(lT.value,s),tg(()=>{s&&t({type:t6.CREATIVE_VIEW})},[s]),o.value.matches(t3.INITIAL))?null:/*#__PURE__*/rg(e2,{children:[s&&/*#__PURE__*/rg(s7,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{lT.value=e}}),/*#__PURE__*/rg("div",{className:_B,id:e.getId(),style:{visibility:o.value.matches(t3.PRELOADING)?"hidden":""},children:[i&&!lT.value&&/*#__PURE__*/rg(rV,{sendAdEvent:t,config:a.getCloseButtonConfig(),showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),n&&/*#__PURE__*/rg(sZ,{sendAdEvent:t,htmlService:a,scene:e})]})]})},lp=((_v={}).CALL="CALL",_v.DONE="DONE",_v),lg=((_T={}).IDLE="IDLE",_T.BUSY="BUSY",_T);const lC=e=>({id:`throttle-${e}`,initial:lg.IDLE,context:{},states:{IDLE:{on:{[lp.CALL]:{target:lg.BUSY}}},BUSY:{on:{[lp.DONE]:{target:lg.IDLE}}}}});var lO=()=>document.querySelector("#dynamic"),lA=((_S=lA||{}).CLOSE="vungle.events.request.close",_S),lI=(e,t=eT())=>{let n=t.find(t=>t.getId()===e.value);if(!n)throw Error(`No scene found for state ${e.value}`);return n},lf=()=>ed(),lN=()=>{let e=r.getInstance(),t=rS.getServiceIdentifier();return e.get(t)};const lm=(e,t)=>{t!==eS.closed&&nO({name:x.SCENE_START,scene_id:e,scene_type:t})};var lD=(e=lO())=>{let t=o6(),n=t.send,i=tq(t.state),r=sW(lC("ad")),[a,o]=r,s=tO(()=>e=>{[t6.NEXT,t6.LAST_CHANCE_ENDCARD,t6.LAST_CHANCE_ENDCARD_CLOSE].includes(e.type)?a.value.matches(lg.IDLE)&&(o({type:lp.CALL}),n(e),window.setTimeout(()=>{o({type:lp.DONE})},500)):n(e)},[r]);return tg(()=>{let e=t.subscribe(e=>{let t=i.value;if(i.value=e,e.changed&&t.value!==e.value){let n=lI(t),i=lN();i.end(n);let r=lI(e);ea.setValue({scene:r}),i.start(r),lm(r.getId(),r.getSceneType())}});return()=>{e.unsubscribe()}},[t]),tg(()=>{let t=lf(),r=()=>{var e;t.emit({type:"custom-mraid",event:lA.CLOSE,data:d({isVideoState:(null===(e=lI(i.value))||void 0===e?void 0:e.getSceneType())===eS.video,sendAdEvent:n},i.value.context)})};return null==e||e.addEventListener(lA.CLOSE,r),()=>{null==e||e.removeEventListener(lA.CLOSE,r)}},[e]),[i,s]};_q="wnLcbW_closeIcon",_Z="wnLcbW_fallback";var lR=()=>(tg(()=>{nt().getNewTimer(500,()=>{nG()}).start()},[]),/*#__PURE__*/rg("div",{id:"app-store-transition-fallback",className:_Z,children:/*#__PURE__*/rg("button",{title:"Close","aria-label":"Close",id:rI,type:"button",onClick:()=>{nG()},style:_q,children:/*#__PURE__*/rg("div",{className:_q})})})),lL=class extends e3{componentDidCatch(e,t){ed().emit({type:"error-logging",event:nR.EXCEPTION,data:{error:{message:e.message,stack:`Stack trace:
${e.stack}

Error info:
${JSON.stringify(t)}
`}}})}render(){let{children:e}=this.props;return e}},ly=class{getConsentTitleText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t?void 0:null===(e=t.getConsentTitleText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i?void 0:null===(n=i.getConsentTitleText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"Ad-Interaction Data Collection"}getConsentBodyText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t?void 0:null===(e=t.getConsentBodyText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i?void 0:null===(n=i.getConsentBodyText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"With permission, Liftoff collects your ad-interaction data to serve relevant ads to you. Note: you'll see ads independent of your selection, but they may not be as relevant. Do you consent to data tracking for more relevant ads?"}getConsentAcceptButtonText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t?void 0:null===(e=t.getConsentAcceptButtonText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i?void 0:null===(n=i.getConsentAcceptButtonText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"I consent"}getConsentDenyButtonText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t?void 0:null===(e=t.getConsentDenyButtonText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i?void 0:null===(n=i.getConsentDenyButtonText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"I do not consent"}consentAction(e){var t;null===(t=this.mraidService.getMraidBridgeExt())||void 0===t||t.consentAction(e)}constructor(e=y()){this.mraidService=e}};_Q="C4yOdG_bodyText",_J="C4yOdG_buttons",_0="C4yOdG_content",_1="C4yOdG_gdpr",_2="C4yOdG_header",_3="C4yOdG_icon",_5="C4yOdG_primaryButton",_4="C4yOdG_secondaryButton",_6="C4yOdG_title";var lP=({sendAdEvent:e=()=>{}})=>{let t=new ly,n=n=>{t.consentAction(n),e({type:t6.NEXT})};return /*#__PURE__*/rg("div",{className:_1,id:"gdpr",children:[/*#__PURE__*/rg("div",{className:_0,children:[/*#__PURE__*/rg("header",{className:_2,children:[/*#__PURE__*/rg("span",{className:_3}),/*#__PURE__*/rg("h3",{id:"gdpr-title",className:_6,children:t.getConsentTitleText()})]}),/*#__PURE__*/rg("p",{id:"gdpr-body-text",className:_Q,children:t.getConsentBodyText()})]}),/*#__PURE__*/rg("div",{className:_J,children:[/*#__PURE__*/rg("button",{type:"button",id:"gdpr-accept",className:_5,onClick:()=>n("opted_in"),children:t.getConsentAcceptButtonText()}),/*#__PURE__*/rg("button",{type:"button",id:"gdpr-deny",className:_4,onClick:()=>n("opted_out"),children:t.getConsentDenyButtonText()})]})]})},lV=class extends rD{getCloseButtonConfig(){let e=this.scene.getCloseButtonConfig(),t=1===this.scene.index;return O(d({},e),{delay:!t&&this.globalTimerService.isEnabled()?this.globalTimerService.getEndcardPageCloseButtonDelaySeconds():e.delay})}constructor(e,t=sR()){super(),this.scene=e,this.globalTimerService=t}};_8="J2DrKG_staticImageEndcard";const lw=tU(!1);var lb=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0})=>{let i=new lV(e),r=tC(null);return sz(e.getId(),e.getAppStoreOnDelayConfig()),s$(e.getStoreKitOverlayAutoShowConfig()),sJ(r,t),s9(t),oW(),ld(e),lo({fullScreenClickConfig:lw.value?e.getLastChanceEndcardConfig().fsc:e.getFullScreenClickConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),li({callToActionConfig:lw.value?e.getLastChanceEndcardConfig().cta:void 0,trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),tg(()=>{t({type:t6.CREATIVE_VIEW})},[]),sN(lw.value),/*#__PURE__*/rg(e2,{children:[/*#__PURE__*/rg(s7,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{lw.value=e}}),/*#__PURE__*/rg("div",{className:_8,children:/*#__PURE__*/rg(s4,{config:e.getFullScreenClickConfig(),ctaUrl:e.getFullScreenClickConfig().ctaUrl,children:[n&&!lw.value&&/*#__PURE__*/rg(rV,{config:i.getCloseButtonConfig(),sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),/*#__PURE__*/rg("img",{src:e.url,ref:r,alt:"image",id:e.getId()})]})})]})},lM=((_h={}).Native="native",_h.Custom="custom",_h.NotSupported="not-supported",_h),lk=((_p={}).Manifest="manifest",_p.Video="video",_p);class lU extends window.Hls.DefaultConfig.loader{openAndSendXhr(e,t,n){let i=new rn;this.hasCachedManifest(t,i)?this.loadFromString(i.getCachedManifest(),e,t):this.hasCachedLevel(t,i)?this.loadFromString(i.getCachedFirstTrack(),e,t):super.openAndSendXhr(e,t,n)}hasCachedLevel(e,t=new rn){return"type"in e&&"level"===e.type&&"id"in e&&(null==e?void 0:e.id)===0&&t.hasCachedFirstTrack()}hasCachedManifest(e,t=new rn){return"type"in e&&"manifest"===e.type&&t.hasCachedManifest()}loadFromString(e,t,n){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;let i={url:n.url,data:e,code:200};setTimeout(()=>{this.callbacks.onSuccess(i,this.stats,n,t)},0)}}class lB extends window.Hls.DefaultConfig.loader{getLocalFileURL(e){let t=new rn,n=Number(e.sn),i=this.getIndexOffset(e);return t.getCachedVideoSegmentUrls()[n+i]}getIndexOffset(e){var t;return(null===(t=e.initSegment)||void 0===t?void 0:t.sn)==="initSegment"?-1:0}shouldLoadFromFileURL(e){if("main"!==e.type||"initSegment"===e.sn)return!1;let t=this.getLocalFileURL(e);return(null==t?void 0:t.length)>0&&re(t)}async load(e,t,n){this.shouldLoadFromFileURL(e.frag)&&(e.url=this.getLocalFileURL(e.frag)),super.load(e,t,n)}readystatechange(){let{context:e,loader:t,stats:n}=this;if(e&&t&&!n.aborted){if(4===t.readyState&&this.shouldLoadFromFileURL(this.context.frag)){if(this.callbacks){let{onProgress:i}=this.callbacks;i&&i(n,e,t.response,t);let r={url:t.responseURL,data:t.response,code:200};setTimeout(()=>{this.callbacks.onSuccess(r,n,e,t)},0)}}else super.readystatechange()}}}var lH=e=>"data:application/x-mpegurl;base64,"+btoa(e),lW=(e,t)=>{let n=e.split("\n");for(let e=0;e<n.length;e+=1)if(n[e].startsWith("#EXT")&&n[e].includes("URI=")){let i=n[e].indexOf("URI="),r=i+4,a=n[e].charAt(r);for(let t=i+5;t<n[e].length&&r===i+4;t+=1)n[e].charAt(t)===a&&(r=t);let o=n[e].substring(i+5,r);if(!o.toLowerCase().startsWith("http")){let a=t.split("/");a.pop(),a.push(o),n[e]=n[e].substring(0,i+5)+a.join("/")+n[e].substring(r)}}return n.join("\n")},lF=(e,t,n)=>{let i=!1,r=e.split("\n"),a=n.split("/");a.pop();for(let e=0;e<r.length-1;e+=1)if(r[e].startsWith("#EXT-X-STREAM-INF")){if(i){if(!r[e+1].toLowerCase().startsWith("http")){let t=r[e+1].split("/");r[e+1]=a.concat(t).join("/")}}else i=!0,r[e+1]=t}return r.join("\n")},lx=(e,t)=>{let n=e.split("\n"),i=t.split("/");i.pop();for(let e=0;e<n.length-1;e+=1)if(n[e].startsWith("#EXT-X-STREAM-INF")&&!n[e+1].toLowerCase().startsWith("http")){let t=n[e+1].split("/");n[e+1]=i.concat(t).join("/")}return n.join("\n")},lG=(e,t)=>{let n=e.split("\n");for(let e=0;e<n.length-1;e+=1)if(n[e].startsWith("#EXT-X-STREAM-INF")){if(n[e+1].toLowerCase().startsWith("http"))return n[e+1];let i=t.split("/");return i.pop(),i.push(n[e+1]),i.join("/")}},lK=class{getStreamPlayer(e){if(null===e)return lM.NotSupported;if(window.Hls.isSupported()){let e=this.environmentService.getOperatingSystem(),t=this.environmentService.getSdkVersion();if(e!==B.iOS||t.isGreaterThanOrEqualTo(new k("7")))return lM.Custom}return""!==e.canPlayType(this.hlsMediaType)?lM.Native:lM.NotSupported}async loadHls(e,t){let n=new window.Hls({maxLoadingDelay:4,maxStarvationDelay:4,pLoader:lU,fLoader:lB,debug:!1});this.onFragLoaded(n),n.loadSource(e),n.attachMedia(t)}async getHlsManifest(e){if(!this.streamPunkService.hasCachedStreamChunks()&&!this.streamPunkService.hasCachedFirstTrack())return this.streamPunkService.hasCachedManifest()?lH(lx(this.streamPunkService.getCachedManifest(),e)):e;try{let t;if(this.streamPunkService.hasCachedManifest())t=this.streamPunkService.getCachedManifest();else{let n=await this.getManifest(e);if(void 0===n)return e;t=await n.text()}let n=lG(t,e);if(!n){let n=this.updateStream(t,e);return lH(n)}try{let i;if(this.streamPunkService.hasCachedFirstTrack())i=this.streamPunkService.getCachedFirstTrack();else{let t=await this.getVideo(n);if(void 0===t)return e;i=await t.text()}let r=this.updateStream(i,n),a=lH(r),o=lF(t,a,n),s=lW(o,e);return lH(s)}catch(t){return this.handleStreamError(t,n,lk.Video),e}}catch(t){return this.handleStreamError(t,e,lk.Manifest),e}}insertCachedVideoSegments(e,t){let n=this.streamPunkService.getCachedVideoSegmentUrls().reverse(),i=t.split("/");i.pop();let r=e.split("\n");for(let e=0;e<r.length-1;e+=1)if(r[e].startsWith("#EXTINF")){if(n.length>0)r[e+1]=n.pop();else if(!r[e+1].toLowerCase().startsWith("http")){let t=r[e+1].split("/");r[e+1]=i.concat(t).join("/")}}return r.join("\n")}updateStream(e,t){return lW(this.insertCachedVideoSegments(e,t),t)}handleStreamError(e,t,n){var i;this.errorLoggingService.emit({type:"error-logging",event:nR.EXCEPTION,data:{error:{message:e instanceof TypeError||e.message.includes("ailed to fetch")||(null===(i=e.message)||void 0===i?void 0:i.includes("ross-origin"))?`CORS issue prevented HLS ${n} cache optimization from ${t}`:`Failed to download HLS ${n} from ${t}: ${e.message}`}}})}async getStream(e,t){let n=await window.fetch(e);if(!n.ok&&0!==n.status){this.errorLoggingService.emit({type:"error-logging",event:nR.EXCEPTION,data:{error:{message:`Network ${n.status} while loading HLS ${t}: ${e}`}}});return}return n}getManifest(e){return this.getStream(e,lk.Manifest)}getVideo(e){return this.getStream(e,lk.Video)}getBandwidthEstimate(e,t,n){if(!(!1===Number.isFinite(e)||e<=0||e>0x19000000||t<50||Number.isNaN(n)))return Math.round(n/8/1024)}onFragLoaded(e){e.on(window.Hls.Events.FRAG_LOADED,(t,n)=>{if("main"===n.frag.type){var i;let t=n.frag.stats.bwEstimate,r=n.frag.stats.loading.end-n.frag.stats.loading.start,a=e.bandwidthEstimate,o=null===(i=ea.getValue().scene)||void 0===i?void 0:i.getId(),s=this.getBandwidthEstimate(t,r,a);console.log("fragmentBandwidth:",t/8/1024,"KB/s"),console.log("fragmentLoadingTime:",r,"ms"),console.log("Bandwidth estimate:",s,"KB/s"),o&&s&&this.observabilityReportingService.emit({type:"observability",event:F.EVENT,data:{scene_id:o,name:x.BANDWIDTH_ESTIMATION,bwe:s}})}})}constructor(e=en(),t=ec(),n=ng(),i=new rn){this.environmentService=e,this.errorLoggingService=t,this.observabilityReportingService=n,this.streamPunkService=i,this.hlsMediaType="application/vnd.apple.mpegurl"}},lY=class{monitorVideoHealth(e,t,n){var i;n&&((null===(i=this.videoMonitorTimer)||void 0===i?void 0:i.getId())!=null&&this.videoMonitorTimer.destroy(),this.videoMonitorTimer=this.timerService.getNewTimer(3e4,()=>{!(e.value.matches(aq.AUTO_PLAY_FAIL)||e.value.matches(aq.LOADING))&&(e.value.context.canPlay&&e.value.context.currentTime>=0||t(J))}),this.videoMonitorTimer.start())}startStreamingVideo(e,t,n,i=new lK(this.environmentService,this.errorLoggingService,this.observabilityReportingService)){switch(e.setAttribute("type","application/x-mpegURL"),i.getStreamPlayer(e)){case lM.Custom:i.loadHls(t,e);break;case lM.Native:e.setAttribute("src",t),e.load();break;default:this.observabilityReportingService.emit({type:"observability",event:F.EVENT,data:{name:x.HLS_NOT_SUPPORTED}}),n({type:t6.NEXT})}}getMutedSignal(){return this.muteService.getMutedSignal()}constructor(e=nt(),t=en(),n=ec(),i=ng(),r=oe()){this.timerService=e,this.environmentService=t,this.errorLoggingService=n,this.observabilityReportingService=i,this.muteService=r}},lj=class extends oL{init(){if(!this.initialized)try{var e,t,n;this.initialized=!0;let i=JSON.parse(window.atob(this.rawOmsdkData));if(!i.vendorURL||!i.vendorKey)return;super.init(this.videoElement,i),null===(e=this.adSession)||void 0===e||e.setCreativeType(oy.VIDEO),null===(t=this.adSession)||void 0===t||t.setImpressionType(oP.LOADED),null===(n=this.adSession)||void 0===n||n.registerSessionObserver(this.onSessionChange.bind(this))}catch(e){ed().emit({type:"error-logging",event:nR.EXCEPTION,data:{error:{message:"Unable to init omsdk video"}}})}}onSessionStarted(){var e,t;this.hasSessionStartRequested&&this.initialized&&this.duration&&!this.hasSessionStarted&&(null===(e=this.adEvents)||void 0===e||e.impressionOccurred(),this.hasSessionStarted=!0,this.isSkippable=!eg(this.duration),this.vastProperties=new this.sessionClient.VastProperties(this.isSkippable,0,!0,"preroll"),null===(t=this.adEvents)||void 0===t||t.loaded(this.vastProperties),this.eventDrain())}onSessionChange(e){if(e.type===oV.SESSION_START){this.hasSessionStartRequested=!0,this.onSessionStarted();return}if(e.type===oV.SESSION_FINISH){let e=ed();e.emit({type:"video",event:oD.REMOVE_HANDLER}),e.emit({type:"cta",event:oD.REMOVE_HANDLER})}}onVideoCheckpoint(){let{currentTime:e,duration:t,muted:n}=this.videoElement;this.pushOrCallFunction(()=>{if(this.isBuffering){var i;this.isBuffering=!1,null===(i=this.mediaEvents)||void 0===i||i.bufferFinish()}let r=oS(e,t);if(e>0&&this.mediaEvents){let e=this.checkpointsReached.length;for(let i=e;i<=r;i+=1)switch(this.checkpointsReached[i]=!0,i){case 0:this.volume=n?0:1,this.mediaEvents.start(t,this.volume);break;case 1:this.mediaEvents.firstQuartile();break;case 2:this.mediaEvents.midpoint();break;case 3:this.mediaEvents.thirdQuartile();break;case 4:this.mediaEvents.complete()}}})}onVideoTimeUpdate(){this.onSessionStarted()}onSoundChange(e){this.pushOrCallFunction(()=>{var t;this.volume="mute"===e?0:1,null===(t=this.mediaEvents)||void 0===t||t.volumeChange(this.volume)})}onVideoBuffering(){this.isBuffering||(this.pushOrCallFunction(()=>{var e;null===(e=this.mediaEvents)||void 0===e||e.bufferStart()}),this.isBuffering=!0)}onVideoStateChanged(e){this.pushOrCallFunction(()=>{var t,n;if(this.checkpointsReached[0]){if("pause"===e){null===(n=this.mediaEvents)||void 0===n||n.pause();return}null===(t=this.mediaEvents)||void 0===t||t.resume()}})}onVideoDisplayState(e){let{duration:t}=this.videoElement;!this.isVideoReady&&t>0&&(this.isVideoReady=!0,this.pushOrCallFunction(()=>{var t;null===(t=this.mediaEvents)||void 0===t||t.playerStateChange(e)}))}onVideoMetadataAvailable(e){this.duration=e,this.onSessionStarted()}onVideoPageClose(){this.pushOrCallFunction(()=>{var e;this.isSkippable&&(null===(e=this.mediaEvents)||void 0===e||e.skipped())})}static getServiceIdentifier(){return"OmsdkVideoServiceInterface"}constructor(e,t){super(),this.videoElement=e,this.rawOmsdkData=t,this.checkpointsReached=[],this.volume=0,this.vastProperties=null,this.isBuffering=!1,this.isSkippable=!1,this.isVideoReady=!1,this.videoElement=e,this.init()}};const lX=()=>V().has(w.OM_SDK_DATA)&&om();var lz=e=>{if(lX()){var t;let n=null!==(t=V().get(w.OM_SDK_DATA))&&void 0!==t?t:"";r.getInstance().bind(lj.getServiceIdentifier(),new lj(e,n))}},l$=((_g={}).SHOWING="SHOWING",_g.HIDDEN="HIDDEN",_g),lq=((_C={}).SHOW="SHOW",_C.HIDE="HIDE",_C.CLOSE="CLOSE",_C),lZ=((_O={}).PAUSE_VIDEO="pauseVideo",_O.PLAY_VIDEO="playVideo",_O.FORFEIT_REWARD="forfeitReward",_O);const lQ="incentivized-dialog",lJ=()=>({id:lQ,initial:l$.HIDDEN,context:{},states:{[l$.HIDDEN]:{on:{[lq.SHOW]:{target:l$.SHOWING,actions:[lZ.PAUSE_VIDEO,t9.PAUSE_INTERVALS,nn.STANDBY_TIMERS]}}},[l$.SHOWING]:{on:{[lq.HIDE]:{target:l$.HIDDEN,actions:[lZ.PLAY_VIDEO,t9.START_INTERVALS,nn.WAKE_TIMERS]},[lq.CLOSE]:{target:l$.HIDDEN,actions:[lZ.FORFEIT_REWARD,t9.START_INTERVALS,nn.WAKE_TIMERS]}}}}}),l0={actions:d({},ni(),{pauseVideo:()=>{let e=aJ();null==e||e.send({type:a$.PAUSE})},playVideo:()=>{let e=aJ();null==e||e.send({type:a$.PLAY})},forfeitReward:()=>{nO({name:x.FORFEIT_REWARD})}},ne())};var l1=e=>(null!=e?e:tJ()).interpreterMap.get(lQ),l2=(e,t,n=eo(),i=aJ(),r=o6(),a=l1())=>{if(!ro(n))return;let o=!1;r.state.context.isPrivacyDrawerOpen&&(o=!0),(null==a?void 0:a.state.value)===l$.SHOWING&&(o=!0),t.event!==nf.MAXIMIZED||o?t.event===nf.MINIMIZED&&(null==i||i.send({type:a$.MINIMIZE})):null==i||i.send({type:a$.MAXIMIZE,hasHlsVideo:n.videoType===rr.HLS})},l3=(e=ei())=>!e.isBanner();_7="S2LOeW_icon",_9="S2LOeW_muted",ve="S2LOeW_unmuted";const l5={marginLeft:"0px",marginTop:"0px"},l4=tU(l5);var l6=({sendAdEvent:e,isMuted:t,isVisible:n,videoPlayerHeight:i})=>{let r=()=>{if(!n)return;let e=document.querySelector("video");if(!e)return;let t=d({},l5),{videoWidth:i,videoHeight:r}=e,{clientWidth:a,clientHeight:o}=null==e?void 0:e.parentElement,s=i/r;a/o>s?t.marginLeft=`${(a-o*s)/2}px`:t.marginTop=`${(o-a/s)/2}px`,l4.value=t};return tg(()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)})),tg(()=>{r()},[n,i]),n?/*#__PURE__*/rg("button",{type:"button",className:t?_9:ve,id:eC,title:t?"Unmute":"Mute","aria-label":"Mute button",style:l4.value,onClick:()=>{e({type:t?t6.UNMUTE:t6.MUTE})},children:/*#__PURE__*/rg("span",{className:_7})}):null};vt="OaF7uW_paused",vn="OaF7uW_videoProgress";var l8=({value:e,duration:t,progressBarConfig:{show:n,color:i},paused:r})=>n?/*#__PURE__*/rg("div",{role:"progressbar",title:"Video progress",className:vn,"aria-label":"Video progress",children:/*#__PURE__*/rg("span",{className:!r&&e>0?"":vt,style:{backgroundColor:i,animationDuration:`${t}s`},id:"video-progress-bar"})}):null,l7=e=>!!e.next&&e.next.getSceneType()!==eS.closed;vi="ok_seq_videoPlayer",vr="ok_seq_videoPlayerWrap";var l9=({sendVideoEvent:e,sendAdEvent:t,videoState:n,scene:i})=>{var r;let a=new lY,o=new lK,s=tO(()=>aW(),[]),{url:l}=i,d=tC(null),c=tC(null),u=tC(null),E=tq(0),_=tq(l),v=a.getMutedSignal(),T=tq(""),S=t=>{e({type:t,eventTarget:d.current,url:_.value})},h=()=>{S(a$.CAN_PLAY),t({type:t6.PRIVACY_LOGO_SHOW})},p=e=>{t({type:t6.VIDEO_ERROR,error:Error(e),videoUrl:_.value}),t({type:t6.VIDEO_FAILURE})},g=()=>{e({type:a$.RETRY});let t=i.originalVideoUrl;t&&t!==_.value?_.value=t:p(Z)},C=()=>{setTimeout(()=>{d.current&&(d.current.muted=v.value)},100)},O=()=>{var t;let i=null===(t=d.current)||void 0===t?void 0:t.play();if(!i){window.setTimeout(()=>{if(n.value.value===aq.PLAYING){var t;0===(null===(t=document.getElementsByTagName("video")[0])||void 0===t?void 0:t.currentTime)&&e({type:a$.AUTO_PLAY_FAIL})}},2500);return}i.then(C).catch(t=>{let n=t.name.toLowerCase();"notallowederror"===n?e({type:a$.AUTO_PLAY_FAIL}):"aborterror"===n||p(ee)})},A=()=>{let e=nt();c.current=e.getNewTimer(1e4,()=>{n.value.value!==aq.AUTO_PLAY_FAIL&&(!n.value.context.canPlay||n.value.context.currentTime<=0)&&p(Q)}),c.current.start()},I=e=>{d.current&&e&&(d.current.setAttribute("src",e),d.current.load(),l7(i)?A():a.monitorVideoHealth(n,p,d.current))};return tg(()=>{var r,a,o;switch(n.value.value){case aq.PLAYING:null===(a=c.current)||void 0===a||null===(r=a.destroy)||void 0===r||r.call(a),O();break;case aq.LOAD_FAIL_RETRY:g();break;case aq.PAUSED:null===(o=d.current)||void 0===o||o.pause();break;case aq.ENDED:if(i.loopVideo)e({type:a$.PLAY});else{let n=i.getLastChanceEndcardConfig().enabled;e({type:a$.CLOSE}),t(n?{type:t6.LAST_CHANCE_ENDCARD}:{type:t6.COMPLETE})}}},[n.value.value]),tZ(()=>{d.current&&_.value&&(lz(d.current),d.current.setAttribute("muted","true"),i.videoType===rr.PROGRESSIVE&&I(_.value))}),tZ(()=>{let e=o.getStreamPlayer(d.current);if(_.value&&i.videoType===rr.HLS&&e!==lM.NotSupported){let t=async()=>{e===lM.Native?T.value=await o.getHlsManifest(_.value):T.value=_.value};l7(i)?A():a.monitorVideoHealth(n,p,d.current),t()}}),tZ(()=>{""!==T.value&&(null==d?void 0:d.current)&&a.startStreamingVideo(d.current,T.value,t)}),tZ(()=>{var e,t;d.current&&(null===(e=(t=n.value).matches)||void 0===e?void 0:e.call(t,aq.PLAYING))&&!d.current.paused&&!d.current.ended&&(d.current.muted=v.value)}),tg(()=>(s.addEventHandler("viewability",l2),()=>{s.removeEventHandler("viewability",l2)}),[e,s]),tg(()=>{let e=t=>{d.current&&(d.current.readyState>2?h():nt().getNewTimer(t,()=>{e(t)}).start())};e(200)},[]),/*#__PURE__*/rg("div",{className:sQ(vr,"videoPlayer"),ref:u,id:i.getId(),children:[/*#__PURE__*/rg(l6,{sendAdEvent:t,isMuted:v.value,isVisible:n.value.context.canPlay&&l3(),videoPlayerHeight:null===(r=u.current)||void 0===r?void 0:r.clientHeight}),/*#__PURE__*/rg("video",{title:"Video player",id:"video-player",ref:d,muted:!0,playsInline:!0,className:vi,poster:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQAAAAA3bvkkAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAnRSTlMAAHaTzTgAAAACYktHRAAB3YoTpAAAAAd0SU1FB+YHDAoSGnw+PegAAAAKSURBVAjXY2AAAAACAAHiIbwzAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA3LTEyVDEwOjE4OjI2KzA4OjAww+Ou8wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNy0xMlQxMDoxODoyNiswODowMLK+Fk8AAAAASUVORK5CYII=",onError:()=>{_.value===l?S(a$.LOAD_FAIL):p(q)},onDurationChange:()=>{S(a$.DURATION_CHANGE)},onWaiting:()=>{S(a$.WAITING)},onSuspend:()=>{S(a$.SUSPEND)},onCanPlay:h,onCanPlayThrough:()=>{ot().emit({type:"video",event:nW.CAN_PLAY_THROUGH})},onTimeUpdate:t=>{let{target:i}=t,r=n.value.value!==aq.PLAYING;Number.isNaN(i.duration)||0===i.duration||i.seeking||r||(E.value=i.currentTime,e({eventTarget:i,type:a$.TIME_UPDATE}))},onEnded:()=>{E.value=0,e({type:a$.END})},onPlaying:()=>{nO({name:x.VIDEO_START_SUCCESS},1)},onSeeking:e=>{let t=e.target,n=t.currentTime-E.value;!(t.readyState<3)&&Math.abs(n)>.01&&(t.currentTime=E.value)},"data-loop-count":n.value.context.loopCount,"data-scene-id":i.getId(),disableRemotePlayback:!0}),/*#__PURE__*/rg(l8,{value:n.value.context.progress,duration:n.value.context.duration,paused:n.value.value===aq.PAUSED,progressBarConfig:i.getProgressBarConfig()})]})},de=(e,t=en())=>{var n;let i=t.getOperatingSystem();if(i===B.Android)return!!(null!==(n=null==e?void 0:e.filter)&&void 0!==n?n:null==e?void 0:e.webkitFilter);if(i===B.iOS){let e=document.createElement("div");if("webkitFilter"in e.style||"filter"in e.style)return!0}return!1};va="RypQCq_videoBlurWrap";var dt=({isInLine:e=!1})=>{var t,n,i,r;let a=tC(null),o=tC(),s=tC(),l=tq(!1),d=tq(window.document.body.clientWidth),c=tq(window.document.body.clientHeight),u=tq(0),E=tq(0),_=tq(0),v=tq(0),T=null===(t=aJ())||void 0===t?void 0:t.state.context.videoElement,S=null===(n=aJ())||void 0===n?void 0:n.state.context.canPlay,h=null===(i=aJ())||void 0===i?void 0:i.state.context.videoWidth,p=null===(r=aJ())||void 0===r?void 0:r.state.context.videoHeight,g=()=>{d.value=window.document.body.clientWidth,c.value=window.document.body.clientHeight},C=()=>{T&&(u.value=T.clientHeight,E.value=T.clientWidth)},O=()=>{var e;null===(e=o.current)||void 0===e||e.clearRect(0,0,_.value,v.value)},A=()=>!!T&&(!!e||T.videoWidth/T.videoHeight<d.value/c.value),I=()=>{if(!T)return;let t=T.videoHeight>T.videoWidth;l.value=(e||t)&&A()&&de(o.current)},f=()=>{g(),O(),I()},N=()=>{window.addEventListener("resize",f)},m=()=>{if(a.current&&d&&c&&h&&p&&c){var e;let t=h/d.value,n=p/c.value,i=h/p<d.value/c.value?t:n,r=Math.floor(Number(h/i)),s=Math.floor(Number(p/i));o.current=null===(e=a.current)||void 0===e?void 0:e.getContext("2d"),_.value=r,v.value=s}},D=()=>{l.value&&o.current&&o.current.drawImage(T,0,0,_.value,v.value)};return tg(()=>{C(),I()},[null==T?void 0:T.clientHeight,null==T?void 0:T.clientWidth,o.current]),tg(()=>{if(S){N(),g(),m();let e=t7();s.current=e.getNewInterval(60,()=>{D()}),s.current.start()}return()=>{var e;window.removeEventListener("resize",f),null===(e=s.current)||void 0===e||e.destroy()}},[S]),/*#__PURE__*/rg("div",{id:"video-blur",className:va,children:/*#__PURE__*/rg("canvas",{id:"video-blur-canvas",ref:a,width:_,height:v})})};vo="dDtiqq_tapToPlayContainer",vs="dDtiqq_tapToPlayIcon",vl="dDtiqq_tapToPlayMask",vd="dDtiqq_tapToPlayText";var dn=({isVisible:e,sendVideoEvent:t})=>e?/*#__PURE__*/rg("div",{role:"none",className:vl,onClick:()=>{var e;null===(e=document.getElementsByTagName("video")[0])||void 0===e||e.play(),t({type:a$.PLAY})},id:"tap-to-play",title:"tap-to-play",children:/*#__PURE__*/rg("div",{className:vo,children:[/*#__PURE__*/rg("div",{className:vs}),/*#__PURE__*/rg("div",{className:vd,children:"Tap to play"})]})}):null,di=()=>es(V().get(w.VIDEO_SHOW_CTA));vc="Zz6y0G_download",vu="Zz6y0G_downloadIcon";const dr=()=>{ed().emit({type:"cta",event:ss.DOWNLOAD_BUTTON_CTA})};var da=()=>di()?/*#__PURE__*/rg("button",{className:vc,"aria-label":"cta",id:"download-button",type:"button",onClick:dr,children:/*#__PURE__*/rg("span",{className:vu})}):null,ds=({id:e="star",index:t=0,size:n,offset:i=100})=>{let r=`${e}-gradient-${t}`;return /*#__PURE__*/rg("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 100 100",children:[/*#__PURE__*/rg("defs",{children:/*#__PURE__*/rg("linearGradient",{id:r,x1:"0",x2:"100%",y1:"0",y2:"0",children:[/*#__PURE__*/rg("stop",{offset:"0%","stop-color":"#ffd055"}),/*#__PURE__*/rg("stop",{offset:`${i}%`,"stop-color":"#ffd055"}),/*#__PURE__*/rg("stop",{offset:`${i}%`,"stop-color":"#ddd"})]})}),/*#__PURE__*/rg("path",{d:"M50,0,64.69463130731182,29.774575140626315,97.55282581475768,34.54915028125263,73.77641290737884,57.72542485937368,79.38926261462366,90.45084971874736,50,75,20.61073738537635,90.45084971874738,26.223587092621162,57.72542485937369,2.447174185242318,34.549150281252636,35.30536869268816,29.774575140626318Z",fill:`url(#${r})`,"stroke-linejoin":"round","stroke-linecap":"round"})]})},dl=class{getOffsetPercent(e,t){let n=Math.floor(t);return e<n?100:e>n?0:Math.ceil(t%1*100/this.unitValue)*this.unitValue}constructor(){this.unitValue=10}};const dd=12,dc=5,du=0;var dE=({id:e,size:t=dd,count:n=dc,value:i=du})=>{let r=[],a=new dl;for(let o=0;o<n;o+=1){let n=a.getOffsetPercent(o,i);r.push(/*#__PURE__*/rg(ds,{id:e,index:o,size:t,offset:n},o))}return /*#__PURE__*/rg("span",{id:e,children:r})},d_=class{getVideoComputedHeight(){let e=aJ(),t=null==e?void 0:e.state.context.videoElement;if(!t)return 0;let n=t.videoWidth/t.videoHeight;return parseFloat(window.getComputedStyle(t).getPropertyValue("width"))/n}updateScreenshotsHeight(e){if(!e.current)return;let t=this.getVideoComputedHeight();if(0===t)return;let n=window.innerHeight-t-120;n>=100?e.current.style.height=`${n}px`:e.current.style.display="none"}handleClick(e,t,n){let i=e.target;if(n.some(e=>null!==i.closest(`#${e}`))){this.ctaReportingService.emit({type:"cta",event:ss.PERSISTENT_CTA}),this.handleObservabilityEvent({name:x.PERSISTENT_CTA_BUTTON_CLICK}),this.sceneEventReportingService.emit(i$.CTA_BUTTON_CLICK);return}t.enabled&&this.fullCtaReportingService.emit({type:"fsc",event:s0.FSC})}constructor(e=V(),t=sl(),n=sd(),i=rT(),r=nO){this.tokenService=e,this.ctaReportingService=t,this.fullCtaReportingService=n,this.sceneEventReportingService=i,this.handleObservabilityEvent=r}};vE="UUyEIq_appDetail",v_="UUyEIq_appIcon",vv="UUyEIq_persistentSimpleCta",vT="UUyEIq_persistentSimpleCtaBtn",vS="UUyEIq_slideIn";const dv=tU(!1);var dT=({fullScreenClickConfig:e,callToActionConfig:t})=>{var n,i,r,a;return tg(()=>{nt().getNewTimer(t.delay,()=>{dv.value=!0,nO({name:x.PERSISTENT_CTA_BUTTON_SHOW}),rT().emit(i$.CTA_BUTTON_SHOW)}).start()},[]),/*#__PURE__*/rg("div",{id:"persistent-simple-cta",className:sQ(vv,dv.value?vS:""),"aria-hidden":"true",onClick:t=>{new d_().handleClick(t,e,["persistent-simple-cta-app-name","persistent-simple-cta-app-icon","persistent-simple-cta-app-company","persistent-simple-cta-app-rating","persistent-simple-cta-button"])},children:[(null===(n=t.appMeta)||void 0===n?void 0:n.icon)&&/*#__PURE__*/rg("img",{className:v_,id:"persistent-simple-cta-app-icon",alt:"app-icon",src:t.appMeta.icon}),((null===(i=t.appMeta)||void 0===i?void 0:i.name)||(null===(r=t.appMeta)||void 0===r?void 0:r.company))&&/*#__PURE__*/rg("div",{className:vE,id:"persistent-simple-cta-app-detail",children:[t.appMeta.name&&/*#__PURE__*/rg("h1",{id:"persistent-simple-cta-app-name",children:t.appMeta.name}),t.appMeta.company&&/*#__PURE__*/rg("h2",{id:"persistent-simple-cta-app-company",children:t.appMeta.company}),t.appMeta.isRatingGreaterThanMinimum&&/*#__PURE__*/rg(dE,{value:t.appMeta.rating,id:"persistent-simple-cta-app-rating"})]}),/*#__PURE__*/rg("button",{className:vT,style:(null===(a=t.background)||void 0===a?void 0:a.color)?{backgroundColor:t.background.color}:{},type:"button",id:"persistent-simple-cta-button",children:t.text})]})};vh="DwKKSa_appIcon",vp="DwKKSa_appInfo",vg="DwKKSa_persistentRichCta",vC="DwKKSa_persistentRichCtaBtn";var dS=({fullScreenClickConfig:e,callToActionConfig:t})=>{var n,i,r,a,o,s,l,d;tg(()=>{let e=document.createElement("style");return e.textContent=`
    .videoPlayer {
      width: 100%;
      height: auto;
      margin-top: 120px;
    }
    `,document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),tg(()=>{nO({name:x.PERSISTENT_CTA_BUTTON_SHOW}),rT().emit(i$.CTA_BUTTON_SHOW)},[]);let c=null===(n=t.appMeta)||void 0===n?void 0:n.isRatingGreaterThanMinimum;return /*#__PURE__*/rg("div",{id:"persistent-rich-cta",className:vg,onClick:t=>{new d_().handleClick(t,e,["persistent-rich-cta-app-name","persistent-rich-cta-app-icon","persistent-rich-cta-company-name","persistent-rich-cta-app-rating","persistent-rich-cta-button"])},"aria-hidden":"true",children:[(null===(i=t.appMeta)||void 0===i?void 0:i.icon)&&/*#__PURE__*/rg("img",{className:vh,alt:"app-icon",id:"persistent-rich-cta-app-icon",src:null===(r=t.appMeta)||void 0===r?void 0:r.icon}),/*#__PURE__*/rg("div",{className:vp,children:[(null===(a=t.appMeta)||void 0===a?void 0:a.name)&&/*#__PURE__*/rg("h1",{id:"persistent-rich-cta-app-name",children:null===(o=t.appMeta)||void 0===o?void 0:o.name}),c&&/*#__PURE__*/rg(dE,{value:null===(s=t.appMeta)||void 0===s?void 0:s.rating,id:"persistent-rich-cta-app-rating"}),!c&&/*#__PURE__*/rg("p",{id:"persistent-rich-cta-company-name",children:null===(l=t.appMeta)||void 0===l?void 0:l.company}),/*#__PURE__*/rg("button",{className:vC,type:"button",style:(null===(d=t.background)||void 0===d?void 0:d.color)?{backgroundColor:t.background.color}:{},id:"persistent-rich-cta-button",children:t.text})]})]})};vO="dalDea_persistentRichCtaScreenshots",vA="dalDea_slide";const dh=e=>{e.enabled?sd().emit({type:"fsc",event:s0.FSC}):sl().emit({type:"cta",event:ss.PERSISTENT_CTA})};var dp=({fullScreenClickConfig:e,callToActionConfig:t})=>{var n;let i=new d_,r=tC(null);tg(()=>{i.updateScreenshotsHeight(r)},[window.innerHeight,window.innerWidth]);let a=null===(n=t.appMeta)||void 0===n?void 0:n.screenshots;return a&&0!==a.length?/*#__PURE__*/rg("div",{id:"persistent-rich-cta-screenshots",ref:r,className:vO,onClick:()=>dh(e),"aria-hidden":"true",children:a.map(e=>e&&/*#__PURE__*/rg("div",{className:vA,children:/*#__PURE__*/rg("img",{alt:e,src:e})},e))}):null},dg=({videoOrientation:e,viewportOrientation:t,scene:n})=>{var i,r;return e===az.UNKNOWN?null:e===az.LANDSCAPE&&t===H.PORTRAIT&&(null!==(r=null===(i=n.getCallToActionConfig().appMeta)||void 0===i?void 0:i.screenshots)&&void 0!==r?r:[]).length>0?/*#__PURE__*/rg(e2,{children:[/*#__PURE__*/rg(dS,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig()}),/*#__PURE__*/rg(dp,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig()})]}):/*#__PURE__*/rg(dT,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig()})},dC=((_A=dC||{}).PERCENTAGE="percentage",_A.ABSOLUTE="absolute",_A);const dO=e=>{let t,n,i;return e.includes("_")?[t,n,i]=e.split("_"):e.includes(":")?[t,n,i]=e.split(":"):(t=e.substring(0,2),n=e.substring(2,2),i=e.substring(4,2)),3600*Number(t)+60*Number(n)+Number(i)},dA=e=>e.endsWith("p")?Number(e.replace("p","")):e.endsWith("%")?Number(e.replace("%","")):Number(e),dI=e=>e.endsWith("p")||e.endsWith("%")?"percentage":"absolute",df=e=>{let t=r.getInstance(),n=t.has(e)?t.get(e):void 0;if(n)return n;let i=e.split(";").filter(e=>e&&""!==e);return i&&0!==i.length?(n=i.map(e=>{let t=e.split(".")[1],n=dI(t);return{type:n,tpat_event:e,value:"percentage"===n?dA(t):dO(t)}}),t.bind(e,n),n):[]};var dN=(e,t)=>{let n=V();t.event===nW.PROGRESS&&n.has(w.TPAT_PROGRESS_EVENTS)&&df(n.get(w.TPAT_PROGRESS_EVENTS)).forEach(n=>{var i,r;if((null===(i=t.data)||void 0===i?void 0:i.currentTime)&&(null===(r=t.data)||void 0===r?void 0:r.duration)){let{currentTime:i,duration:r}=t.data,a=Math.floor(i/r*100),o=Math.floor(i);("percentage"===n.type&&a>=n.value||"absolute"===n.type&&n.value<=r&&o>=n.value)&&e.emit({type:"tpat",event:n.tpat_event,fireOnlyOnce:!0})}})};const dm=tU(0);var dD=(e=sR())=>{let t=e.isEnabled();return tZ(()=>{t&&e.setTotalDelaySecondsConsumed(dm.value)}),n=>{t&&(dm.value=e.getTotalCloseButtonDelaySeconds()-n)}};const dR=[iT.CHECKPOINT_0,iT.CHECKPOINT_25,iT.CHECKPOINT_50,iT.CHECKPOINT_75,iT.CHECKPOINT_100],dL=(e,t)=>dR[oS(e,t)],dy=(e,t=ed())=>{let n=[];return dR.slice(0,e).forEach(e=>{t.hasExistingEvent({type:"tpat",event:e})||n.push(e)}),n};var dP=(e,t,n)=>{let i=dL(e,t);dy(oS(e,t)).forEach(i=>{ih(i,!0,{progress:n,currentTime:e,duration:t})}),ih(i,!0,{progress:n,currentTime:e,duration:t})},dV=(e,t,n,i=ok())=>{if((null==n?void 0:n.getSceneType())!==eS.video)return;let r=[ep.START,ep.FIRST_QUARTILE,ep.MIDPOINT,ep.THIRD_QUARTILE,ep.COMPLETE][oS(e,t)];r&&oF(r,n.getId(),n.getTrackingEventMapConfig(),!0,i)};const dw=()=>({id:aQ,initial:aq.LOADING,context:{currentTime:0,duration:0,rewardDuration:0,progress:0,videoHeight:0,videoWidth:0,videoElement:null,canPlay:!1,loopCount:0,successfulViewAdReached:!1,orientation:az.UNKNOWN},states:{[aq.LOADING]:{entry:aZ.EMIT_LOAD,on:{[a$.LOAD_FAIL]:{target:aq.LOAD_FAIL_RETRY},[a$.CAN_PLAY]:{target:aq.PLAYING,actions:[aZ.SET_CAN_PLAY,aZ.REPORT_VIDEO_START]},[a$.PAUSE]:aq.PAUSED,[a$.DURATION_CHANGE]:{actions:aZ.EMIT_DURATION_CHANGE},[a$.WAITING]:{actions:aZ.EMIT_WAITING},[a$.SUSPEND]:{actions:aZ.EMIT_SUSPEND}}},[aq.LOAD_FAIL_RETRY]:{on:{[a$.RETRY]:aq.LOADING}},[aq.PLAYING]:{entry:aZ.EMIT_PLAY,on:{[a$.MINIMIZE]:{target:aq.PAUSED,actions:[aZ.UPDATE_CURRENT_TIME]},[a$.PAUSE]:aq.PAUSED,[a$.END]:aq.ENDED,[a$.AUTO_PLAY_FAIL]:aq.AUTO_PLAY_FAIL,[a$.TIME_UPDATE]:{actions:[aZ.UPDATE_PROGRESS,aZ.EMIT_PROGRESS,aZ.EMIT_CHECKPOINT_TPAT_EVENT,aZ.EMIT_SCENE_EVENT,aZ.CHECK_SUCCESS_FULL_VIEW_AD_REACHED,aZ.EMIT_TIME_UPDATE]},[a$.SUSPEND]:{actions:aZ.EMIT_SUSPEND},[a$.WAITING]:{actions:aZ.EMIT_WAITING},[a$.CLOSE]:{actions:aZ.EMIT_CLOSE},[a$.RESET_CLOSE]:{target:aq.LOADING,actions:[aZ.RESET_CONTEXT]}}},[aq.PAUSED]:{entry:aZ.EMIT_PAUSE,on:{[a$.MINIMIZE]:{actions:[aZ.UPDATE_CURRENT_TIME]},[a$.CAN_PLAY]:{actions:aZ.SET_CAN_PLAY},[a$.MAXIMIZE]:{target:aq.PLAYING,actions:[aZ.RESET_CURRENT_TIME]},[a$.PLAY]:aq.PLAYING,[a$.TIME_UPDATE]:{actions:[aZ.UPDATE_PROGRESS,aZ.EMIT_PROGRESS,aZ.EMIT_CHECKPOINT_TPAT_EVENT,aZ.EMIT_SCENE_EVENT]},[a$.AUTO_PLAY_FAIL]:aq.AUTO_PLAY_FAIL,[a$.CLOSE]:{actions:aZ.EMIT_CLOSE},[a$.RESET_CLOSE]:{target:aq.LOADING,actions:[aZ.RESET_CONTEXT]}}},[aq.AUTO_PLAY_FAIL]:{entry:[nn.STANDBY_TIMERS,t9.PAUSE_INTERVALS],on:{[a$.PLAY]:{target:aq.PLAYING,actions:[nn.WAKE_TIMERS,t9.START_INTERVALS]}}},[aq.ENDED]:{on:{[a$.PLAY]:{target:aq.PLAYING,actions:[aZ.INCREMENT_LOOP_COUNT]},[a$.PAUSE]:aq.PAUSED,[a$.CLOSE]:{actions:aZ.EMIT_CLOSE_FULLY_PLAYED},[a$.RESET_CLOSE]:{target:aq.LOADING,actions:[aZ.RESET_CONTEXT]}}}}}),db={actions:d({[aZ.UPDATE_PROGRESS]:g({currentTime:(e,t)=>t.eventTarget.currentTime,duration:(e,t)=>t.eventTarget.duration,progress:(e,t)=>{let{currentTime:n,duration:i}=t.eventTarget;return Math.round(n/i*100)}}),[aZ.EMIT_PROGRESS]:e=>{void 0!==e.duration&&ot().emit({type:"video",event:nW.PROGRESS,data:{progress:e.progress,currentTime:e.currentTime,duration:e.duration}})},[aZ.EMIT_CHECKPOINT_TPAT_EVENT]:e=>{void 0!==e.duration&&dP(e.currentTime,e.duration,e.progress)},[aZ.EMIT_SCENE_EVENT]:e=>{void 0!==e.duration&&dV(e.currentTime,e.duration,eo())},[aZ.EMIT_PAUSE]:()=>{ot().emit({type:"video",event:nW.PAUSE})},[aZ.EMIT_PLAY]:()=>{ot().emit({type:"video",event:nW.PLAY})},[aZ.REPORT_VIDEO_START]:()=>{let e=oe(),t=ng();t.emit({type:"observability",event:F.EVENT,data:{name:x.VIDEO_START,is_muted:e.isMuted()}}),t.emit({type:"observability",event:F.EVENT,data:{name:x.VIDEO_START_COMPLETE}});let n=rT(),i=eo();i&&n.emit({type:"scene-event",event:i$.LOAD_COMPLETE,data:{sceneId:i.getId(),sceneType:i.getSceneType()}})},[aZ.INCREMENT_LOOP_COUNT]:g({loopCount:e=>e.loopCount+1}),[aZ.CHECK_SUCCESS_FULL_VIEW_AD_REACHED]:g({successfulViewAdReached:e=>{let t=eo();return!!((null==t?void 0:t.getSceneType())===eS.video&&t.isAlternative())||(e.successfulViewAdReached?e.successfulViewAdReached:void 0!==e.duration&&e.currentTime>=e.rewardDuration)}}),[aZ.EMIT_CLOSE]:e=>{var t;let n=e.loopCount>0,i=n?null==e?void 0:e.duration:null==e?void 0:e.currentTime;ot().emit({type:"video",event:nW.CLOSE,data:{isVideoFullyPlayed:n,maximumViewingTime:i}}),null===(t=aJ())||void 0===t||t.send({type:a$.RESET_CLOSE})},[aZ.EMIT_CLOSE_FULLY_PLAYED]:e=>{var t;ot().emit({type:"video",event:nW.CLOSE,data:{isVideoFullyPlayed:!0,maximumViewingTime:null==e?void 0:e.duration}}),null===(t=aJ())||void 0===t||t.send({type:a$.RESET_CLOSE})},[aZ.SET_CAN_PLAY]:g({canPlay:()=>!0,duration:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.duration},videoWidth:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.videoWidth},videoHeight:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.videoHeight},videoElement:(e,t)=>t.eventTarget,rewardDuration:(e,t)=>{var n;return oT(null===(n=t.eventTarget)||void 0===n?void 0:n.duration)},orientation:(e,t)=>{var n;let{videoWidth:i,videoHeight:r}=null!==(n=t.eventTarget)&&void 0!==n?n:{};return i/r>1?az.LANDSCAPE:az.PORTRAIT}}),[aZ.EMIT_DURATION_CHANGE]:(e,t)=>{var n;ed().emit({type:"video",event:nW.DURATION_CHANGE,data:{duration:null===(n=t.eventTarget)||void 0===n?void 0:n.duration}})},[aZ.EMIT_WAITING]:()=>{ed().emit({type:"video",event:nW.WAITING})},[aZ.EMIT_SUSPEND]:()=>{ed().emit({type:"video",event:nW.SUSPEND})},[aZ.EMIT_TIME_UPDATE]:()=>{ed().emit({type:"video",event:nW.TIME_UPDATE})},[aZ.UPDATE_CURRENT_TIME]:g({currentTime:e=>e.videoElement?e.videoElement.currentTime:0}),[aZ.RESET_CURRENT_TIME]:e=>{e.videoElement&&(e.videoElement.currentTime=e.currentTime)},[aZ.RESET_CONTEXT]:g({canPlay:!1,currentTime:0,duration:0,rewardDuration:0,progress:0,loopCount:0,videoHeight:0,videoWidth:0}),[aZ.EMIT_LOAD]:()=>{let e=ng();e.emit({type:"observability",event:F.EVENT,data:{name:x.VIDEO_START_REQUEST}}),e.emit({type:"observability",event:F.EVENT,data:{name:x.VIDEO_SCENE_START}});let t=rT(),n=eo();n&&t.emit({type:"scene-event",event:i$.LOAD_START,data:{sceneId:n.getId(),sceneType:n.getSceneType()}})}},ne(),ni())};var dM=()=>sW(dw(),db),dk=class{getCloseButtonDelaySeconds(e,t){return this.globalTimerService.isEnabled()?this.globalTimerService.getTotalCloseButtonDelaySeconds():void 0===e?6:eg(e,this.placementTypeService,t)?e:t}getCloseButtonCountDown(e,t){return!(void 0===e||Number.isNaN(e))&&!(e<=0)&&t}getCloseButtonStyle(e,t){return e?n4.CLOSE:this.globalTimerService.isEnabled()&&this.globalTimerService.getTotalCloseButtonDelaySeconds()>0?n4.SKIP:t}getCloseButtonConfig(e,t){let n=e.getCloseButtonConfig(),i=e.isLastPage(),r={delay:this.getCloseButtonDelaySeconds(t,n.delay),style:this.getCloseButtonStyle(i,n.style),countdown:this.getCloseButtonCountDown(t,n.countdown)};return(sU(!0,es("false"),"VIDEO_TIMER_NOT_VISIBLE_ENDCARD_TIMER_VISIBLE")||sU(!0,es("false"),"BOTH_VIDEO_AND_ENDCARD_TIMERS_NOT_VISIBLE"))&&(r.countdown=!1),(sU(!0,es("false"),"VIDEO_TIMER_VISIBLE_ENDCARD_TIMER_NOT_VISIBLE")||sU(!0,es("false"),"VIDEO_ENDCARD_TIMERS_BOTH_VISIBLE"))&&(r.countdown=!0),r}isShowNextButtonDuringCountDownInBackground(){return!!this.globalTimerService.isEnabled()&&this.globalTimerService.hasReachedVideoPageCloseButtonDelaySeconds()}shouldReplaceShowStoreKitOverlay(){var e;return this.isStoreKitOverlaySupported&&this.placementTypeService.isFullscreen()&&(null===(e=this.productViewService)||void 0===e?void 0:e.isDone())}constructor(e=sR(),t=nJ(),n=nX(),i=ei()){this.globalTimerService=e,this.isStoreKitOverlaySupported=t,this.productViewService=n,this.placementTypeService=i}},dU=(e,t=aJ(),n=l1())=>i=>{if(i.type===t6.NEXT||i.type===t6.LAST_CHANCE_ENDCARD){if((null==t?void 0:t.state.context.successfulViewAdReached)!==!0){null==n||n.send({type:lq.SHOW});return}null==n||n.send({type:lq.HIDE})}e(i)},dB=()=>{let e=r.getInstance(),t=lj.getServiceIdentifier();if(e.has(t))return e.get(t)};const dH=(e,t)=>{var n,i;let r=dB();if(r)switch(t.event){case nW.DURATION_CHANGE:{let e=(null===(n=t.data)||void 0===n?void 0:n.duration)||0;r.onVideoMetadataAvailable(e),r.onVideoDisplayState("fullscreen");break}case nW.WAITING:case nW.SUSPEND:r.onVideoBuffering();break;case nW.TIME_UPDATE:r.onVideoTimeUpdate(),r.onVideoCheckpoint();break;case nW.MUTE:case nW.UNMUTE:r.onSoundChange(t.event);break;case nW.PLAY:case nW.PAUSE:r.onVideoStateChanged(t.event);break;case nW.CLOSE:(null===(i=t.data)||void 0===i?void 0:i.isVideoFullyPlayed)||r.onVideoPageClose();break;case ss.DOWNLOAD_BUTTON_CTA:case"FSC":r.onCtaClick();break;case oD.REMOVE_HANDLER:nI().removeEventHandler(t.type,dH)}};vI="W6zMza_dialog",vf="W6zMza_dialogActions",vN="W6zMza_dialogBody",vm="W6zMza_dialogBox",vD="W6zMza_dialogContent",vR="W6zMza_dialogText",vL="W6zMza_dialogTitle";var dW=({titleText:e,bodyText:t,isVisible:n,identifier:i,children:r})=>/*#__PURE__*/rg("div",{id:null!=i?i:"dialog",role:"dialog",className:vm,style:{visibility:n?"visible":"hidden"},children:/*#__PURE__*/rg("div",{className:vI,children:/*#__PURE__*/rg("div",{className:vD,children:[/*#__PURE__*/rg("div",{className:vL,children:e}),/*#__PURE__*/rg("div",{className:vN,children:[/*#__PURE__*/rg("div",{className:vR,children:t}),/*#__PURE__*/rg("div",{className:vf,children:r})]})]})})}),dF=class{getTitleText(){var e;return null!==(e=this.tokenService.get(w.INCENTIVIZED_TITLE_TEXT))&&void 0!==e?e:"Close this ad?"}getBodyText(){var e;return null!==(e=this.tokenService.get(w.INCENTIVIZED_BODY_TEXT))&&void 0!==e?e:"Are you sure you want to skip this ad? You must finish watching to claim your reward."}getCloseText(){var e;return null!==(e=this.tokenService.get(w.INCENTIVIZED_CLOSE_TEXT))&&void 0!==e?e:"Close Ad"}getContinueText(){var e;return null!==(e=this.tokenService.get(w.INCENTIVIZED_CONTINUE_TEXT))&&void 0!==e?e:"Continue"}constructor(e){this.tokenService=null!=e?e:V()}},dx=()=>{let[e,t]=sW(lJ(),l0);return[e,t]};vy="eDiOmG_continueIcon",vP="eDiOmG_primaryButton",vV="eDiOmG_secondaryButton";var dG=({sendAdEvent:e,showLastChanceEndcard:t=!1})=>{let[n,i]=dx(),r=new dF;return /*#__PURE__*/rg(dW,{identifier:"incentivized-dialog",titleText:r.getTitleText(),bodyText:r.getBodyText(),isVisible:n.value.matches(l$.SHOWING),children:/*#__PURE__*/rg(e2,{children:[/*#__PURE__*/rg("div",{className:vP,children:/*#__PURE__*/rg("button",{className:"primary",type:"button",id:"incentivized-dialog-continue",onClick:()=>{i({type:lq.HIDE})},children:[r.getContinueText(),/*#__PURE__*/rg("span",{className:vy,id:"incentivized-dialog-continue-icon"})]})}),/*#__PURE__*/rg("div",{className:vV,children:/*#__PURE__*/rg("button",{className:"secondary",type:"button",id:"incentivized-dialog-close",onClick:()=>{i({type:lq.CLOSE}),e({type:t?t6.LAST_CHANCE_ENDCARD:t6.NEXT})},children:r.getCloseText()})})]})})};const dK=tU(!1);var dY=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0})=>{let i=new dk,[r,a]=dM(),o=el()?dU(t):t,s=e.getStoreKitOverlayAutoShowConfig().enabled;sz(e.getId(),e.getAppStoreOnDelayConfig(),r.value.context.canPlay),s$(e.getStoreKitOverlayAutoShowConfig(),r.value.context.canPlay),rA("video",dN),sN(dK.value),s9(t),oW(),ld(e);let l=dD();return li({callToActionConfig:dK.value?e.getLastChanceEndcardConfig().cta:e.getCallToActionConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId(),shouldReplaceShowStoreKitOverlay:i.shouldReplaceShowStoreKitOverlay()}),lo({fullScreenClickConfig:dK.value?e.getLastChanceEndcardConfig().fsc:e.getFullScreenClickConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId(),shouldReplaceShowStoreKitOverlay:i.shouldReplaceShowStoreKitOverlay()}),rA("cta",(e,t)=>{dK.value||dH(e,t)}),rA("fsc",(e,t)=>{dK.value||dH(e,t)}),/*#__PURE__*/rg(e2,{children:[/*#__PURE__*/rg(dG,{sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),/*#__PURE__*/rg(s7,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{dK.value=e}}),/*#__PURE__*/rg(s4,{config:e.getFullScreenClickConfig(),children:[r.value.context.canPlay&&n&&!dK.value&&/*#__PURE__*/rg(rV,{config:i.getCloseButtonConfig(e,r.value.context.duration),handleTimerUpdate:l,showNextButtonDuringCountDownInBackground:i.isShowNextButtonDuringCountDownInBackground(),sendAdEvent:o,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),/*#__PURE__*/rg(dn,{isVisible:r.value.matches(aq.AUTO_PLAY_FAIL),sendVideoEvent:a}),/*#__PURE__*/rg(dt,{isInLine:ei().isInLine()}),/*#__PURE__*/rg(l9,{scene:e,videoState:r,sendVideoEvent:a,sendAdEvent:t}),(!e.getCallToActionConfig().isPersistent||s)&&/*#__PURE__*/rg(rO,{delay:e.getCallToActionConfig().delay,isVisible:!1,children:/*#__PURE__*/rg(da,{})}),e.getCallToActionConfig().isPersistent&&!s&&r.value.context.canPlay&&/*#__PURE__*/rg(dg,{scene:e,videoOrientation:r.value.context.orientation,viewportOrientation:en().getOrientation()})]})]})};const dj=e=>4===e.length?e:dj(`0${e}`),dX=e=>e.split("").map(e=>dj(parseInt(e,16).toString(2))).join("").split("");var dz=class{constructor(e=V()){this.tokenService=e,this.getBits=()=>{let e=this.tokenService.get(w.SESSION_ID);if(!e){let e=[];for(let t=0;t<96;t+=1)e.push("0");return e}return dX(e)}}};vw="_0zGmtq_bit",vb="_0zGmtq_leading",vM="_0zGmtq_one",vk="_0zGmtq_watermark",vU="_0zGmtq_zero";const d$=(e,t)=>`bit-${e}-${t}`;var dq=()=>{let e=new dz;return ei().isFullscreen()?/*#__PURE__*/rg("div",{className:vk,id:"watermark",children:[/*#__PURE__*/rg("div",{className:`${vM}  ${vb} ${vw}`}),e.getBits().map((e,t)=>/*#__PURE__*/rg("div",{className:`${vw} ${"0"===e?vU:vM}`,id:d$(e,t)},d$(e,t)))]}):null};vB="m2_mMq_privacyButton";const dZ={[b.ACCELERATE]:"#96633d",[b.EDSP]:"#853d96",[b.UNKNOWN]:"#333"};var dQ=({handleClick:e,adSource:t})=>/*#__PURE__*/rg("button",{type:"button",id:rN,title:"Liftoff Privacy",className:vB,onClick:e,"aria-label":"Liftoff Privacy",children:/*#__PURE__*/rg("svg",{id:"j",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 302 340",children:[/*#__PURE__*/rg("path",{d:"M274.04,32.82L160.56,7.74c-2.53-.42-5.1-.43-7.62,0L28.59,32.87c-12.39,2.04-21.55,13.63-21.55,27.27v165.78c0,7.75,2.99,15.14,8.25,20.36l55.61,55.27c44.48,44.21,116.29,44.21,160.77,0l55.61-55.27c5.26-5.22,8.25-12.62,8.25-20.36V60.08c0-13.62-9.13-25.19-21.49-27.26Z",fill:dZ[null!=t?t:b.UNKNOWN],opacity:".6",strokeWidth:"0"}),/*#__PURE__*/rg("path",{d:"M275.5,26.22L161.67,1.07c-3.25-.55-6.56-.54-10.08.03L27.37,26.22C11.67,28.88.29,43.11.29,60.13v143.34c0,23.78,9.29,46.64,25.47,62.73l51.82,46.31c41.98,37.52,105.43,37.52,147.41,0l51.82-46.32c16.19-16.09,25.47-38.95,25.47-62.73V60.08c0-17.03-11.41-31.3-26.79-33.86ZM288.78,203.48c0,20.2-7.83,39.57-21.48,53.14l-32.94,29.99c-8.73-9.02-16.42-17.46-16.42-17.46-10.8-11.49-24.61-2.92-24.61-2.92-1.95,1.13-4.12,2.13-6.42,3.02-3.77,1.29-8.66,2.76-14.21,4-9.02,1.83-17.27,2.47-20.08,2.65-.44.01-.87.04-1.3.05-.44,0-.87-.04-1.3-.05-2.82-.18-11.06-.82-20.08-2.65-5.55-1.24-10.44-2.71-14.21-4-2.3-.89-4.47-1.88-6.42-3.02,0,0-13.82-8.57-24.61,2.92,0,0-7.28,7.89-16.44,17.48l-32.96-30.01c-13.65-13.56-21.48-32.93-21.48-53.14V60.13c0-10.25,6.83-19.11,15.89-20.6l124.34-25.14c.96-.15,1.92-.22,2.82-.22.8,0,1.57.05,2.25.16l113.83,25.15c9.04,1.51,15.85,10.36,15.85,20.59v143.4Z",fill:"#f3f4f5",strokeWidth:"0"}),/*#__PURE__*/rg("path",{d:"M188.96,142.21c-6.2,0-9.55,5-10.07,15.01l-.06,3.69c0,11.44,3.34,17.16,10.01,17.16,4.45,0,7.62-1.87,9.53-5.6v-24.54c-1.83-3.81-4.96-5.72-9.41-5.72Z",fill:"#f3f4f5",strokeWidth:"0"}),/*#__PURE__*/rg("polygon",{points:"107.78 160.02 126.43 160.02 117.07 129.93 107.78 160.02",fill:"#f3f4f5",strokeWidth:"0"}),/*#__PURE__*/rg("path",{d:"M151,57c-51.36,0-93,41.64-93,93s41.64,93,93,93,93-41.64,93-93-41.64-93-93-93ZM136.49,192.36l-5.06-16.2h-28.65l-5,16.2h-22.34l31.81-86.73h19.66l32.05,86.73h-22.46ZM200.46,192.36l-1.01-6.91c-4.13,5.4-9.37,8.1-15.73,8.1-7.67,0-13.74-2.94-18.23-8.82-4.49-5.88-6.73-14.24-6.73-25.08,0-10.21,2.2-18.25,6.61-24.13,4.41-5.88,10.56-8.82,18.47-8.82,5.76,0,10.6,2.26,14.54,6.79v-32.64h20.13v91.5h-18.05Z",fill:"#f3f4f5",strokeWidth:"0"})]})}),dJ=((_I=dJ||{})[_I.LEFT=0]="LEFT",_I[_I.RIGHT=1]="RIGHT",_I[_I.UP=2]="UP",_I[_I.DOWN=3]="DOWN",_I),d0=((_f=d0||{})[_f.HORIZONTAL=0]="HORIZONTAL",_f[_f.VERTICAL=1]="VERTICAL",_f);const d1=tU(0),d2=tU(0),d3=tU(!1),d5=tU(0);var d4=({children:e,onSwipeLeft:t,onSwipeRight:n,onSwipeUp:i,onSwipeDown:r})=>{let a=tC(null),o=e=>{var t,n,i,r;return e instanceof TouchEvent?{endX:e.changedTouches[0].clientX,endY:e.changedTouches[0].clientY}:e instanceof MouseEvent?{endX:e.clientX,endY:e.clientY}:{endX:null!==(i=null===(t=e.detail)||void 0===t?void 0:t.clientX)&&void 0!==i?i:0,endY:null!==(r=null===(n=e.detail)||void 0===n?void 0:n.clientY)&&void 0!==r?r:0}},s=(e,t)=>Date.now()-d5.value>200||e.Distance>=.15*t,l=(e,t)=>e.Distance>=.3*t,d=(e,t)=>Math.abs(e)>Math.abs(t),c=(e,t)=>d(e,t)?e>0?1:0:t>0?3:2,u=(e,t)=>d(e,t)?Math.abs(e):Math.abs(t),E=(e,t)=>{let n=e-d1.value,i=t-d2.value;return{Direction:c(n,i),Orientation:d(n,i)?0:1,Distance:u(n,i),DeltaX:n,DeltaY:i}};return /*#__PURE__*/rg("div",{ref:a,title:"swipe",onTouchStart:e=>{d3.value=!0;let t=0,n=0;e instanceof TouchEvent?(t=e.touches[0].clientX,n=e.touches[0].clientY):e instanceof MouseEvent?(t=e.clientX,n=e.clientY):(t=e.detail.clientX,n=e.detail.clientY),d1.value=t,d2.value=n,d5.value=Date.now()},onTouchEnd:e=>{var d;let c=null==a?void 0:null===(d=a.current)||void 0===d?void 0:d.childNodes;if(!d3||!c)return;let{endX:u,endY:_}=o(e),v=E(u,_),T=c[0],S=0===v.Orientation?T.clientWidth:T.clientHeight;if(s(v,S)&&l(v,S)){switch(v.Direction){case 0:t&&t();break;case 1:n&&n();break;case 3:r&&r();break;default:i&&i()}d3.value=!1}},children:e})};vH="FbTWOG_closeIcon",vW="FbTWOG_displayNone",vF="FbTWOG_hasEventMetadata",vx="FbTWOG_hide",vG="FbTWOG_id",vK="FbTWOG_idContent",vY="FbTWOG_idName",vj="FbTWOG_ids",vX="FbTWOG_mask",vz="FbTWOG_popupBody",v$="FbTWOG_popupContainer",vq="FbTWOG_popupContainerDisplay",vZ="FbTWOG_popupHeader",vQ="FbTWOG_popupTitle",vJ="FbTWOG_privacyPopup",v0="FbTWOG_readMore",v1="FbTWOG_show";var d6=({isOpen:e,handleReadMoreClick:t,closeHandler:n,creativeID:i,eventID:r})=>/*#__PURE__*/rg("div",{className:sQ(v$,e?vq:""),id:rf,children:[/*#__PURE__*/rg("div",{className:e?vX:vW,id:"privacy-popup-mask",onClick:n,role:"none"}),/*#__PURE__*/rg(d4,{onSwipeDown:n,children:/*#__PURE__*/rg("div",{id:"privacy-popup",role:"dialog","aria-label":"Privacy popup","aria-hidden":e?"false":"true",className:sQ(vJ,e?v1:vx),children:[/*#__PURE__*/rg("div",{className:vZ,children:[/*#__PURE__*/rg("div",{className:vQ,title:"privacy-popup-title",children:"Privacy Policy"}),/*#__PURE__*/rg("button",{type:"button","aria-label":"Close privacy popup",onClick:n,id:"privacy-close-button",children:/*#__PURE__*/rg("span",{className:vH})})]}),/*#__PURE__*/rg("div",{className:vz,children:"Liftoff, Inc. understands the importance of privacy. Liftoff operates a mobile ad network (the 'Ad Network' or the 'Services') through which Liftoff displays targeted, contextual ads."}),/*#__PURE__*/rg("button",{type:"button",className:v0,onClick:t,id:"privacy-read-more-button",children:"Privacy Policy & Ad Information"}),/*#__PURE__*/rg("div",{className:sQ(vj,i||r?vF:""),children:[i&&/*#__PURE__*/rg("div",{className:vG,id:"privacy-drawer-creative-id",children:[/*#__PURE__*/rg("div",{className:vY,children:"Creative ID"}),/*#__PURE__*/rg("div",{className:vK,children:i})]}),r&&/*#__PURE__*/rg("div",{className:vG,id:"privacy-drawer-event-id",children:[/*#__PURE__*/rg("div",{className:vY,children:"Event ID"}),/*#__PURE__*/rg("div",{className:vK,children:r})]})]})]})})]}),d8=class{getAdSource(){return this.placementTypeService.getAdSource()}getCreativeId(){var e;return null!==(e=this.tokenService.get(w.CREATIVE_ID))&&void 0!==e?e:""}getEventId(){var e;return null!==(e=this.tokenService.get(w.SESSION_ID))&&void 0!==e?e:""}handleDrawerClose(e){e({type:t6.PRIVACY_BOTTOM_DRAWER_CLOSE})}handleIconClick(e){e({type:t6.PRIVACY_BOTTOM_DRAWER_OPEN})}handleReadMoreClick(e){e({type:t6.PRIVACY_BOTTOM_DRAWER_CLOSE}),window.setTimeout(()=>{e({type:t6.OPEN_PRIVACY_PAGE})},50)}privacyDrawerEnabled(){return this.placementTypeService.isFullscreen()}constructor(e=V(),t=ei()){this.tokenService=e,this.placementTypeService=t}};const d7=tU(!1);var d9=({sendAdEvent:e,privacyService:t=new d8,customMraidEventReportingService:n=lf()})=>{let i=()=>{d7.value=!1,t.handleDrawerClose(e)};return rA("custom-mraid",(e,t)=>{t.event===lA.CLOSE&&d7&&i()},n),/*#__PURE__*/rg(e2,{children:[/*#__PURE__*/rg(dQ,{handleClick:()=>{t.handleIconClick(e),d7.value=!0},adSource:t.getAdSource()}),t.privacyDrawerEnabled()&&/*#__PURE__*/rg(d6,{isOpen:d7.value,closeHandler:i,handleReadMoreClick:()=>{d7.value=!1,t.handleReadMoreClick(e)},creativeID:t.getCreativeId(),eventID:t.getEventId()})]})},ce=function(e){let t=tC(0),n=tC(0);return tg(()=>{let i=i=>{let r=Date.now();r-n.current>800&&(t.current=0),t.current+=1,n.current=r;let{clientX:a,clientY:o}=i;t.current>=3&&(e(a,o),t.current=0)};return window.addEventListener("pointerdown",i),()=>window.removeEventListener("pointerdown",i)},[e]),null};v2="gRz7DW_ad";var ct=()=>{let[e,t]=lD();ce((e,t)=>{let{scene:n}=ea.getValue();nO({name:x.FRUSTRATION_CLICKS,scene_id:null==n?void 0:n.getId(),scene_type:null==n?void 0:n.getSceneType(),coordinates:[e,t].join(",")})});let{isCloseButtonVisible:n,isPrivacyButtonVisible:i,shouldRenderIFrame:r}=e.value.context,a=lI(e.value),o=i&&a.getSceneType()!==eS.closed,s=ax().getHTMLSceneToPreload(a);return /*#__PURE__*/rg("div",{id:v2,children:/*#__PURE__*/rg(lL,{children:[/*#__PURE__*/rg(dq,{}),o&&/*#__PURE__*/rg(d9,{sendAdEvent:t}),a.getSceneType()===eS.gdpr&&/*#__PURE__*/rg(lP,{sendAdEvent:t}),a.getSceneType()===eS.image&&/*#__PURE__*/rg(lb,{scene:a,sendAdEvent:t,isCloseButtonVisible:n},a.getId()),a.getSceneType()===eS.video&&/*#__PURE__*/rg(dY,{scene:a,sendAdEvent:t,isCloseButtonVisible:n},a.getId()),(!!s||a.getSceneType()===eS.endcard)&&/*#__PURE__*/rg(lh,{scene:(null==s?void 0:s.scene)||a,sendAdEvent:t,shouldRenderIFrame:s?s.shouldRenderIFrame:r,isCloseButtonVisible:s?s.isCloseButtonVisible:n,eligibleToPreload:!!s},((null==s?void 0:s.scene)||a).getId()),a.getSceneType()===eS.closed&&/*#__PURE__*/rg(lR,{})]})})},cn=(e=o6(),t=lN(),n=ng(),i=lI)=>{let r=i(e.state);ea.setValue({scene:r}),t.start(r),n.emit({type:"observability",event:F.EVENT,data:{name:x.SCENE_START,scene_id:r.getId(),scene_type:r.getSceneType()}}),e.start()},ci=async(e,t,n)=>{var i;let r=0,a=0,o=0,s=n.getPlacementType(),l=t.get(w.AD_SOURCE),d=t.get(w.CREATIVE_ID),c=null!==(i=t.get(w.ORIGINAL_VIDEO_URL))&&void 0!==i?i:t.get(w.MAIN_STREAM);try{(await e.getAllRecords()).forEach(({placementType:e,creativeId:t,adSource:n,videoUrl:i})=>{e===s&&(r+=1),t===d&&n===l&&(a+=1),i===c&&(o+=1)})}catch(e){return Promise.reject(Error("Failed to get user activities"))}return{ad_count:r,same_creative:a,same_video:o}};const cr=async(e=nx(),t=V(),n=ei(),i=ci,a=nO)=>{let o={name:x.AD_START,elapsed:Date.now()-r.getInstance().startTimestamp};if(e)try{await e.addRecord();let r=await i(e,t,n);o=d({},o,r)}catch(e){}a(o)};var ca=()=>{let e=r.getInstance(),t=new sK;e.bind(sK.getServiceIdentifier(),t)},co=()=>{let e=r.getInstance(),t=new lt;e.bind(lt.getServiceIdentifier(),t)},cs=(e=en(),t=y())=>{let n=r.getInstance(),i=aY.getServiceIdentifier(),a=Object.values(aG);e.getMraidVersion().isLessThan(ay.V5_2_1)&&(a=a.filter(e=>e!==aG.SILENT_CHANGE));let o=new aY(a,t);n.bind(i,o),o.init()};const cl=(e,t,n,i)=>{let r=t.getOperatingSystem()===B.iOS,a=aM(i),o=t.getSdkVersion(),s=n.isInLine();return!!(r&&!a&&(o.isEqualTo(new k("7.4.0"))&&s||o.isGreaterThanOrEqualTo(new k("7.4.1"))))||e};var cd=(e=aw(),t=aV(),n=oe(),i=en(),r=ei(),a=nI())=>{let o=!!i.getMraidVersion().isGreaterThanOrEqualTo(ay.V5_2_1)&&cl(t,i,r,a);e||o?n.mute():n.unmute()};class cc{setDefaultAttributes(){var e;let t={app_name:"View Master Loki",app_environment:"production"};this.tokenService.has(w.SESSION_ID)&&(t.session_id=null!==(e=this.tokenService.get(w.SESSION_ID))&&void 0!==e?e:""),this.defaultAttributes=t}getUrl(){return`${this.endpoint}/api/v1/push`}static getTimestampString(e){let t=null!=e?e:new Date;return`${1e6*t.getTime()}`}static formatAttributes(e,t){return`${Object.keys(e).map(t=>[t,e[t]]).map(([e,t])=>`${e}="${t}"`).join(" ")} timestamp="${t.toJSON()}"`}getBody(e,t,n){var i,r,a,o;let s=cc.getTimestampString(n),l=cc.formatAttributes(t,n);return JSON.stringify({streams:[{stream:{app:null===(i=this.defaultAttributes)||void 0===i?void 0:i.app_name,kind:e,adSource:null!==(r=this.tokenService.get(w.AD_SOURCE))&&void 0!==r?r:"",isIncentivized:el(this.tokenService),placementType:this.placementTypeService.getPlacementType(),platform:this.environmentService.getOperatingSystem(),sdkVersion:this.environmentService.getSdkVersion().toString(),templateVersion:null!==(a=window.appVersion)&&void 0!==a?a:"0.0.0",nautilusVersion:null!==(o=this.tokenService.get(w.NAUTILUS_VERSION))&&void 0!==o?o:"0.0.0"},values:[[s,l]]}]})}pushEvent(e,t,n){var i;console.log("pushEvent",e,t),null===(i=this.worker)||void 0===i||i.postMessage(this.getBody(F.EVENT,d({name:e},this.defaultAttributes,t),null!=n?n:new Date))}pushError(e,t,n){var i,r,a;let o="",s="";"string"==typeof e?o=e:(s=null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:"",o=null!==(a=null==e?void 0:e.message)&&void 0!==a?a:""),null===(i=this.worker)||void 0===i||i.postMessage(this.getBody(F.ERROR,d({message:o,stack:s},this.defaultAttributes,t),null!=n?n:new Date))}isObserved(){return es(this.tokenService.get(w.OBSERVABILITY))}startWorker(){let e=new Blob([`
      let queue = [];

      self.addEventListener('message', function(event) {
        const message = event.data;
        queue.push(message);
      });

      function sendMessages() {
        if (queue.length > 0) {
          const message = queue.shift();
          fetch('${this.getUrl()}', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'X-Scope-OrgID': 'viewmaster',
            },
            body: message // message is already stringified
          })
          .then(function (response) {
            if (!response.ok) {
              throw new Error('Failed to send message');
            }
          })
          .catch(function (error) {
            console.error('Error sending message:', error);
          })
          .finally(function () {
            sendMessages(); // Continue sending messages
          });
        } else {
          setTimeout(sendMessages, 100); // Check for new messages every 100 milliseconds
        }
      }
      sendMessages();
    `],{type:"application/javascript"}),t=URL.createObjectURL(e);this.worker=new Worker(t)}constructor(e,t=V(),n=ei(),i=en()){this.endpoint=e,this.tokenService=t,this.placementTypeService=n,this.environmentService=i,this.setDefaultAttributes(),this.startWorker()}}var cu=()=>new cc("https://logging-gateway.vungle.io:32443/log/loki"),cE=(e=nD())=>{e.init(cu)},c_="product-view",cv=((_N=cv||{}).ADD_VIEWABILITY_HANDLER="addViewabilityHandler",_N.CLOSE_STORE_VIEW="closeStoreView",_N.OPEN_STORE_VIEW="openStoreView",_N.REMOVE_VIEWABILITY_HANDLER="removeViewabilityHandler",_N.SHOW_FALLBACK="showFallback",_N.UPDATE_OPEN_COUNT="updateOpenCount",_N),cT=(e,t)=>e.interpreterMap.get(t),cS=(e=tJ(),t=c_)=>cT(e,t);const ch=(e,t=ng())=>t.getActivityEvents().some(t=>{var n;return t.name===F.SIGNAL_EVENT&&"observability"===t.eventType&&(null===(n=t.data)||void 0===n?void 0:n.name)===e.name});var cp=(e,t=!0,n=ng())=>{t&&ch(e,n)||n.emit({type:"observability",event:F.SIGNAL_EVENT,data:e})};const cg=()=>({id:c_,initial:nY.HIDDEN,context:{delay:0,openCount:0},states:{[nY.SHOWING]:{on:{[nK.CLOSE]:{target:nY.HIDDEN,actions:[cv.CLOSE_STORE_VIEW,cv.REMOVE_VIEWABILITY_HANDLER]},[nK.SET_FALLBACK]:{target:nY.FALLBACK,actions:[cv.REMOVE_VIEWABILITY_HANDLER]}}},[nY.HIDDEN]:{on:{[nK.OPEN]:{target:nY.SHOWING,actions:[cv.ADD_VIEWABILITY_HANDLER,cv.UPDATE_OPEN_COUNT,cv.OPEN_STORE_VIEW]}}},[nY.FALLBACK]:{on:{[nK.OPEN]:{actions:[cv.SHOW_FALLBACK]}}},[nY.INITIAL]:{},[nY.PREPARING]:{},[nY.DONE]:{}}}),cC=(e,t)=>{var n;t.event===nf.MAXIMIZED&&(null===(n=cS())||void 0===n||n.send({type:nK.CLOSE}))},cO=(e=y(),t=ed())=>({actions:{[cv.OPEN_STORE_VIEW]:()=>{var n,i;nO({name:x.APP_STORE_OPEN},void 0,void 0,t),cp({name:x.APP_STORE_OPEN},!0,t),null===(i=e.getMraidExt())||void 0===i||null===(n=i.openAppStore)||void 0===n||n.call(i,0)},[cv.CLOSE_STORE_VIEW]:()=>{nO({name:x.APP_STORE_CLOSE},void 0,void 0,t)},[cv.ADD_VIEWABILITY_HANDLER]:()=>{t.addEventHandler("viewability",cC)},[cv.REMOVE_VIEWABILITY_HANDLER]:()=>{t.removeEventHandler("viewability",cC)},[cv.UPDATE_OPEN_COUNT]:g({openCount:e=>e.openCount?e.openCount+1:1}),[cv.SHOW_FALLBACK]:()=>{var t,n;if(nJ())null===(t=nS())||void 0===t||t.open({fallback:n_.APP_STORE});else{let t=le();t&&(null===(n=e.getMraid())||void 0===n||n.open(t))}}}});var cA=((_m=cA||{}).PREPARE_STORE_VIEW="prepareStoreView",_m.SET_APP_STORE_ID="setAppStoreId",_m);const cI=d({},cv,cA),cf=()=>({id:c_,initial:nY.INITIAL,context:{delay:0,openCount:0,appStoreId:void 0},states:{[nY.INITIAL]:{on:{[nK.READY]:{target:nY.PREPARING,actions:[cI.SET_APP_STORE_ID,cI.PREPARE_STORE_VIEW]}}},[nY.PREPARING]:{on:{[nK.PREPARE_SUCCESS]:{target:nY.HIDDEN}}},[nY.SHOWING]:{on:{[nK.CLOSE]:{target:nY.INITIAL,actions:[cv.CLOSE_STORE_VIEW,cv.REMOVE_VIEWABILITY_HANDLER]}}},[nY.HIDDEN]:{on:{[nK.OPEN]:{target:nY.SHOWING,actions:[cv.ADD_VIEWABILITY_HANDLER,cv.UPDATE_OPEN_COUNT,cv.OPEN_STORE_VIEW]}}},[nY.FALLBACK]:{},[nY.DONE]:{}}}),cN=(e=y(),t=ed())=>({actions:O(d({},cO(e,t).actions),{[cI.SET_APP_STORE_ID]:g({appStoreId:(e,t)=>t.appStoreId||e.appStoreId}),[cI.PREPARE_STORE_VIEW]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.prepareStoreView)||void 0===n||n.call(i,t.appStoreId)},[cI.OPEN_STORE_VIEW]:n=>{if(n.appStoreId){var i,r;nO({name:x.APP_STORE_OPEN},void 0,void 0,t),null===(r=e.getMraidExt())||void 0===r||null===(i=r.presentStoreView)||void 0===i||i.call(r,n.appStoreId)}}})});var cm=class extends nj{init(e){var t;null===(t=this.interpreter)||void 0===t||t.send(d({type:nK.READY},e))}close(){var e,t;null===(e=this.interpreter)||void 0===e||e.send({type:nK.CLOSE}),null===(t=this.interpreter)||void 0===t||t.send({type:nK.READY})}constructor(e=cf,t=cN,n=tJ()){super(e(),t(),n)}};const cD=()=>{let e=cg(),t=e.states[nY.SHOWING];return t.on=O(d({},t.on),{[nK.CLOSE]:{target:nY.DONE,actions:[cv.CLOSE_STORE_VIEW,cv.REMOVE_VIEWABILITY_HANDLER]}}),e},cR=()=>cD();var cL=class extends nj{fallback(){var e;!1!==this.hasFallback&&(null===(e=this.interpreter)||void 0===e||e.send({type:nK.SET_FALLBACK}),this.open())}constructor(e=cg,t=cO,n=tJ()){super(e(),t(),n)}},cy=class extends cL{constructor(e=cR,t=cO,n=tJ()){super(e,t,n)}};const cP=()=>{let e=cf(),t=e.states[nY.SHOWING];return t.on=O(d({},t.on),{[nK.CLOSE]:{target:nY.DONE,actions:[cv.CLOSE_STORE_VIEW,cv.REMOVE_VIEWABILITY_HANDLER]}}),e},cV=()=>cP();var cw=class extends cm{constructor(e=cV,t=cN,n=tJ()){super(e,t,n)}},cb=class extends cL{constructor(e=cD,t=cO,n=tJ()){super(e,t,n)}},cM=class extends cm{constructor(e=cP,t=cN,n=tJ()){super(e,t,n)}},ck=class{withAppStoreId(e){let t=iC(this.tokenService);return t&&e.init({appStoreId:t}),e}resolve(){let e=new k("17.2"),t=new k("7.0"),n=new k("7.1"),i=new k("7.2.1");if(this.environmentService.getOsVersion().isGreaterThanOrEqualTo(e)){let e=this.environmentService.getSdkVersion();if(st()&&e.isLessThan(i))return new cy;if(e.isGreaterThanOrEqualTo(t)&&e.isLessThan(n))return this.withAppStoreId(new cw)}return W.isAffectedByStoreKitProductViewMaskIssue(this.environmentService)?st()?new cb:this.withAppStoreId(new cM):st()?new cL:this.withAppStoreId(new cm)}constructor(e=en(),t=V()){this.environmentService=e,this.tokenService=t}},cU=class{resolve(){if(this.environmentService.getOperatingSystem()===B.iOS)return new ck(this.environmentService).resolve()}constructor(e=en(),t=tJ(),n=aH(),i=t7()){this.environmentService=e,this.stateMachineService=t,this.viewableService=n,this.intervalService=i}},cB=((_D={}).RESET_VIEWABLE="resetViewable",_D.SET_VIEWABLE_TO_FALSE="setViewableToFalse",_D),cH=e=>({resetViewable:()=>{(e||aH()).resetViewable()},setViewableToFalse:()=>{(e||aH()).setViewable(!1)}});const cW=()=>({id:c_,initial:nY.HIDDEN,context:{delay:0},states:{[nY.SHOWING]:{on:{[nK.CLOSE]:{target:nY.HIDDEN,actions:[cB.RESET_VIEWABLE,t9.START_INTERVALS]}}},[nY.HIDDEN]:{on:{[nK.OPEN]:{target:nY.SHOWING,actions:[cB.SET_VIEWABLE_TO_FALSE,t9.PAUSE_INTERVALS]}}},[nY.INITIAL]:{},[nY.PREPARING]:{},[nY.FALLBACK]:{},[nY.DONE]:{}}}),cF=(e=aH(),t=t7())=>({actions:d({},cH(e),ne(t))});var cx=class extends nj{constructor(e=cW,t=cF,n=tJ(),i=aH(),r=t7()){super(e(),t(i,r),n)}},cG=(e=en(),t=tJ(),n=aH(),i=t7())=>{let a=r.getInstance(),o=new cU(e,t,n,i).resolve();return o&&a.bind(cx.getServiceIdentifier(),o),o};class cK extends t8{static getInstances(e=o1()){return e?[new cK(ev)]:[]}getId(){return this.id}getSceneType(){return this.sceneType}constructor(e){super(),this.id=e,this.sceneType=eS.gdpr}}var cY=class extends iv{getFullScreenClickConfig(){var e;return{enabled:void 0!==this.ecImageTokenValue||super.getFullScreenClickConfig().enabled,ctaUrl:null!==(e=this.ecCtaUrlTokenValue)&&void 0!==e?e:"",id:this.id,target:super.getFullScreenClickConfig().target}}constructor({id:e,ecImageTokenValue:t,ecCtaUrlTokenValue:n,skOverlayAutoTokenValue:i,fullCtaOptionTokenValue:r,fullCtaTokenValue:a,skFullCtaTokenValue:o,placementType:s}){super({skOverlayAutoTokenValue:i,fullCtaOptionTokenValue:r,fullCtaTokenValue:a,skFullCtaTokenValue:o,id:e,placementType:s}),this.ecImageTokenValue=t,this.ecCtaUrlTokenValue=n}},cj=(e=!1,t=nI())=>{let n=iY(t,nR.RESOURCE,nL.IMAGE).pipe(ij()).pipe(iX(iz(t,i$.SCENE_END)));return O(d({},iZ(t,e)),{error_count:n})};class cX extends i3{getSceneType(){return this.sceneType}getFullScreenClickConfig(){return this.fullScreenClickConfig}getCloseButtonConfig(){return O(d({},this.closeButtonConfig),{style:this.isLastPage()?n4.CLOSE:this.closeButtonConfig.style})}getCallToActionConfig(){return this.callToActionConfig}getEventStreams(){return this.eventStreams?this.eventStreams:cj(this.lastChanceEndcardConfig.enabled)}static getInstances(e=V(),t=ei(),n=en(),i=ec()){let r=[],a=[w.EC_IMAGE,w.EC_IMAGE_2],o=e.has(w.EC_HTML);return a.filter(t=>e.has(t)).forEach((a,s)=>{var l;let d=`image_${s}`,c=o?s+1:s;r.push(new cX({id:d,url:null!==(l=e.get(a))&&void 0!==l?l:"",index:c,fullScreenClickConfig:new cY({id:d,ecImageTokenValue:e.get(w.EC_IMAGE),ecCtaUrlTokenValue:e.get(w.EC_CTA_URL),skOverlayAutoTokenValue:e.get(w.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(w.FULL_CTA_OPTION),fullCtaTokenValue:e.get(w.FULL_CTA),skFullCtaTokenValue:e.get(w.SK_FSC),placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:new iI(c,this.isEndcardOnly(e),iC(e),e.get(w.FULL_CTA_OPTION),e.get(w.SKOVERLAY_AUTO),e.get(w.SKOVERLAY_DELAY_SECONDS),e.get(w.EC_SKOVERLAY_DELAY_SECONDS),e.get(w.SKOVERLAY_AUTO_CLOSE),e.get(w.EC_SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new iN(c,iC(e),e.get(w.APP_STORE_ON_ENDCARD_AUTO_DELAY),n).getAppStoreOnDelayConfig(),lastChanceEndcardConfig:new iD(im(d,e,t)).getLastChanceEndcardConfig(),trackingEventMapConfig:new iL(!1).getTrackingEventMapConfig(),closeButtonConfig:new iR({ecCloseButtonDelaySecondsTokenValue:e.get(w.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(w.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(w.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(w.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:1===c}).getCloseButtonConfig(),callToActionConfig:new ib({skEcCtaOnlyTokenValue:e.get(w.SK_EC_CTA_ONLY),appMetaProviderParams:iV(e,i)}).getCallToActionConfig(),placementTypeService:t,shouldSplitVideoEndcardClick:es(e.get(w.VIDEO_ENDCARD_CLICK_SPLIT))}))}),r}constructor({id:e,url:t,index:n,fullScreenClickConfig:i,storeKitOverlayAutoShowConfig:r,appStoreOnDelayConfig:a,lastChanceEndcardConfig:o,closeButtonConfig:s,trackingEventMapConfig:l,callToActionConfig:d,placementTypeService:c=ei(),shouldSplitVideoEndcardClick:u=!1,eventStreams:E}){super({id:e,endcardContent:t,index:n,isAlternative:!1,compressionType:i1.NONE,storeKitOverlayAutoShowConfig:r,appStoreOnDelayConfig:a,lastChanceEndcardConfig:o,omsdkEnabled:!1,trackingEventMapConfig:l,callToActionConfig:d,closeButtonConfig:s,placementTypeService:c,eligibleToPreload:!1,shouldSplitVideoEndcardClick:u,eventStreams:E}),this.sceneType=eS.image,this.id=e,this.url=t,this.index=n,this.fullScreenClickConfig=i,this.storeKitOverlayAutoShowConfig=r,this.appStoreOnDelayConfig=a,this.lastChanceEndcardConfig=o,this.trackingEventMapConfig=l,this.callToActionConfig=d,this.closeButtonConfig=s,this.placementTypeService=c,this.eventStreams=E}}var cz=class{static getInstances(e=V(),t=ei(),n=ec()){let i="ALT_MAIN_STREAM_",r="ALT_MAIN_VIDEO_",a=[];return[...e.getSeriesTokens(i),...e.getSeriesTokens(r)].forEach((o,s)=>{var l;let d=o.startsWith(i),c=o.split(d?i:r),u=c[c.length-1];a.push(new ra({id:u,url:null!==(l=e.get(o))&&void 0!==l?l:"",index:s,isAlternative:!0,videoType:d?rr.HLS:rr.PROGRESSIVE,fullScreenClickConfig:new iv({skOverlayAutoTokenValue:e.get(w.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(w.FULL_CTA_OPTION),fullCtaTokenValue:e.get(w.FULL_CTA),skFullCtaTokenValue:e.get(w.SK_FSC),placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:{enabled:!1,isAutoClose:!1,autoShowDelay:0,openCallback:()=>{}},appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},callToActionConfig:new i8(i6(e,t,n)).getCallToActionConfig(),lastChanceEndcardConfig:new iD(im(u,e,t)).getLastChanceEndcardConfig(),progressBarConfig:new i4({videoProgressBarTokenValue:e.get(w.VIDEO_PROGRESS_BAR),videoProgressBarColorTokenValue:e.get(w.VIDEO_PROGRESS_BAR_COLOR),ctaButtonBackgroundTokenValue:e.get(w.CTA_BUTTON_BACKGROUND),isBanner:t.isBanner()}).getProgressBarConfig(),closeButtonConfig:new i5({closeButtonDelaySecondsTokenValue:e.get(w.CLOSE_BUTTON_DELAY_SECONDS),incentivizedCloseButtonDelaySecondsTokenValue:e.get(w.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),incentivizedTokenValue:e.get(w.INCENTIVIZED),videoCloseButtonAsSkipTokenValue:e.get(w.VIDEO_CLOSE_BUTTON_AS_SKIP),showVideoCloseButtonCountDownTokenValue:e.get(w.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN)}).getCloseButtonConfig(),trackingEventMapConfig:new iL(!1).getTrackingEventMapConfig(),loopVideo:!1,isFullscreen:t.isFullscreen()}))}),a}},c$=class{static getInstances(e=V(),t=ei(),n=ec()){let i="ALT_EC_",r=[],a=e.getSeriesTokens(i),o=e=>{let t=e.split(i);return t[t.length-1]};return a.forEach((i,a)=>{var s;let l=o(i);r.push(new i3({id:l,endcardContent:null!==(s=e.get(i))&&void 0!==s?s:"",index:a,isAlternative:!0,compressionType:i1.BASE64_ENCODED,storeKitOverlayAutoShowConfig:{enabled:!1,isAutoClose:!1,autoShowDelay:0,openCallback:()=>{}},appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:new iD(im(l,e,t)).getLastChanceEndcardConfig(),omsdkEnabled:!1,closeButtonConfig:new iR({ecCloseButtonDelaySecondsTokenValue:e.get(w.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(w.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(w.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(w.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:!1}).getCloseButtonConfig(),trackingEventMapConfig:{enabled:!1},callToActionConfig:new ib({skEcCtaOnlyTokenValue:e.get(w.SK_EC_CTA_ONLY),appMetaProviderParams:iV(e,n)}).getCallToActionConfig(),placementTypeService:t,eligibleToPreload:!1}))}),r}},cq=class{addTransformer(e){return this.transformers.push(e),this}build(){return this.mainScenes=this.buildMainScenes(),this.alternativeScenes=this.buildAlternativeScenes(),this.transformers.forEach(e=>{e.transform(this.mainScenes)}),this.mainScenes}buildMainScenes(){return[...cK.getInstances(),...ra.getInstances(),...i3.getInstances(),...cX.getInstances(),...iW.getInstances()]}buildAlternativeScenes(){let e;let t=[...cz.getInstances(),...c$.getInstances()],n=this.mainScenes.findIndex(e=>e.getSceneType()===eS.endcard),i=this.mainScenes[n+1];return i&&(e=i),t.forEach(t=>{let n=t.getTransitions().find(e=>e.name===t6.NEXT);n?n.scene=e:t.addTransition({name:t6.NEXT,scene:e,actions:[]}),t.next=e}),t}constructor(){this.transformers=[],this.mainScenes=[],this.alternativeScenes=[],this.tokenService=V()}},cZ=class{transform(e){return e.forEach((t,n)=>{var i,r;if(n===e.length-1)return;let a=t.getTransitions().find(e=>e.name===t6.NEXT);a?a.scene=null!==(i=e[n+1])&&void 0!==i?i:void 0:t.addTransition({name:t6.NEXT,scene:null!==(r=e[n+1])&&void 0!==r?r:void 0,actions:[]})}),e}},cQ=()=>!!nE()&&es(V().get(w.APP_STORE_ON_FIRST_TRANSITION)),cJ=class{transform(e){return e.length&&this.insertionHelper(e[0],this.index),e}insertionHelper(e,t){var n;if(0===t)return;let i=null===(n=e.getTransitions())||void 0===n?void 0:n.find(e=>e.name===t6.NEXT&&e.scene),r=null==i?void 0:i.scene;if(i&&r){if(this.ineligibleSceneTypes.includes(e.getSceneType())){this.insertionHelper(r,t);return}if(1===t){i.actions.some(e=>e.name===n0.SHOW_PRODUCT_VIEW)||(i.actions.push({name:n0.EMIT_TRANSITION_OPEN_OBSERVABILITY_EVENT}),i.actions.push({name:n0.SHOW_PRODUCT_VIEW}));return}this.insertionHelper(r,t-1)}}constructor(e){this.index=e,this.ineligibleSceneTypes=[eS.gdpr]}},c0=()=>!!nE()&&es(V().get(w.APP_STORE_ON_SECOND_TRANSITION)),c1=class{transform(e){return this.addCloseAdAction(e,0),e}addCloseAdAction(e,t){var n,i;if(void 0===e[t+1])return;let r=null===(n=e[t].getTransitions())||void 0===n?void 0:n.find(e=>e.name===t6.NEXT&&e.scene);if(r&&r.actions.find(e=>e.name===n0.SHOW_PRODUCT_VIEW)&&(null==r?void 0:null===(i=r.scene)||void 0===i?void 0:i.getSceneType())===eS.closed){r.actions.push({name:n0.END_AD_ON_PRODUCT_VIEW_CLOSE});let e=r.scene.getEntryActions().findIndex(e=>e.name===iU.CLOSE_AD);-1!==e&&r.scene.getEntryActions().splice(e,1)}this.addCloseAdAction(e,t+1)}},c2=class{transform(e){if(0===e.length)return[];if(1===e.length)return e[0].prev=void 0,e[0].next=void 0,e;for(let t=0;t<e.length;t+=1)e[t].prev=0===t?void 0:e[t-1],e[t].next=t===e.length-1?void 0:e[t+1];return e}},c3=class{transform(e){return e.forEach(e=>{this.sceneTypesToAddPostrollView.includes(e.getSceneType())&&e.addEntryAction({name:t4.POSTROLL_VIEW})}),e}constructor(){this.sceneTypesToAddPostrollView=[eS.video,eS.image,eS.endcard]}},c5=class{transform(e){let t=e.filter(e=>e.getSceneType()===eS.endcard&&!e.isAlternative()),n=e.filter(e=>e.isAlternative());return t.forEach(e=>{n.forEach(t=>{e.addTransition({name:t.getId(),target:t.getId(),scene:t,actions:[]})})}),n.forEach(e=>{n.forEach(t=>{e.getId()!==t.getId()&&e.addTransition({name:t.getId(),target:t.getId(),scene:t,actions:[]})})}),e}},c4=class{transform(e){return e.forEach(e=>{this.sceneTypesToInitCheckPoint.includes(e.getSceneType())&&e.addEntryAction({name:iH.INIT_CHECKPOINTS})}),e}constructor(){this.sceneTypesToInitCheckPoint=[eS.image,eS.endcard]}},c6=class{transform(e){return e.forEach(e=>{this.SCENE_TYPES_TO_CLOSE_STOREKIT_OVERLAY.includes(e.getSceneType())&&e.addExitAction({name:iU.CLOSE_STOREKIT_OVERLAY})}),e}constructor(){this.SCENE_TYPES_TO_CLOSE_STOREKIT_OVERLAY=[eS.video,eS.endcard]}},c8=class{transform(e){return e.forEach(e=>{var t;if(!ro(e))return;let n=e.getTransitions().find(e=>e.name===t6.NEXT),i=null==n?void 0:n.actions.filter(e=>e.name!==n0.SHOW_PRODUCT_VIEW),r={name:t6.VIDEO_FAILURE,scene:null==n?void 0:n.scene,actions:null!=i?i:[]};(null===(t=e.next)||void 0===t?void 0:t.getSceneType())!==eS.closed?r.actions.push({name:t4.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE}):r.actions.push({name:iU.SEND_VIDEO_ERROR}),e.addTransition(r)}),e}},c7=class{transform(e){return e.filter(e=>{var t;return(null===(t=e.next)||void 0===t?void 0:t.getSceneType())===eS.closed}).forEach(e=>{if(is(e)){var t;e.setLastChanceEndcardConfig(O(d({},e.getLastChanceEndcardConfig()),{enabled:!0}));let n=[{name:nh.CLOSE_OVERLAY_VIEW},{name:oz.RESET_AUTO_SHOW_OVERLAY_SERVICE},{name:oK.SHOW_LAST_CHANCE_ENDCARD},{name:n5.SET_CLOSE_BUTTON_HIDDEN},{name:t4.CLOSE_VIDEO_CURRENT_SCENE}];e.addTransition({name:t6.LAST_CHANCE_ENDCARD,actions:n});let i=e.getTransitions().find(e=>e.name===t6.NEXT);e.addExitAction({name:oK.CLOSE_LAST_CHANCE_ENDCARD}),e.addOrUpdateTransition({name:t6.NEXT,actions:[{name:n5.SET_CLOSE_BUTTON_VISIBLE},...null!==(t=null==i?void 0:i.actions)&&void 0!==t?t:[]],scene:null==i?void 0:i.scene});let r=null==i?void 0:i.actions.find(e=>e.name===n0.SHOW_PRODUCT_VIEW);if(r){let t=[r],n=null==i?void 0:i.actions.find(e=>e.name===n0.EMIT_TRANSITION_OPEN_OBSERVABILITY_EVENT);n&&t.push(n),e.addOrUpdateTransition({name:t6.LAST_CHANCE_ENDCARD,actions:t}),i&&(i.actions=i.actions.filter(e=>e.name!==n0.SHOW_PRODUCT_VIEW&&e.name!==n0.EMIT_TRANSITION_OPEN_OBSERVABILITY_EVENT))}}}),e}},c9=(e=V())=>es(e.get(w.VX_ENDCARD)),ue=class{transform(e){return e.forEach(e=>{var t;if(!ro(e)||e.getTransitions().some(e=>e.name===t6.COMPLETE&&void 0!==e.scene))return;let n=e.getTransitions().find(e=>e.name===t6.NEXT);n&&e.addOrUpdateTransition({name:t6.COMPLETE,scene:null==n?void 0:n.scene,actions:[...null!==(t=null==n?void 0:n.actions)&&void 0!==t?t:[]]})}),e}},ut=()=>{let e=new cq;e.addTransformer(new cZ),e.addTransformer(new c2),cQ()&&e.addTransformer(new cJ(1)),c0()&&e.addTransformer(new cJ(2)),e.addTransformer(new c3),e.addTransformer(new c1),e.addTransformer(new c4),e.addTransformer(new c6),e.addTransformer(new c8),e.addTransformer(new ue);let t=[...e.build(),...e.alternativeScenes];return t=new c5().transform(t),c9()&&(t=new c7().transform(t)),r.getInstance().bind(e_,t),t},un=e=>{let t={enabled:!1,isAutoClose:!1};if(!e)return t;let{overlay:n}=e,i=(null==n?void 0:n.autoShowDelay)?1e3*n.autoShowDelay:0,r=!!((null==n?void 0:n.autoCloseDelay)&&n.autoCloseDelay>0),a=(null==n?void 0:n.autoCloseDelay)?1e3*n.autoCloseDelay:0;return d(O(d({},t),{autoShowDelay:i,isAutoClose:r}),r&&{autoCloseDelay:a})},ui=e=>{var t,n,i;return{delay:null!==(t=null==e?void 0:e.delay)&&void 0!==t?t:0,countdown:null===(n=null==e?void 0:e.countdown)||void 0===n||n,style:null!==(i=null==e?void 0:e.style)&&void 0!==i?i:n4.CLOSE}};const ur=e=>void 0!==e&&"object"==typeof e&&Object.keys(e).some(e=>"token"===e);var ua=(e,t=V())=>{var n,i,r;let a=ur(null==e?void 0:e.icon)?null!==(i=t.get(e.icon.token))&&void 0!==i?i:"":null!==(r=null==e?void 0:e.icon)&&void 0!==r?r:void 0,o={enabled:!!((null==e?void 0:e.name)&&a),downloads:null==e?void 0:e.downloads,icon:a,name:null==e?void 0:e.name,price:null==e?void 0:e.price,ratingCount:null==e?void 0:e.rating,screenshots:null==e?void 0:null===(n=e.screenshots)||void 0===n?void 0:n.map(e=>{var n;return ur(e)?null!==(n=t.get(e.token))&&void 0!==n?n:"":e})};return Object.keys(o).forEach(e=>{var t;(void 0===o[e]||""===o[e]||Array.isArray(o[e])&&0===(null!==(t=o[e])&&void 0!==t?t:[]).length)&&delete o[e]}),o},uo=(e,t,n,i=V())=>{var r,a,o,s,l,c,u,E,_,v,T,S,h;let p={id:e,enabled:!1};if(!t||0===Object.keys(t).length)return p;let g=!1,C=null!==(E=null==t?void 0:t.fsc)&&void 0!==E&&E,A=null!==(_=null==t?void 0:null===(r=t.cta)||void 0===r?void 0:r.text)&&void 0!==_?_:"Open";Object.keys(null!==(v=null==n?void 0:n.on)&&void 0!==v?v:{}).includes(t6.LAST_CHANCE_ENDCARD)&&(g=!0);let I=ua(t.appMeta,i),f=O(d({},I),{enabled:!!(I.name&&I.icon)}),N=4e3;return(null==t?void 0:null===(a=t.cta)||void 0===a?void 0:a.delay)&&(N=1e3*t.cta.delay),O(d({},p),{enabled:g,fsc:{enabled:C,ctaUrl:null!==(T=null==t?void 0:null===(o=t.cta)||void 0===o?void 0:o.url)&&void 0!==T?T:"",target:null==t?void 0:null===(s=t.storeKit)||void 0===s?void 0:s.fscTarget},appMeta:f,close:ui(null==t?void 0:t.close),cta:{text:A,url:null!==(S=null==t?void 0:null===(l=t.cta)||void 0===l?void 0:l.url)&&void 0!==S?S:"",isPersistent:null!==(h=null==t?void 0:null===(c=t.cta)||void 0===c?void 0:c.isPersistent)&&void 0!==h&&h,delay:N,appMeta:f,target:null==t?void 0:null===(u=t.storeKit)||void 0===u?void 0:u.ctaTarget}})},us=(e,t,n=V())=>{var i;return{url:e.url,text:e.text,isPersistent:e.isPersistent,delay:e.delay?1e3*e.delay:0,background:e.background,appMeta:e.appMeta?ua(e.appMeta,n):void 0,target:null!==(i=null==t?void 0:t.ctaTarget)&&void 0!==i?i:eh.SKPV}},ul=e=>{let t=null==e?void 0:e.events;return t?{enabled:!0,events:t}:{enabled:!1}};const ud={video:(e,t,n,i=ei(),r=V())=>{var a,o,s,l,d;let c=e.url.endsWith(".m3u8")?rr.HLS:rr.PROGRESSIVE,u={enabled:e.fsc,target:null===(a=e.storeKit)||void 0===a?void 0:a.fscTarget,ctaUrl:e.cta.url},E={manifest:null===(o=e.streamManifest)||void 0===o?void 0:o.manifest,track_0:null===(s=e.streamManifest)||void 0===s?void 0:s.track_0,chunks:null===(d=e.streamManifest)||void 0===d?void 0:null===(l=d.chunks)||void 0===l?void 0:l.map(e=>"string"==typeof e?e:"object"==typeof e&&Object.keys(e).includes("token")?r.get(e.token):"").filter(e=>""!==e)};return new ra({id:e.id,url:e.url,isAlternative:!1,index:t,videoType:c,streamManifest:E,progressBarConfig:(()=>{var t,n,i;let r=null!==(i=null==e?void 0:null===(t=e.progressBar)||void 0===t?void 0:t.show)&&void 0!==i&&i;return{show:r,color:r&&(null===(n=e.progressBar)||void 0===n?void 0:n.color)?e.progressBar.color:eO}})(),fullScreenClickConfig:u,storeKitOverlayAutoShowConfig:un(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},callToActionConfig:us(e.cta,e.storeKit,r),lastChanceEndcardConfig:uo(e.id,e.lastChanceEndcard,n,r),closeButtonConfig:ui(e.close),originalVideoUrl:e.url,loopVideo:e.looping,muted:e.muted,trackingEventMapConfig:ul(e),isFullscreen:i.isFullscreen()})},endcard:(e,t,n,i=ei(),r=V())=>{let a=e.compressed?i1.GZIP:i1.BASE64_ENCODED;return new i3({id:e.id,endcardContent:e.html,index:t,isAlternative:!1,compressionType:a,storeKitOverlayAutoShowConfig:un(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:uo(e.id,e.lastChanceEndcard,n,r),omsdkEnabled:!1,trackingEventMapConfig:ul(e),callToActionConfig:us(e.cta,e.storeKit,r),placementTypeService:i,closeButtonConfig:ui(e.close),eligibleToPreload:!1})},image:(e,t,n,i=ei(),r=V())=>{var a;return new cX({id:e.id,url:e.url,index:t,fullScreenClickConfig:{enabled:e.fsc,ctaUrl:e.cta.url,target:null===(a=e.storeKit)||void 0===a?void 0:a.fscTarget},storeKitOverlayAutoShowConfig:un(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:uo(e.id,e.lastChanceEndcard,n,r),trackingEventMapConfig:ul(e),placementTypeService:i,closeButtonConfig:ui(e.close),callToActionConfig:us(e.cta,e.storeKit,r)})}};var uc=class{addTransformer(e){return this.transformers.push(e),this}build(){let e=cK.getInstances();return this.scenes.unshift(...e),this.transformers.forEach(e=>{this.scenes=e.transform(this.scenes)}),this.scenes}constructor(e=new o2,t=ud,n=ei()){this.converters=t,this.placementTypeService=n,this.transformers=[],this.scenes=[],this.scenesMap=new Map;let i=e.getSceneData(),r=e.getAdMachineConfig(),a=new Map;i.forEach(e=>{a.has(e.type)||a.set(e.type,[]),a.get(e.type).push(e)}),a.forEach((e,t)=>{let n=this.converters[t];n&&e.forEach((e,t)=>{let i=n(e,t,r.states[e.id],this.placementTypeService);this.scenes.push(i),this.scenesMap.set(e.id,i)})});let o=new iW;this.scenesMap.set(o.getId(),o),this.scenes.push(o),this.scenes.forEach(e=>{let t=r.states[e.getId()];(null==t?void 0:t.on)&&Object.keys(t.on).forEach(n=>{let i=t.on[n],r={name:n,actions:i.actions?i.actions.map(e=>({name:e})):[],scene:i.target?this.scenesMap.get(i.target):void 0};e.addOrUpdateTransition(r)})})}},uu=class{transform(e){return e.filter(e=>!!is(e)&&e.getLastChanceEndcardConfig().enabled).forEach(e=>{e.addOrUpdateTransition({name:t6.NEXT,actions:[{name:oK.CLOSE_LAST_CHANCE_ENDCARD},{name:n5.SET_CLOSE_BUTTON_VISIBLE}]});let t=[{name:nh.CLOSE_OVERLAY_VIEW},{name:oz.RESET_AUTO_SHOW_OVERLAY_SERVICE},{name:n5.SET_CLOSE_BUTTON_HIDDEN},{name:iH.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS}];e.getSceneType()===eS.video&&t.push({name:t4.CLOSE_VIDEO_CURRENT_SCENE}),e.addOrUpdateTransition({name:t6.LAST_CHANCE_ENDCARD,actions:t})}),e}};const uE=[new class{transform(e,t=new o2){let n=t.getAdMachineConfig(),i=t=>e.find(e=>e.getId()===t);return e.forEach(e=>{var t,r,a;let o=e.getId(),s=i(null===(a=n.states[o])||void 0===a?void 0:null===(r=a.on)||void 0===r?void 0:null===(t=r.NEXT)||void 0===t?void 0:t.target);s&&(e.next=s,s.prev=e)}),e}},new c3,new c4,new c6,new uu,new c8,new ue];var u_=(e=new o2,t=uE)=>{let n=new uc(e);t.forEach(e=>{n.addTransformer(e)});let i=n.build();return r.getInstance().bind(e_,i),i},uv=(e=V(),t=u_,n=ut)=>{e.has(w.AD_EXPERIENCE)?t():n()},uT=((_R={})[_R.TIME_FOR_CTA_CALLBACK=502]="TIME_FOR_CTA_CALLBACK",_R),uS=class{checkIfSignalsChanged(){return Object.keys(uT).some(e=>{let t=uT[e];return this.signals[t]!==this.previousSignals[t]})}sendSignals(){if(this.checkIfSignalsChanged()){var e,t;let n=JSON.stringify(this.signals);null===(t=this.mraidService.getMraidBridgeExt())||void 0===t||null===(e=t.updateSignals)||void 0===e||e.call(t,n),this.previousSignals=d({},this.signals)}}startUpdateSignalsTimer(){this.intervalService.getNewInterval(6e3,()=>{this.sendSignals()}).start()}sendAppStoreDuration(e){e&&"number"==typeof e.duration&&(this.signals[uT.TIME_FOR_CTA_CALLBACK]=null==e?void 0:e.duration,this.sendSignals())}pushEvent(e,t){switch(e){case x.SIGNAL_TIMER_START:this.startUpdateSignalsTimer();break;case x.APP_STORE_DURATION:this.sendAppStoreDuration(t)}}pushError(){}isObserved(){return!0}static getServiceIdentifier(){return"SignalServiceInterface"}constructor(e=y(),t=t7(),n={},i={},r=0,a=0,o=lO()){this.mraidService=e,this.intervalService=t,this.signals=n,this.previousSignals=i,this.availableDiskSpaceBeforeCta=r,this.diskSpaceAfterCta=a,this.rootElement=o}},uh=()=>{let e=ay.V5_1_2;if(en().getMraidVersion().isLessThan(e))return;let t=r.getInstance(),n=uS.getServiceIdentifier();t.bind(n,new eu),t.get(n).init(()=>new uS,!0)},up=()=>{if(!nJ())return;let e=r.getInstance(),t=nS();if(!t)return;let n=new oj(t);return e.bind(oj.getServiceIdentifier(),n),n};const ug=(e=V())=>{let t=e.get(w.SKOVERLAY_POSITION);switch(t){case"bottom":case"bottom-raised":return t;default:return}},uC=(e=V())=>{var t,n;switch(null===(n=e.get(w.SKOVERLAY_DISMISSIBLE))||void 0===n?void 0:null===(t=n.trim())||void 0===t?void 0:t.toLowerCase()){case"true":return!0;case"false":return!1;default:return}},uO=()=>({position:"bottom",dismissible:!0});var uA=(e=V())=>{let t=uO(),n=ug(e);void 0!==n&&(t.position=n);let i=uC(e);return void 0!==i&&(t.dismissible=i),t},uI=((_L=uI||{}).EMIT_PREPARE_ERROR="EMIT_PREPARE_ERROR",_L.PREPARE_OVERLAY="PREPARE_OVERLAY",_L.SET_APP_STORE_ID="SET_APP_STORE_ID",_L);const uf=d({},cv,uI);var uN="store-kit-overlay";const um=(e=uO(),t=n_.APP_STORE)=>({id:uN,initial:no.IDLE,context:{displayOptions:e,fallback:t},states:{[no.IDLE]:{on:{[na.START_DELAY_SHOW]:{target:no.DELAY_SHOW,actions:[ns.ASSIGN_FALLBACK]},[na.START_IMMEDIATE_SHOW]:{target:no.IMMEDIATE_SHOW,actions:[ns.ASSIGN_FALLBACK,ns.SHOW_SKO]},[na.SET_DISPLAY_OPTIONS]:{actions:ns.ASSIGN_DISPLAY_OPTIONS}}},[no.DELAY_SHOW]:{on:{[na.CLOSE]:{target:no.IDLE},[na.INTERRUPT]:{target:no.DELAY_SHOW_INTERRUPTED},[na.SHOW]:{target:no.DELAY_SHOW_IMMEDIATE,actions:ns.SHOW_SKO}}},[no.DELAY_SHOW_IMMEDIATE]:{on:{[na.SET_VISIBLE]:{target:no.DELAY_SHOW_VISIBLE,actions:ns.EMIT_OBSERVABILITY_EVENT},[na.CLOSE]:{target:no.IDLE}}},[no.DELAY_SHOW_VISIBLE]:{on:{[na.CLOSE]:{target:no.CLOSING,actions:ns.CLOSE_SKO},[na.FINISH]:{target:no.IDLE},[na.INTERRUPT]:{target:no.DELAY_SHOW_INTERRUPTED,actions:ns.CLOSE_SKO}}},[no.DELAY_SHOW_INTERRUPTED]:{on:{[na.RESUME]:{target:no.DELAY_SHOW_IMMEDIATE,actions:ns.SHOW_SKO},[na.CLOSE]:{target:no.IDLE}}},[no.IMMEDIATE_SHOW]:{on:{[na.SET_VISIBLE]:{target:no.IMMEDIATE_SHOW_VISIBLE,actions:ns.EMIT_OBSERVABILITY_EVENT},[na.INTERRUPT]:{target:no.CLOSING,actions:ns.CLOSE_SKO},[na.SET_FALLBACK]:{target:no.FALLBACK}}},[no.IMMEDIATE_SHOW_VISIBLE]:{on:{[na.CLOSE]:{target:no.CLOSING,actions:ns.CLOSE_SKO},[na.FINISH]:{target:no.IDLE},[na.INTERRUPT]:{target:no.CLOSING,actions:ns.CLOSE_SKO}}},[no.FALLBACK]:{on:{[na.START_IMMEDIATE_SHOW]:{actions:ns.SHOW_FALLBACK}}},[no.CLOSING]:{on:{[na.FINISH]:{target:no.IDLE}}},[no.ERROR]:{},[no.INITIAL]:{},[no.PREPARING]:{}}}),uD=(e=y(),t=nX(),n=nO,i=le)=>({actions:{[ns.EMIT_OBSERVABILITY_EVENT]:()=>{n({name:x.STORE_KIT_OVERLAY})},[ns.SHOW_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.openAppStore)||void 0===n||n.call(i,1,t.displayOptions)},[ns.CLOSE_SKO]:()=>{var t,n;null===(n=e.getMraidExt())||void 0===n||null===(t=n.dismissStoreOverlayView)||void 0===t||t.call(n)},[ns.ASSIGN_FALLBACK]:g((e,t)=>{var n;return O(d({},e),{fallback:null!==(n=t.fallback)&&void 0!==n?n:e.fallback})}),[ns.ASSIGN_DISPLAY_OPTIONS]:g((e,t)=>{var n;return O(d({},e),{displayOptions:null!==(n=t.displayOptions)&&void 0!==n?n:e.displayOptions})}),[ns.SHOW_FALLBACK]:n=>{switch(n.fallback){case n_.SKPV:null==t||t.open();break;case n_.APP_STORE:(()=>{var t;let n=i();n&&(null===(t=e.getMraid())||void 0===t||t.open(n))})()}}}}),uR=(e=uO(),t=n_.APP_STORE)=>{let n=um(e,t);return O(d({},n),{initial:no.INITIAL,context:{appStoreId:void 0,displayOptions:e,fallback:t},states:O(d({},n.states),{[no.INITIAL]:{on:{[na.READY]:{target:no.PREPARING,actions:[uf.SET_APP_STORE_ID,uf.PREPARE_OVERLAY]}}},[no.PREPARING]:{on:{[na.SET_PREPARED]:{target:no.IDLE},[na.SET_ERROR]:{target:no.ERROR,actions:uf.EMIT_PREPARE_ERROR}}},[no.DELAY_SHOW_VISIBLE]:{on:{[na.CLOSE]:{target:no.CLOSING,actions:ns.CLOSE_SKO},[na.FINISH]:{target:no.INITIAL},[na.INTERRUPT]:{target:no.DELAY_SHOW_INTERRUPTED,actions:ns.CLOSE_SKO}}},[no.IMMEDIATE_SHOW_VISIBLE]:{on:{[na.CLOSE]:{target:no.CLOSING,actions:ns.CLOSE_SKO},[na.FINISH]:{target:no.INITIAL},[na.INTERRUPT]:{target:no.CLOSING,actions:ns.CLOSE_SKO}}},[no.CLOSING]:{on:{[na.FINISH]:{target:no.INITIAL}}}})})},uL=(e=y(),t=nX(),n=nO,i=le)=>({actions:O(d({},uD(e,t,n,i).actions),{[uf.PREPARE_OVERLAY]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.prepareStoreOverlayView)||void 0===n||n.call(i,t.appStoreId,t.displayOptions)},[uf.SET_APP_STORE_ID]:g({appStoreId:(e,t)=>t.appStoreId||e.appStoreId}),[uf.EMIT_PREPARE_ERROR]:()=>{n({name:x.STORE_KIT_OVERLAY_PREPARE_ERROR})},[ns.SHOW_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.presentStoreOverlayView)||void 0===n||n.call(i,t.appStoreId,t.displayOptions)},[ns.CLOSE_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.dismissStoreOverlayView)||void 0===n||n.call(i,t.appStoreId)}})});var uy=class extends nT{init(e){this.interpreter.send(d({type:na.READY},e))}close(){super.close(),this.interpreter.send({type:na.READY})}finish(){super.finish(),this.interpreter.send({type:na.READY})}constructor(e=uR,t=uL,n=tJ(),i=V(),r=en(),a=y()){super(e(uA(i),nv(r)),t(a),n),this.stateMachineService=n,this.tokenService=i,this.environmentService=r,this.mraidService=a}},uP=class extends nT{constructor(e=um,t=uD,n=tJ(),i=V(),r=en(),a=y()){super(e(uA(i),nv(r)),t(a),n),this.stateMachineService=n,this.tokenService=i,this.environmentService=r,this.mraidService=a}},uV=class{withAppStoreId(e){let t=iC(this.tokenService);return t&&e.init({appStoreId:t}),e}resolve(){if(this.environmentService.getOperatingSystem()===B.iOS)return st(this.environmentService)?new uP:this.withAppStoreId(new uy)}constructor(e=en(),t=y(),n=V()){this.environmentService=e,this.mraidService=t,this.tokenService=n}},uw=(e=en(),t=y(),n=V())=>{let i=r.getInstance(),a=new uV(e,t,n).resolve();return a&&i.bind(nT.getServiceIdentifier(),a),a};const ub="viewMaster_indexed_db";class uM{static async hasSufficientSpace(){var e;if(!(null===(e=window.navigator.storage)||void 0===e?void 0:e.estimate))return!0;let{quota:t,usage:n}=await window.navigator.storage.estimate();return!t||!n||t-n>5e3}static async shouldInitIndexedDB(){return!!window.indexedDB&&uM.hasSufficientSpace()}static init(e,t,n=ec(),i=ub,r=1){return new Promise((a,o)=>{uM.shouldInitIndexedDB().then(s=>{if(!s){o(Error("IndexedDB cannot be initialized."));return}let l=window.indexedDB.open(i,r);l.onupgradeneeded=n=>{let i=n.target.result;i.objectStoreNames.contains(e)||i.createObjectStore(e,{keyPath:t}).createIndex("time","time",{unique:!1})},l.onsuccess=e=>{a(e.target.result)},l.onerror=e=>{var t;let i=null===(t=e.target.error)||void 0===t?void 0:t.message;o(Error(i)),i&&n.emit({type:"error-logging",event:nR.EXCEPTION,data:{error:Error(i)}})}})})}reportError(e){this.errorLoggingReportingService.emit({type:"error-logging",event:nR.EXCEPTION,data:{error:"string"==typeof e?{message:e}:e}})}async deleteExpiredRecords(){return new Promise((e,t)=>{let n=this.db.transaction(this.storeName,"readwrite"),i=n.objectStore(this.storeName),r=Date.now()-864e5*this.expiry,a=i.openCursor();a.onsuccess=t=>{let a=t.target.result;a&&n?(a.value.createDate<r&&i.delete(a.value[this.keyPath]),a.continue()):e()},a.onerror=e=>{var n;t(Error(null===(n=e.target.error)||void 0===n?void 0:n.message))}}).catch(e=>{this.reportError(e)})}addRecord(e){return new Promise((t,n)=>{let i=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(e);i.onsuccess=()=>{t()},i.onerror=()=>{var e;n(Error(null===(e=i.error)||void 0===e?void 0:e.message))}}).catch(e=>{this.reportError(e)})}async getAllRecords(){return new Promise((e,t)=>{let n=this.db.transaction(this.storeName,"readonly").objectStore(this.storeName).getAll();n.onsuccess=()=>{e(n.result)},n.onerror=e=>{var n;t(Error(null===(n=e.target.error)||void 0===n?void 0:n.message))}}).catch(e=>(this.reportError(e),[]))}clearStore(){try{this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear()}catch(e){this.reportError(e)}}constructor(e,t,n,i=90,r=ec()){this.db=e,this.storeName=t,this.keyPath=n,this.expiry=i,this.errorLoggingReportingService=r}}const uk=async()=>{let{storeName:e,keyPath:t,expiry:n}=nF.getIndexedDatabaseConfig();return uM.init(e,t).then(i=>{let a=new nF(new uM(i,e,t,n));a.deleteExpiredRecords(),r.getInstance().bind(nF.getServiceIdentifier(),a)})};var uU=(e=ik())=>{e.init()};const uB={options:void 0,lastActivity:void 0,volume:void 0,sessionContent:void 0,state:void 0,nativeView:void 0},uH=()=>{if(window.omidBridge){var e,t,n,i,r,a,o,s,l,d,c,u;let{options:E,lastActivity:_,volume:v,sessionContent:T,state:S,nativeView:h}=uB;E&&(null===(e=(t=window.omidBridge).init)||void 0===e||e.call(t,...E)),_&&(null===(n=(i=window.omidBridge).setLastActivity)||void 0===n||n.call(i,..._)),v&&(null===(r=(a=window.omidBridge).setDeviceVolume)||void 0===r||r.call(a,...v)),T&&(null===(o=(s=window.omidBridge).startSession)||void 0===o||o.call(s,...T)),S&&(null===(l=(d=window.omidBridge).setState)||void 0===l||l.call(d,...S)),h&&(null===(c=(u=window.omidBridge).setNativeViewHierarchy)||void 0===c||c.call(u,...h))}};var uW=e=>new Promise((t,n)=>{let i=document.createElement("script");i.src=e,document.head.appendChild(i),i.onload=t,i.onerror=()=>n(Error(`Failed to load script url ${e}`))});const uF=new k("6.9.1"),ux=async(e=V(),t=en(),n=uW,i=ed(),r=uH)=>{if(es(e.get(w.OM_ENABLED))&&!t.getSdkVersion().isLessThan(uF))try{await n("omsdk.js"),await n("omsdk-session.js"),r()}catch(e){i.emit({type:"error-logging",event:nR.EXCEPTION,data:{error:{message:"Load OMSDK files failed"}}})}},uG=e=>{var t,n;(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.currentTime)!=null&&(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.duration)!=null&&oC(e.data.currentTime,e.data.duration,Math.round(e.data.currentTime))};var uK=(e,t)=>{switch(t.event){case nW.PROGRESS:uG(t);break;case nW.MUTE:case nW.UNMUTE:ih(t.event===nW.MUTE?iT.VIDEO_MUTE:iT.VIDEO_UNMUTE);break;case nW.CLOSE:ih(iT.VIDEO_CLOSE)}};const uY=[iT.REWARD_GRANTED];var uj=(e,t)=>{let n=y().getMraidBridgeExt();if(uY.includes(t.event)){let e=en(),i=e.getOperatingSystem();(i===B.iOS||i===B.Android&&e.getSdkVersion().isGreaterThanOrEqualTo(new k("6.12.0")))&&(null==n||n.notifyTPAT(t.event))}else null==n||n.notifyTPAT(t.event)},uX=(e,t)=>{let n=nt(),i=t7(),r=aJ();if(t.event===nf.MINIMIZED)n.standby(),i.pauseAll();else if(t.event===nf.MAXIMIZED){if(null==r?void 0:r.state.matches(aq.AUTO_PLAY_FAIL))return;n.wake(),i.startAll(),nO({name:x.APP_STORE_CLOSE}),cp({name:x.APP_STORE_CLOSE},!1),cQ()&&nO({name:x.APP_STORE_ON_FIRST_TRANSITION_COMPLETE})}};let uz=null;var u$=(e,t,n=y())=>{if(t.event===nA.START){let t=n.getMraidBridgeExt();t&&(uz=window.setInterval(()=>{t.creativeHeartbeat(),e.getLogger("heartbeat").info("Heartbeat")},4e3))}else t.event===nA.STOP&&uz&&window.clearInterval(uz)},uq=((_y={}).OVERLAY_PREPARED="vungle.events.storeoverlay.success",_y.OVERLAY_VISIBLE="vungle.events.storeoverlay.visible",_y.OVERLAY_FINISHED="vungle.events.storeoverlay.finished",_y.OVERLAY_FAILED="vungle.events.storeoverlay.failed",_y),uZ=((_P={}).STORE_VIEW_PREPARED="vungle.events.preparestore.success",_P.STORE_VIEW_CLOSED="vungle.events.preparestore.finished",_P),uQ=((_V={}).VISIBLE="vungle.events.storekit.visible",_V.FAILED="vungle.events.storekit.failed",_V.FINISHED="vungle.events.storekit.finished",_V),uJ=(e=tJ(),t=uN)=>cT(e,t);const u0=e=>{var t;if(0===e){let e=nS();(null==e?void 0:e.isOpen())&&(null==e||e.close())}else 1===e&&(null===(t=uJ())||void 0===t||t.send({type:na.SET_VISIBLE}))},u1=e=>{var t,n;0===e?null===(t=nX())||void 0===t||t.close():1===e&&(null===(n=nS())||void 0===n||n.finish())},u2=e=>{var t,n;0===e?null===(t=nX())||void 0===t||t.fallback():1===e&&(null===(n=nS())||void 0===n||n.fallback())};var u3=(e,t)=>{var n;if(!Object.values(uQ).includes(t.event))return;let i=null===(n=t.data)||void 0===n?void 0:n.mode;switch(t.event){case uQ.VISIBLE:u0(i);break;case uQ.FINISHED:u1(i);break;case uQ.FAILED:u2(i)}},u5=(e,t,n=en(),i=ik())=>{t.data.isFatal&&(n.getSdkVersion().isGreaterThanOrEqualTo(W.sdkSeven)?i.notifyFatalError(t):nG())},u4=(e,t)=>{nE()&&Object.values(uZ).includes(t.event)&&({[uZ.STORE_VIEW_PREPARED]:()=>{var e;null===(e=cS())||void 0===e||e.send({type:nK.PREPARE_SUCCESS})},[uZ.STORE_VIEW_CLOSED]:()=>{var e;null===(e=cS())||void 0===e||e.send({type:nK.CLOSE})}})[t.event]()},u6=(e,t)=>{var n;if(!nJ())return;let i=nS();null===(n=({[uq.OVERLAY_PREPARED]:()=>{var e;null===(e=uJ())||void 0===e||e.send({type:na.SET_PREPARED})},[uq.OVERLAY_FINISHED]:()=>{var e;null===(e=uJ())||void 0===e||e.send({type:na.FINISH})},[uq.OVERLAY_FAILED]:()=>{let e=uJ();(null==e?void 0:e.state.matches(no.PREPARING))?e.send({type:na.SET_ERROR}):null==i||i.fallback()},[uq.OVERLAY_VISIBLE]:()=>{var e;null===(e=uJ())||void 0===e||e.send({type:na.SET_VISIBLE})}})[t.event])||void 0===n||n.call(void 0)},u8=(e,t)=>{if(t.event===lA.CLOSE){let{sendAdEvent:n,isVideoState:i,isCloseButtonVisible:r}=t.data;if(!r)return;e.getLogger("custom-mraid").info(lA.CLOSE);let a=l1();if((null==a?void 0:a.state.value)===l$.SHOWING){a.send({type:lq.HIDE});return}if(!o6().state.context.isPrivacyButtonVisible){if(el()&&i){dU(n)({type:t6.NEXT});return}n({type:t6.NEXT})}}};const u7=(e,t)=>e.getActivityEvents().filter(e=>"error-logging"===e.eventType&&e.data.error.message===t.message&&e.data.error.error_source===t.error_source).length>1;var u9=(e,t)=>{var n;let i=nD();if(("error-logging"===t.type||"video"===t.type&&t.event===nW.ERROR)&&(null===(n=t.data)||void 0===n?void 0:n.error))u7(e,t.data.error)||i.pushError(t.data.error);else if("cta"===t.type||"fsc"===t.type){let e=ea.getValue().scene,n={type:t.type,value:t.event,scene_type:null==e?void 0:e.getSceneType()},r=d({name:x.CTA},n);i.pushEvent(r)}},Ee=(e,t)=>{let n=nD();t.event===F.EVENT&&t.data.name?n.pushEvent(d({name:t.data.name},t.data)):t.event===F.ERROR&&t.data.error&&n.pushError(t.data.error)},Et=()=>{let e=r.getInstance(),t=uS.getServiceIdentifier();if(e.has(t))return e.get(t)},En=(e,t,n=Et())=>{n&&t.event===F.SIGNAL_EVENT&&t.data.name&&n.pushEvent(d({name:t.data.name},t.data))},Ei=(e,t,n=oe())=>{t.event===aP.SILENT?n.mute():t.event===aP.UN_SILENT&&n.unmute()},Er=(e,t,n=y())=>{var i;t.event===o0.DECODING_ERROR&&(null===(i=n.getMraid())||void 0===i||i.close())},Ea=(e,t,n=y())=>{n.getMraid().close()},Eo=(e,t=eT())=>{let n=t.find(t=>t.getId()===e);if(!n)throw Error(`No scene found for sceneId ${e}`);return n},Es=(e,t,n=Eo,i=lN(),r=ng())=>{let a=n(t.data.sceneId);a&&t.event===i$.SCENE_END&&i.subscribeAll(a).then(e=>{Object.keys(e).length>0&&r.emit({type:"observability",event:F.EVENT,data:d({name:x.SCENE_END,sceneId:t.data.sceneId,sceneType:t.data.sceneType},e)})})},El=()=>{let e=nI();e.addEventHandler("*",u9),e.addEventHandler("close",Ea),e.addEventHandler("observability",Ee),e.addEventHandler("heartbeat",u$),e.addEventHandler("storekit-mraid",u3),e.addEventHandler("storekit-mraid",u4),e.addEventHandler("storekit-mraid",u6),e.addEventHandler("tpat",uj),e.addEventHandler("video",uK),e.addEventHandler("video",dH),e.addEventHandler("viewability",uX),e.addEventHandler("error-logging",u5),e.addEventHandler("custom-mraid",u8),e.addEventHandler("videoViewed",oA),e.addEventHandler("observability",En),e.addEventHandler("silent",Ei),e.addEventHandler("free-form",Er),e.addEventHandler("scene-event",Es)},Ed=(e=y(),t=V())=>{let n=e.getMraidBridgeExt();n&&(t.replacementTokens=n.getReplacementTokens())},Ec=()=>ed(),Eu=(e=en(),t=ei(),n=Ec(),i=lO())=>{nJ(e,t)&&!st(e)&&Object.values(uq).forEach(e=>{null==i||i.addEventListener(e,()=>{n.emit({type:"storekit-mraid",event:e})})})},EE=(e=en(),t=Ec(),n=lO())=>{nE(e)&&!st(e)&&Object.values(uZ).forEach(e=>{null==n||n.addEventListener(e,()=>{t.emit({type:"storekit-mraid",event:e})})})},E_=(e=en(),t=Ec(),n=lO())=>{e.getOperatingSystem()===B.iOS&&Object.values(uQ).forEach(e=>{null==n||n.addEventListener(e,n=>{t.emit({type:"storekit-mraid",event:e,data:n.detail})})})},Ev=()=>ed();const ET=new k("7");var ES,Eh,Ep,Eg,EC,EO,EA,EI,Ef,EN,Em,ED,ER,EL,Ey,EP,EV,Ew,Eb,EM,Ek,EU,EB,EH,EW,EF,Ex,EG,EK,EY,Ej,EX,Ez,E$,Eq,EZ,EQ,EJ,E0,E1,E2,E3,E5,E4,E6,E8,E7,E9,_e,_t,_n,_i,_r,_a,_o,_s,_l,_d,_c,_u,_E,__,_v,_T,_S,_h,_p,_g,_C,_O,_A,_I,_f,_N,_m,_D,_R,_L,_y,_P,_V,_w,_b,_M,_k,_U,_B,_H,_W,_F,_x,_G,_K,_Y,_j,_X,_z,_$,_q,_Z,_Q,_J,_0,_1,_2,_3,_5,_4,_6,_8,_7,_9,ve,vt,vn,vi,vr,va,vo,vs,vl,vd,vc,vu,vE,v_,vv,vT,vS,vh,vp,vg,vC,vO,vA,vI,vf,vN,vm,vD,vR,vL,vy,vP,vV,vw,vb,vM,vk,vU,vB,vH,vW,vF,vx,vG,vK,vY,vj,vX,vz,v$,vq,vZ,vQ,vJ,v0,v1,v2,v3,v5,v4,v6,v8,v7=(e=y(),t=Ev(),n=en())=>{var i;let r=(null===(i=e.getMraidBridgeExt())||void 0===i?void 0:i.creativeHeartbeat)!==void 0;n.getSdkVersion().isGreaterThanOrEqualTo(ET)&&r&&t.emit({type:"heartbeat",event:nA.START})},v9=-1,Te=function(e){addEventListener("pageshow",function(t){t.persisted&&(v9=t.timeStamp,e(t))},!0)},Tt=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Tn=function(){var e=Tt();return e&&e.activationStart||0},Ti=function(e,t){var n=Tt(),i="navigate";return v9>=0?i="back-forward-cache":n&&(document.prerendering||Tn()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(0x82f79cd8fff*Math.random())+1e12),navigationType:i}},Tr=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver(function(e){Promise.resolve().then(function(){t(e.getEntries())})});return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(e){}},Ta=function(e,t,n,i){var r,a;return function(o){var s;t.value>=0&&(o||i)&&((a=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=a,t.rating=(s=t.value)>n[1]?"poor":s>n[0]?"needs-improvement":"good",e(t))}},To=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},Ts=function(e){document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&e()})},Tl=function(e){var t=!1;return function(){t||(e(),t=!0)}},Td=-1,Tc=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Tu=function(e){"hidden"===document.visibilityState&&Td>-1&&(Td="visibilitychange"===e.type?e.timeStamp:0,T_())},TE=function(){addEventListener("visibilitychange",Tu,!0),addEventListener("prerenderingchange",Tu,!0)},T_=function(){removeEventListener("visibilitychange",Tu,!0),removeEventListener("prerenderingchange",Tu,!0)},Tv=function(){return Td<0&&(Td=Tc(),TE(),Te(function(){setTimeout(function(){Td=Tc(),TE()},0)})),{get firstHiddenTime(){return Td}}},TT=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},TS=[1800,3e3],Th=function(e,t){t=t||{},TT(function(){var n,i=Tv(),r=Ti("FCP"),a=Tr("paint",function(e){e.forEach(function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-Tn(),0),r.entries.push(e),n(!0)))})});a&&(n=Ta(e,r,TS,t.reportAllChanges),Te(function(i){n=Ta(e,r=Ti("FCP"),TS,t.reportAllChanges),To(function(){r.value=performance.now()-i.timeStamp,n(!0)})}))})},Tp=0,Tg=1/0,TC=0,TO=function(e){e.forEach(function(e){e.interactionId&&(Tg=Math.min(Tg,e.interactionId),Tp=(TC=Math.max(TC,e.interactionId))?(TC-Tg)/7+1:0)})},TA=function(){return v3?Tp:performance.interactionCount||0},TI=function(){"interactionCount"in performance||v3||(v3=Tr("event",TO,{type:"event",buffered:!0,durationThreshold:0}))},Tf=[],TN=new Map,Tm=0,TD=function(){var e=Math.min(Tf.length-1,Math.floor((TA()-Tm)/50));return Tf[e]},TR=[],TL=function(e){if(TR.forEach(function(t){return t(e)}),e.interactionId||"first-input"===e.entryType){var t=Tf[Tf.length-1],n=TN.get(e.interactionId);if(n||Tf.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};TN.set(i.id,i),Tf.push(i)}Tf.sort(function(e,t){return t.latency-e.latency}),Tf.length>10&&Tf.splice(10).forEach(function(e){return TN.delete(e.id)})}}},Ty=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=Tl(e),"hidden"===document.visibilityState?e():(n=t(e),Ts(e)),n},TP=[200,500],TV=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},TT(function(){TI();var n,i,r=Ti("INP"),a=function(e){Ty(function(){e.forEach(TL);var t=TD();t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,i())})},o=Tr("event",a,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});i=Ta(e,r,TP,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),Ts(function(){a(o.takeRecords()),i(!0)}),Te(function(){Tm=TA(),Tf.length=0,TN.clear(),i=Ta(e,r=Ti("INP"),TP,t.reportAllChanges)}))}))},Tw=[2500,4e3],Tb={},TM=function(e,t){t=t||{},TT(function(){var n,i=Tv(),r=Ti("LCP"),a=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach(function(e){e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-Tn(),0),r.entries=[e],n())})},o=Tr("largest-contentful-paint",a);if(o){n=Ta(e,r,Tw,t.reportAllChanges);var s=Tl(function(){Tb[r.id]||(a(o.takeRecords()),o.disconnect(),Tb[r.id]=!0,n(!0))});["keydown","click"].forEach(function(e){addEventListener(e,function(){return Ty(s)},{once:!0,capture:!0})}),Ts(s),Te(function(i){n=Ta(e,r=Ti("LCP"),Tw,t.reportAllChanges),To(function(){r.value=performance.now()-i.timeStamp,Tb[r.id]=!0,n(!0)})})}})},Tk=[800,1800],TU=function e(t){document.prerendering?TT(function(){return e(t)}):"complete"!==document.readyState?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},TB=function(e,t){t=t||{};var n=Ti("TTFB"),i=Ta(e,n,Tk,t.reportAllChanges);TU(function(){var r=Tt();r&&(n.value=Math.max(r.responseStart-Tn(),0),n.entries=[r],i(!0),Te(function(){(i=Ta(e,n=Ti("TTFB",0),Tk,t.reportAllChanges))(!0)}))})},TH={passive:!0,capture:!0},TW=new Date,TF=function(e,t){v5||(v5=t,v4=e,v6=new Date,TK(removeEventListener),Tx())},Tx=function(){if(v4>=0&&v4<v6-TW){var e={entryType:"first-input",name:v5.type,target:v5.target,cancelable:v5.cancelable,startTime:v5.timeStamp,processingStart:v5.timeStamp+v4};v8.forEach(function(t){t(e)}),v8=[]}},TG=function(e){if(e.cancelable){var t,n,i,r=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?(t=function(){TF(r,e),i()},n=function(){i()},i=function(){removeEventListener("pointerup",t,TH),removeEventListener("pointercancel",n,TH)},addEventListener("pointerup",t,TH),addEventListener("pointercancel",n,TH)):TF(r,e)}},TK=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,TG,TH)})};const TY=e=>t=>{e({name:{FCP:x.WEB_VITALS_FIRST_CONTENTFUL_PAINT,INP:x.WEB_VITALS_INTERACTION_TO_NEXT_PAINT,LCP:x.WEB_VITALS_LARGEST_CONTENTFUL_PAINT,TTFB:x.WEB_VITALS_TIME_TO_FIRST_BYTE}[t.name],value:Math.round(t.value),rating:t.rating})};var Tj=(e=nO,t=Th,n=TV,i=TM,r=TB)=>{let a=TY(e);t(a),n(a),i(a),r(a)};const TX=async()=>{Ed(),El(),cE(),nO({name:x.AD_LOAD}),uU(),cs(),cG(),uw(),up(),ca(),EE(),Eu(),E_(),uv(),cd(),await ux(),v7(),uh(),cp({name:x.SIGNAL_TIMER_START}),uk(),Tj(),co(),nO({name:x.AD_LOAD_COMPLETE})};(()=>{let e=r.getInstance(),t=new o,n=new N;return e.bind(o.getServiceIdentifier(),t),e.bind(l.getServiceIdentifier(),new l),e.bind(C.getServiceIdentifier(),new C),e.bind(N.getServiceIdentifier(),n),e.bind(L.getServiceIdentifier(),new L),e.bind(D.getServiceIdentifier(),new D),e.bind(M.getServiceIdentifier(),new M(t,n)),e.bind(W.getServiceIdentifier(),new W(t,n)),e.bind(eu.getServiceIdentifier(),new eu),e.bind(eX.getServiceIdentifier(),new eX),e.bind(ez.getServiceIdentifier(),new ez),e.bind(tQ.getServiceIdentifier(),new tQ),e.bind(rl.getServiceIdentifier(),new rl),e.bind(iM.getServiceIdentifier(),new iM(n)),e.bind(rS.getServiceIdentifier(),new rS)})(),y().init(),window.omidBridge={init:(...e)=>{uB.options=e},setLastActivity:(...e)=>{uB.lastActivity=e},setDeviceVolume:(...e)=>{uB.volume=e},startSession:(...e)=>{uB.sessionContent=e},setState:(...e)=>{uB.state=e},setNativeViewHierarchy:(...e)=>{uB.nativeView=e}},((e=y())=>new Promise(t=>{let n=e.getMraid();(null==n?void 0:n.getState())===I.LOADING?null==n||n.addEventListener("ready",()=>{rh(),t(!0)}):(rh(),t(!0))}))().then(TX).then(()=>new Promise(e=>{var t;let n=y();if(null===(t=n.getMraid())||void 0===t?void 0:t.isViewable())e(!0);else{let t=window.setInterval(()=>{var i;(null===(i=n.getMraid())||void 0===i?void 0:i.isViewable())&&(window.clearInterval(t),e(!0))},100)}})).then(()=>{var e,t,n,i,r,a;cr(),cn(),e=/*#__PURE__*/rg(ct,{}),t=document.getElementById("dynamic"),eU.__&&eU.__(e,t),i=n&&n.__k||t.__k,r=[],a=[],tt(t,e=(n||t).__k=function(e,t,n){var i,r,a,o={};for(a in t)"key"==a?i=t[a]:"ref"==a?r=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?ek.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===o[a]&&(o[a]=e.defaultProps[a]);return e1(e,o,i,r,null)}(e2,null,[e]),i||e$,e$,t.namespaceURI,n?[n]:i?null:t.firstChild?ek.call(t.childNodes):null,r,n||(i?i.__e:t.firstChild),!1,a),tn(r,e,a)});
</script> </body></html>